<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 12">
<meta name=Originator content="Microsoft Word 12">
<link rel=File-List href="lvs/filelist.xml">
<link rel=Edit-Time-Data href="lvs/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>edward</o:Author>
  <o:LastAuthor>Administrator</o:LastAuthor>
  <o:Revision>3</o:Revision>
  <o:TotalTime>8073</o:TotalTime>
  <o:Created>2015-07-11T04:56:00Z</o:Created>
  <o:LastSaved>2015-07-11T04:56:00Z</o:LastSaved>
  <o:Pages>17</o:Pages>
  <o:Words>4167</o:Words>
  <o:Characters>23752</o:Characters>
  <o:Lines>197</o:Lines>
  <o:Paragraphs>55</o:Paragraphs>
  <o:CharactersWithSpaces>27864</o:CharactersWithSpaces>
  <o:Version>12.00</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:RelyOnVML/>
  <o:AllowPNG/>
 </o:OfficeDocumentSettings>
</xml><![endif]-->
<link rel=themeData href="lvs/themedata.thmx">
<link rel=colorSchemeMapping href="lvs/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:DrawingGridVerticalSpacing>7.8 磅</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>ZH-CN</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:DontVertAlignCellWithSp/>
   <w:DontBreakConstrainedForcedTables/>
   <w:DontVertAlignInTxbx/>
   <w:Word11KerningPairs/>
   <w:CachedColBalance/>
   <w:UseFELayout/>
  </w:Compatibility>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="1" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:1;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:0 0 0 0 0 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536870145 1073743103 0 0 415 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-520092929 1073786111 9 0 415 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-1593833729 1073750107 16 0 415 0;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-520081665 -1073717157 41 0 66047 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
h1
	{mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"标题 1 Char";
	mso-style-next:正文;
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:21.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.6pt;
	line-height:240%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:1;
	mso-list:l11 level1 lfo4;
	font-size:22.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:22.0pt;
	font-weight:bold;}
h2
	{mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"标题 2 Char";
	mso-style-next:正文;
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-28.8pt;
	line-height:173%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:2;
	mso-list:l11 level2 lfo4;
	font-size:16.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
h3
	{mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"标题 3 Char";
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:36.0pt;
	text-indent:-36.0pt;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	mso-list:l11 level3 lfo4;
	font-size:13.5pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;
	font-weight:bold;}
h4
	{mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"标题 4 Char";
	mso-style-next:正文;
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:43.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-43.2pt;
	line-height:156%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:4;
	mso-list:l11 level4 lfo4;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
h5
	{mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"标题 5 Char";
	mso-style-next:正文;
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:50.4pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-50.4pt;
	line-height:156%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:5;
	mso-list:l11 level5 lfo4;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
h6
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"标题 6 Char";
	mso-style-next:正文;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:57.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-57.6pt;
	line-height:133%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:6;
	mso-list:l11 level6 lfo4;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"标题 7 Char";
	mso-style-next:正文;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:64.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-64.8pt;
	line-height:133%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:7;
	mso-list:l11 level7 lfo4;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"标题 8 Char";
	mso-style-next:正文;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:72.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-72.0pt;
	line-height:133%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:8;
	mso-list:l11 level8 lfo4;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"标题 9 Char";
	mso-style-next:正文;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:79.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-79.2pt;
	line-height:133%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:9;
	mso-list:l11 level9 lfo4;
	font-size:10.5pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-priority:99;
	mso-style-link:"页眉 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	border:none;
	mso-border-bottom-alt:solid windowtext .75pt;
	padding:0cm;
	mso-padding-alt:0cm 0cm 1.0pt 0cm;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-priority:99;
	mso-style-link:"页脚 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-noshow:yes;
	mso-style-priority:99;
	color:purple;
	mso-themecolor:followedhyperlink;
	text-decoration:underline;
	text-underline:single;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-link:"文档结构图 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:9.0pt;
	font-family:宋体;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
p
	{mso-style-priority:99;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
pre
	{mso-style-priority:99;
	mso-style-link:"HTML 预设格式 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-link:"批注框文本 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-priority:34;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	mso-char-indent-count:2.0;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:页眉;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:页脚;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
span.Char1
	{mso-style-name:"批注框文本 Char";
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:批注框文本;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
span.3Char
	{mso-style-name:"标题 3 Char";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 3";
	mso-ansi-font-size:13.5pt;
	mso-bidi-font-size:13.5pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:宋体;
	mso-bidi-font-family:宋体;
	mso-font-kerning:0pt;
	font-weight:bold;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;
	mso-style-unhide:no;}
span.linktitle
	{mso-style-name:link_title;
	mso-style-unhide:no;}
span.linkcategories
	{mso-style-name:link_categories;
	mso-style-unhide:no;}
span.linkpostdate
	{mso-style-name:link_postdate;
	mso-style-unhide:no;}
span.linkview
	{mso-style-name:link_view;
	mso-style-unhide:no;}
span.linkcomments
	{mso-style-name:link_comments;
	mso-style-unhide:no;}
span.linkcollect
	{mso-style-name:link_collect;
	mso-style-unhide:no;}
span.linkreport
	{mso-style-name:link_report;
	mso-style-unhide:no;}
span.Char2
	{mso-style-name:"文档结构图 Char";
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:文档结构图;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;}
span.1Char
	{mso-style-name:"标题 1 Char";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 1";
	mso-ansi-font-size:22.0pt;
	mso-bidi-font-size:22.0pt;
	mso-font-kerning:22.0pt;
	font-weight:bold;}
span.HTMLChar
	{mso-style-name:"HTML 预设格式 Char";
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"HTML 预设格式";
	mso-ansi-font-size:12.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:宋体;
	mso-ascii-font-family:宋体;
	mso-fareast-font-family:宋体;
	mso-hansi-font-family:宋体;
	mso-bidi-font-family:宋体;
	mso-font-kerning:0pt;}
span.2Char
	{mso-style-name:"标题 2 Char";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 2";
	mso-ansi-font-size:16.0pt;
	mso-bidi-font-size:16.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	font-weight:bold;}
span.4Char
	{mso-style-name:"标题 4 Char";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 4";
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	font-weight:bold;}
span.5Char
	{mso-style-name:"标题 5 Char";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 5";
	mso-ansi-font-size:14.0pt;
	mso-bidi-font-size:14.0pt;
	font-weight:bold;}
span.6Char
	{mso-style-name:"标题 6 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 6";
	mso-ansi-font-size:12.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	font-weight:bold;}
span.7Char
	{mso-style-name:"标题 7 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 7";
	mso-ansi-font-size:12.0pt;
	mso-bidi-font-size:12.0pt;
	font-weight:bold;}
span.8Char
	{mso-style-name:"标题 8 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 8";
	mso-ansi-font-size:12.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;}
span.9Char
	{mso-style-name:"标题 9 Char";
	mso-style-noshow:yes;
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 9";
	mso-bidi-font-size:10.5pt;
	font-family:"Cambria","serif";
	mso-ascii-font-family:Cambria;
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:Cambria;
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;}
span.annotation
	{mso-style-name:annotation;
	mso-style-unhide:no;}
span.number
	{mso-style-name:number;
	mso-style-unhide:no;}
span.keyword
	{mso-style-name:keyword;
	mso-style-unhide:no;}
span.atitle2
	{mso-style-name:atitle2;
	mso-style-unhide:no;}
p.p01, li.p01, div.p01
	{mso-style-name:p01;
	mso-style-unhide:no;
	margin-top:7.5pt;
	margin-right:0cm;
	margin-bottom:7.5pt;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:宋体;
	mso-bidi-font-family:宋体;}
span.ksfindclassselect
	{mso-style-name:ksfind_class_select;
	mso-style-unhide:no;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-footnote-separator:url("lvs/header.htm") fs;
	mso-footnote-continuation-separator:url("lvs/header.htm") fcs;
	mso-endnote-separator:url("lvs/header.htm") es;
	mso-endnote-continuation-separator:url("lvs/header.htm") ecs;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 @list l0
	{mso-list-id:58215905;
	mso-list-type:hybrid;
	mso-list-template-ids:104485654 1818767574 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l0:level1
	{mso-level-start-at:2;
	mso-level-text:%1．;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:25.1pt;
	text-indent:-18.0pt;}
@list l1
	{mso-list-id:110436342;
	mso-list-type:hybrid;
	mso-list-template-ids:-1720182592 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l2
	{mso-list-id:176889449;
	mso-list-type:hybrid;
	mso-list-template-ids:-1354470338 -1639406928 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l2:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l3
	{mso-list-id:321084690;
	mso-list-type:hybrid;
	mso-list-template-ids:632313762 1634610896 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l3:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l4
	{mso-list-id:372076638;
	mso-list-type:hybrid;
	mso-list-template-ids:1491081520 -320415256 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l4:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l5
	{mso-list-id:373308791;
	mso-list-type:hybrid;
	mso-list-template-ids:809145448 1561464204 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l5:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l6
	{mso-list-id:420372232;
	mso-list-type:hybrid;
	mso-list-template-ids:632313762 1634610896 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l6:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l7
	{mso-list-id:450129926;
	mso-list-type:hybrid;
	mso-list-template-ids:825251794 304755904 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l7:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l8
	{mso-list-id:647243290;
	mso-list-type:hybrid;
	mso-list-template-ids:809145448 1561464204 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l8:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l9
	{mso-list-id:742335317;
	mso-list-type:hybrid;
	mso-list-template-ids:-1837348166 -1161292100 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l9:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:54.0pt;
	text-indent:-18.0pt;}
@list l10
	{mso-list-id:775828063;
	mso-list-template-ids:977667548;}
@list l10:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l10:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;
	mso-ansi-font-size:10.0pt;
	font-family:Symbol;}
@list l11
	{mso-list-id:796342196;
	mso-list-template-ids:67698725;}
@list l11:level1
	{mso-level-style-link:"标题 1";
	mso-level-text:%1;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.6pt;
	text-indent:-21.6pt;}
@list l11:level2
	{mso-level-style-link:"标题 2";
	mso-level-text:"%1\.%2";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:276.9pt;
	text-indent:-28.8pt;}
@list l11:level3
	{mso-level-style-link:"标题 3";
	mso-level-text:"%1\.%2\.%3";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:36.0pt;
	text-indent:-36.0pt;}
@list l11:level4
	{mso-level-style-link:"标题 4";
	mso-level-text:"%1\.%2\.%3\.%4";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:43.2pt;
	text-indent:-43.2pt;}
@list l11:level5
	{mso-level-style-link:"标题 5";
	mso-level-text:"%1\.%2\.%3\.%4\.%5";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:50.4pt;
	text-indent:-50.4pt;}
@list l11:level6
	{mso-level-style-link:"标题 6";
	mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:57.6pt;
	text-indent:-57.6pt;}
@list l11:level7
	{mso-level-style-link:"标题 7";
	mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:64.8pt;
	text-indent:-64.8pt;}
@list l11:level8
	{mso-level-style-link:"标题 8";
	mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:72.0pt;
	text-indent:-72.0pt;}
@list l11:level9
	{mso-level-style-link:"标题 9";
	mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:79.2pt;
	text-indent:-79.2pt;}
@list l12
	{mso-list-id:917518047;
	mso-list-type:hybrid;
	mso-list-template-ids:632313762 1634610896 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l12:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l13
	{mso-list-id:1297447325;
	mso-list-type:hybrid;
	mso-list-template-ids:-222664986 437413672 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l13:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:宋体;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
@list l14
	{mso-list-id:1499729743;
	mso-list-type:hybrid;
	mso-list-template-ids:1481278662 -299829678 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l14:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l15
	{mso-list-id:1564170701;
	mso-list-type:hybrid;
	mso-list-template-ids:2130367090 1973867612 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l15:level1
	{mso-level-text:%1．;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;}
@list l16
	{mso-list-id:1575310081;
	mso-list-template-ids:146948986;}
@list l17
	{mso-list-id:1672021490;
	mso-list-type:hybrid;
	mso-list-template-ids:1789713690 -1741629724 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l17:level1
	{mso-level-text:%1、;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l18
	{mso-list-id:2040885832;
	mso-list-type:hybrid;
	mso-list-template-ids:-67339686 -1317399262 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l18:level1
	{mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
table.MsoTableGrid
	{mso-style-name:网格型;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-priority:59;
	mso-style-unhide:no;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
table.MsoTableLightShading
	{mso-style-name:浅色底纹;
	mso-tstyle-rowband-size:1;
	mso-tstyle-colband-size:1;
	mso-style-priority:60;
	mso-style-unhide:no;
	border-top:solid black 1.0pt;
	mso-border-top-themecolor:text1;
	border-left:none;
	border-bottom:solid black 1.0pt;
	mso-border-bottom-themecolor:text1;
	border-right:none;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	color:black;
	mso-themecolor:text1;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;}
table.MsoTableLightShadingFirstRow
	{mso-style-name:浅色底纹;
	mso-table-condition:first-row;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-tstyle-border-top:1.0pt solid black;
	mso-tstyle-border-top-themecolor:text1;
	mso-tstyle-border-left:cell-none;
	mso-tstyle-border-bottom:1.0pt solid black;
	mso-tstyle-border-bottom-themecolor:text1;
	mso-tstyle-border-right:cell-none;
	mso-tstyle-border-insideh:cell-none;
	mso-tstyle-border-insidev:cell-none;
	mso-para-margin-top:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-bottom:.0001pt;
	line-height:normal;
	mso-ansi-font-weight:bold;
	mso-bidi-font-weight:bold;}
table.MsoTableLightShadingLastRow
	{mso-style-name:浅色底纹;
	mso-table-condition:last-row;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-tstyle-border-top:1.0pt solid black;
	mso-tstyle-border-top-themecolor:text1;
	mso-tstyle-border-left:cell-none;
	mso-tstyle-border-bottom:1.0pt solid black;
	mso-tstyle-border-bottom-themecolor:text1;
	mso-tstyle-border-right:cell-none;
	mso-tstyle-border-insideh:cell-none;
	mso-tstyle-border-insidev:cell-none;
	mso-para-margin-top:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-bottom:.0001pt;
	line-height:normal;
	mso-ansi-font-weight:bold;
	mso-bidi-font-weight:bold;}
table.MsoTableLightShadingFirstCol
	{mso-style-name:浅色底纹;
	mso-table-condition:first-column;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-ansi-font-weight:bold;
	mso-bidi-font-weight:bold;}
table.MsoTableLightShadingLastCol
	{mso-style-name:浅色底纹;
	mso-table-condition:last-column;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-ansi-font-weight:bold;
	mso-bidi-font-weight:bold;}
table.MsoTableLightShadingOddColumn
	{mso-style-name:浅色底纹;
	mso-table-condition:odd-column;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-tstyle-shading:silver;
	mso-tstyle-shading-themecolor:text1;
	mso-tstyle-shading-themetint:63;
	mso-tstyle-border-left:cell-none;
	mso-tstyle-border-right:cell-none;
	mso-tstyle-border-insideh:cell-none;
	mso-tstyle-border-insidev:cell-none;}
table.MsoTableLightShadingOddRow
	{mso-style-name:浅色底纹;
	mso-table-condition:odd-row;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-tstyle-shading:silver;
	mso-tstyle-shading-themecolor:text1;
	mso-tstyle-shading-themetint:63;
	mso-tstyle-border-left:cell-none;
	mso-tstyle-border-right:cell-none;
	mso-tstyle-border-insideh:cell-none;
	mso-tstyle-border-insidev:cell-none;}
table.MsoTableLightShadingAccent4
	{mso-style-name:"浅色底纹 - 强调文字颜色 4";
	mso-tstyle-rowband-size:1;
	mso-tstyle-colband-size:1;
	mso-style-priority:60;
	mso-style-unhide:no;
	border-top:solid #8064A2 1.0pt;
	mso-border-top-themecolor:accent4;
	border-left:none;
	border-bottom:solid #8064A2 1.0pt;
	mso-border-bottom-themecolor:accent4;
	border-right:none;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	color:#5F497A;
	mso-themecolor:accent4;
	mso-themeshade:191;
	mso-font-kerning:1.0pt;}
table.MsoTableLightShadingAccent4FirstRow
	{mso-style-name:"浅色底纹 - 强调文字颜色 4";
	mso-table-condition:first-row;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-tstyle-border-top:1.0pt solid #8064A2;
	mso-tstyle-border-top-themecolor:accent4;
	mso-tstyle-border-left:cell-none;
	mso-tstyle-border-bottom:1.0pt solid #8064A2;
	mso-tstyle-border-bottom-themecolor:accent4;
	mso-tstyle-border-right:cell-none;
	mso-tstyle-border-insideh:cell-none;
	mso-tstyle-border-insidev:cell-none;
	mso-para-margin-top:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-bottom:.0001pt;
	line-height:normal;
	mso-ansi-font-weight:bold;
	mso-bidi-font-weight:bold;}
table.MsoTableLightShadingAccent4LastRow
	{mso-style-name:"浅色底纹 - 强调文字颜色 4";
	mso-table-condition:last-row;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-tstyle-border-top:1.0pt solid #8064A2;
	mso-tstyle-border-top-themecolor:accent4;
	mso-tstyle-border-left:cell-none;
	mso-tstyle-border-bottom:1.0pt solid #8064A2;
	mso-tstyle-border-bottom-themecolor:accent4;
	mso-tstyle-border-right:cell-none;
	mso-tstyle-border-insideh:cell-none;
	mso-tstyle-border-insidev:cell-none;
	mso-para-margin-top:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-bottom:.0001pt;
	line-height:normal;
	mso-ansi-font-weight:bold;
	mso-bidi-font-weight:bold;}
table.MsoTableLightShadingAccent4FirstCol
	{mso-style-name:"浅色底纹 - 强调文字颜色 4";
	mso-table-condition:first-column;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-ansi-font-weight:bold;
	mso-bidi-font-weight:bold;}
table.MsoTableLightShadingAccent4LastCol
	{mso-style-name:"浅色底纹 - 强调文字颜色 4";
	mso-table-condition:last-column;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-ansi-font-weight:bold;
	mso-bidi-font-weight:bold;}
table.MsoTableLightShadingAccent4OddColumn
	{mso-style-name:"浅色底纹 - 强调文字颜色 4";
	mso-table-condition:odd-column;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-tstyle-shading:#DFD8E8;
	mso-tstyle-shading-themecolor:accent4;
	mso-tstyle-shading-themetint:63;
	mso-tstyle-border-left:cell-none;
	mso-tstyle-border-right:cell-none;
	mso-tstyle-border-insideh:cell-none;
	mso-tstyle-border-insidev:cell-none;}
table.MsoTableLightShadingAccent4OddRow
	{mso-style-name:"浅色底纹 - 强调文字颜色 4";
	mso-table-condition:odd-row;
	mso-style-priority:60;
	mso-style-unhide:no;
	mso-tstyle-shading:#DFD8E8;
	mso-tstyle-shading-themecolor:accent4;
	mso-tstyle-shading-themetint:63;
	mso-tstyle-border-left:cell-none;
	mso-tstyle-border-right:cell-none;
	mso-tstyle-border-insideh:cell-none;
	mso-tstyle-border-insidev:cell-none;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="5122"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=ZH-CN link=blue vlink=purple style='tab-interval:21.0pt;text-justify-trim:
punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<h1><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='mso-spacerun:yes'>&nbsp;</span><span
lang=EN-US>LVS</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>介绍</span></h1>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>1.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>简介</span></h2>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>负载均衡技术有很多实现方案，有基于</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>DNS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>域名轮流解析的方法、有基于客户端调度访问的方法、有基于应用层系统负载的调度方法，还有基于</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>地址的调度方法。本文介绍基于传输层的负载均衡器</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>。</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>是</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Linux Virtual Server</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>的简称，也就是</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Linux</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>虚拟服务器</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>, </span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>用现在的观点来看就是个</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>4</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>层（传输层</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>tcp/udp</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>）的负责均衡器。</span><span style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'> </span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>它是一个由章文嵩博士发起的自由软件项目，它的官方站点是</span><span lang=EN-US><a
href="http://www.linuxvirtualserver.org/"><span style='mso-bidi-font-size:10.5pt;
color:black;text-decoration:none;text-underline:none'>www.linuxvirtualserver.org</span></a></span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>。现在</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>已经是</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'> Linux</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>标准内核的一部分，在</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Linux2.4</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>内核以前，使用</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>时必须要重新编译内核以支持</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>功能模块，但是从</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Linux2.4</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>内核以后，已经完全内置了</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>的各个功能模块，无需给内核打任何补丁，可以直接使用</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>提供的各种功能。</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>技术要达到的目标是：通过</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>提供的负载均衡技术和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Linux</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>操作系统实现一个高性能、高可用的服务器群集，它具有良好可靠性、可扩展性和可操作性。从而以低廉的成本实现最优的服务性能。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>自从</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>1998</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>年开始，发展到现在已经是一个比较成熟的技术项目了。可以利用</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>技术实现高可伸缩的、高可用的网络服务，例如</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>WWW</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>服务、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Cache</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>服务、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>DNS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>服务、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>FTP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>服务、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>MAIL</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>服务、视频</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>/</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>音频点播服务等等，有许多比较著名网站和组织都在使用</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>架设的集群系统，例如：</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Linux</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的门户网站（</span><span
lang=EN-US><a href="http://www.linux.com/"><span style='mso-bidi-font-size:
10.5pt;color:black;text-decoration:none;text-underline:none'>www.linux.com</span></a></span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>）、向</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>RealPlayer</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>提供音频视频服务而闻名的</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Real</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>公司（</span><span lang=EN-US><a href="http://www.real.com/"><span
style='mso-bidi-font-size:10.5pt;color:black;text-decoration:none;text-underline:
none'>www.real.com</span></a></span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>）、全球最大的开源网站（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>sourceforge.net</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>）等。</span><span
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>
<span style='mso-spacerun:yes'>&nbsp;</span><span lang=EN-US><o:p></o:p></span></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>1.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>主要功能</span></h2>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>目前有三种</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>负载均衡技术（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>VS/NAT</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>VS/TUN</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>VS/DR</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>）；十种调度算法（</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>rrr|wrr|lc|wlc|lblc|lblcr|dh|sh|sed|nq</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>）</span><span style='mso-bidi-font-size:10.5pt;font-family:
"Verdana","sans-serif";color:black'> <span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>1.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:宋体;
mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:Cambria;
mso-hansi-theme-font:major-latin'>优点</span></h2>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>1.3.1<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>功能特性</h3>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>1</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>、抗负载能力强、是工作在网络</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>4</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>层之上仅作分发之用，没有流量的产生；</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>2</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>、配置性比较低，这是一个缺点也是一个优点，因为没有可太多配置的东西，所以并不需要太多接触，大大减少了人为出错的几率；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>3</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>、工作稳定，自身有完整的双机热备方案；</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>4</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>、无流量，保证了均衡器</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>IO</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>的性能不会收到大流量的影响；</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>5</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>、应用范围比较广，可以对所有应用做负载均衡；</span><span style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'> <span lang=EN-US><o:p></o:p></span></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>1.3.2<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>高可用性</h3>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>是一个基于内核级别的应用软件，因此具有很高的处理性能，用</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>构架的负载均衡集群系统具有优秀的处理能力，每个服务节点的故障不会影响整个系统的正常使用，同时又实现负载的合理均衡，使应用具有超高负荷的服务能力，可支持上百万个并发连接请求。如配置百兆网卡，采用</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>VS/TUN</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>或</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>VS/DR</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>调度技术，整个集群系统的吞吐量可高达</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>1Gbits/s</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>；如配置千兆网卡，则系统的最大吞吐量可接近</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>10Gbits/s</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>1.3.3<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span></span>高可靠性</h3>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>负载均衡集群软件已经在企业、学校等行业得到了很好的普及应用，国内外很多大型的、关键性的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>web</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>站点也都采用了</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>集群软件，所以它的可靠性在实践中得到了很好的证实。有很多以</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>做的负载均衡系统，运行很长时间，从未做过重新启动。这些都说明了</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的高稳定性和高可靠性。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>1.3.4<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span></span>适用环境</h3>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>对前端</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Director Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>目前仅支持</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Linux</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>FreeBSD</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>系统，但是支持大多数的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>TCP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>UDP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>协议，支持</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>TCP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>协议的应用有：</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>HTTP</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>HTTPS </span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>FTP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>SMTP</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>POP3</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IMAP4</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>PROXY</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LDAP</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>SSMTP</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>等等。支持</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>UDP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>协议的应用有：</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>DNS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>NTP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>ICP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，视频、音频流播放协议等。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>对</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Real Server</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>的操作系统没有任何限制，</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Real Server</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>可运行在任何支持</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>TCP/IP</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>的操作系统上，包括</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Linux</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>，各种</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Unix</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>（如</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>FreeBSD</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>、</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Sun Solaris</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>、</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>HP Unix</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>等），</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Mac/OS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>和</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Windows</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>等。</span><span style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'> </span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>1.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>缺点</span></h2>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>需要网络环境的支持</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>不能针对上层协议分析</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>如果做成硬件会更完美</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>1.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>类似产品</span></h2>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>1.5.1<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>介绍</h3>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>现在网络中常见的负载均衡主要分为两种：一种是通过硬件来进行进行，常见的硬件有比较昂贵的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>NetScaler</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>F5</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Radware</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Array</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>等商用的负载均衡器，也有类似于</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>HAproxy</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的基于</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Linux</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的开源的负载均衡策略。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>商用负载均衡里面</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>NetScaler</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>从效果上比</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>F5</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>的效率上更高。对于负载均衡器来说，不过商用负载均衡由于可以建立在四</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>~</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>七层</span><span style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'> </span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>协议之上，因此适用</span><span style='mso-bidi-font-size:10.5pt;font-family:
"Verdana","sans-serif";color:black'> </span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>面更广所以有其不可替代性，他的优点就是有专业的维护团队来对这些服务进行维护、缺点就是花销太大，所以对于规模较小的网络服务来说暂时还没有需要使用。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>另一种负载均衡的方式是通过软件：比较常见的有</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>、</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Nginx</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>、</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>HAproxy</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>等，其中</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>是建立在四层协议上面的，而另外</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Nginx</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>和</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>HAproxy</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>是建立在七层协议之上的，下面分别介绍关于</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的特点是：</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>1</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、工作在网络的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>7</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>层之上，可以针对</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>http</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>应用做一些分流的策略，比如针对域名、目录结构；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>2</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>对网络的依赖比较小；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>3</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>安装和配置比较简单，测试起来比较方便；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>4</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、也可以承担高的负载压力且稳定，一般能支撑超过</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>1</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>万次的并发；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>5</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>可以通过端口检测到服务器内部的故障，比如根据服务器处理网页返回的状态码、超时等等，并且会把返回错误的请求重新提交到另一个节点，不过其中缺点就是不支持</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>url</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>来检测；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>6</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>对请求的异步处理可以帮助节点服务器减轻负载；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>7</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>能支持</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>http</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Email</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，这样就在适用范围上面小很多；</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>8</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、不支持</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Session</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的保持、对</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Big request header</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>的支持不是很好，另外默认的只有</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Round-robin</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP-hash</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>两种负载均衡算法。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>HAProxy</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的特点是：</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>1</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>HAProxy</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>是工作在网络</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>7</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>层之上。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>2</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、能够补充</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的一些缺点比如</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Session</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的保持，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Cookie</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的引导等工作</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>3</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、支持</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>url</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>检测后端的服务器出问题的检测会有很好的帮助。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>4</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、更多的负载均衡策略比如：动态加权轮循</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>(Dynamic Round Robin)</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>，加权源地址哈希</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>(Weighted Source Hash)</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>，加权</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>URL</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>哈希和加权参数哈希</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>(Weighted Parameter Hash)</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>已经实现</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>5</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、单纯从效率上来讲</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>HAProxy</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>更会比</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Nginx</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>有更出色的负载均衡速度。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>6</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>HAProxy</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>可以对</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Mysql</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>进行负载均衡，对后端的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>DB</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>节点进行检测和负载均衡。</span><span
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>
<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>1.5.2<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>软负载均衡器性能对比</h3>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shapetype id="_x0000_t75"
 coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe"
 filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1128" type="#_x0000_t75" style='width:415.5pt;
 height:128.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image001.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>上图是网上的数据，</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>LVS</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>的实际性能可能没有展示出来，肯定要比</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>Nginx</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>的并发量高。</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h1 style='line-height:24.0pt'><a name=top></a><![if !supportLists]><span
lang=EN-US style='font-family:"Verdana","sans-serif";mso-fareast-font-family:
Verdana;mso-bidi-font-family:Verdana'><span style='mso-list:Ignore'>2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"Verdana","sans-serif"'><span
style='mso-spacerun:yes'>&nbsp;</span>LVS</span><span style='font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana'>原理篇</span><span lang=EN-US
style='font-family:"Verdana","sans-serif"'><o:p></o:p></span></h1>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>工作模式</span></h2>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>负载均衡技术是通过</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IPVS</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>模块来实现的，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IPVS</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>是</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>集群系统的核心软件，它的主要作用是：安装在</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Director Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>上，同时在</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Director Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>上虚拟出一个</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>地址，用户必须通过这个虚拟的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>地址访问服务。这个虚拟</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>一般称为</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>VIP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>，即</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Virtual IP</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>。访问的请求首先经过</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>VIP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>到达负载调度器，然后由负载调度器从</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Real Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>列表中选取一个服务节点响应用户的请求。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>当用户的请求到达负载调度器后，调度器如何将请求发送到提供服务的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Real Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>节点，而</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Real Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>节点如何返回数据给用户，是</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IPVS</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>实现的重点技术，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IPVS</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>实现负载均衡机制有三种，分别是</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>NAT</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>、</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>TUN</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>DR</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>注意：</span></b><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>director server </span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>、</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>ld </span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>、</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>lvs</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>负责均衡器、调度器都是同一个概念</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>realserver </span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>、后端服务器也代表一个意思。</span></p>

<h3><![if !supportLists]><strong><span lang=EN-US style='font-family:宋体;
mso-bidi-font-family:宋体'><span style='mso-list:Ignore'>2.1.1<span
style='font:7.0pt "Times New Roman"'> </span></span></span></strong><![endif]><strong><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-bidi-font-family:宋体'>转发机制</span></strong><strong><span
lang=EN-US style='font-family:宋体;mso-bidi-font-family:宋体'><o:p></o:p></span></strong></h3>

<h4><![if !supportLists]><strong><span lang=EN-US style='font-family:"Cambria","serif";
mso-ascii-theme-font:major-latin;mso-fareast-font-family:Cambria;mso-fareast-theme-font:
major-latin;mso-hansi-theme-font:major-latin;mso-bidi-font-family:Cambria;
mso-bidi-theme-font:major-latin'><span style='mso-list:Ignore'>2.1.1.1<span
style='font:7.0pt "Times New Roman"'> </span></span></span></strong><![endif]><strong><span
lang=EN-US style='mso-bidi-font-size:10.5pt;line-height:156%;font-family:"Cambria","serif";
mso-ascii-theme-font:major-latin;mso-hansi-theme-font:major-latin;mso-bidi-font-family:
"Times New Roman";mso-bidi-theme-font:major-bidi'><span
style='mso-spacerun:yes'>&nbsp;</span></span></strong><strong><span
style='mso-bidi-font-size:10.5pt;line-height:156%;font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin;
mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:major-bidi'>三种转发机制</span></strong><strong><span
lang=EN-US style='font-family:"Cambria","serif";mso-ascii-theme-font:major-latin;
mso-hansi-theme-font:major-latin;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:major-bidi'><o:p></o:p></span></strong></h4>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>VS/NAT</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>：</span><span
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>
</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Verdana;color:black'>即（</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>Virtual
Server via Network Address Translation</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>）</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>也就是网络地址翻译技术实现虚拟服务器，当用户请求到达调度器时，调度器将请求报文的目标地址（即虚拟</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>地址）改写成选定的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Real Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>地址，同时报文的目标端口也改成选定的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Real Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>的相应端口，最后将报文请求发送到选定的</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Real Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>。在服务器端得到数据后，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Real Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>返回数据给用户时，需要再次经过负载调度器将报文的源地址和源端口改成虚拟</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>IP</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>地址和相应端口，然后把数据发送给用户，完成整个负载调度过程。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>可以看出，在</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>NAT</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>方式下，用户请求和响应报文都必须经过</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>Director
Server</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Verdana;color:black'>地址重写，当用户请求越来越多时，调度器的处理能力将称为瓶颈。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><span style='mso-spacerun:yes'>&nbsp;</span>VS/TUN </span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>：即（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Virtual Server via IP Tunneling</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>）</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:Symbol;mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;
color:black;mso-char-type:symbol;mso-symbol-font-family:Symbol'><span
style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>l</span></span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'> <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>也就是</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>IP</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>隧道技术实现虚拟服务器。它的连接调度和管理与</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>VS/NAT</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>方式一样，只是它的报文转发方法不同，</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>VS/TUN</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>方式中，调度器采用</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>IP</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>隧道技术将用户请求转发到某个</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Real Server</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>，而这个</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Real Server</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>将直接响应用户的请求，不再经过前端调度器，此外，对</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>Real
Server</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Verdana;color:black'>的地域位置没有要求，可以和</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>Director Server</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black'>位于同一个网段，也可以是独立的一个网络。因此，在</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'>TUN</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black'>方式中，调度器将只处理用户的报文请求，集群系统的吞吐量大大提高。</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'><span style='mso-spacerun:yes'>&nbsp;</span>VS/DR</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>：</span><span style='mso-bidi-font-size:10.5pt;font-family:
"Verdana","sans-serif";color:black'> </span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black'>即（</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Virtual Server via Direct
Routing</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Verdana;color:black'>）</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:Symbol;mso-ascii-font-family:Verdana;
mso-hansi-font-family:Verdana;color:black;mso-char-type:symbol;mso-symbol-font-family:
Symbol'><span style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>l</span></span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black'> <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>也就是用直接路由技术实现虚拟服务器。它的连接调度和管理与</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>VS/NAT</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>和</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>VS/TUN</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>中的一样，但它的报文转发方法又有不同，</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>VS/DR</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>通过改写请求报文的</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>MAC</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>地址，将请求发送到</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>Real Server</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>，而</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>Real Server</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>将响应直接返回给客户，免去了</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";color:black'>VS/TUN</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>中的</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black'>IP</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black'>隧道开销。这种方式是三种负载调度机制中性能最高最好的，但是必须要求</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>Director
Server</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Verdana;color:black'>与</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>Real
Server</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Verdana;color:black'>都有一块网卡连在同一物理网段上。</span><span
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black'>
<span style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>2.1.1.2<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><strong><span style='mso-bidi-font-size:10.5pt;
line-height:156%;font-family:宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:
major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:major-fareast;
mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin;mso-bidi-font-family:
"Times New Roman";mso-bidi-theme-font:major-bidi'>三种</span></strong><span
style='font-family:宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:
Cambria;mso-hansi-theme-font:major-latin'>转发机制流程</span></h4>

<h5><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>2.1.1.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>NAT</span></h5>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_23"
 o:spid="_x0000_i1127" type="#_x0000_t75" alt="图1" style='width:351pt;height:326.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image002.gif" o:title="图1"/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo9'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端发起请求到</span><span
lang=EN-US>load balancer</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的虚拟</span><span
lang=EN-US>ip</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo9'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load banlancer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>把客户请的目标地址改写为其中一个</span><span
lang=EN-US>real server</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的，源地址改成不变。</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo9'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>接受请求，并返回给</span><span lang=EN-US>load
banlancer</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>响应</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo9'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load banlancer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>接受到响应，修改目标地址为不变，源地址改成自己的。</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo9'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端接受</span><span
lang=EN-US>loader banlancer</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的响应</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>注意：</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>如果客户端和</span><span
lang=EN-US>realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>在同一个网段，不会执行</span><span
lang=EN-US>nat</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>转换，</span><span
lang=EN-US>realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>直接返回响应</span><span
lang=EN-US>,</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端也会拒收此报文。</span></p>

<h5><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>2.1.1.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>TUNNEL</span></h5>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_42"
 o:spid="_x0000_i1126" type="#_x0000_t75" alt="图2" style='width:369pt;height:353.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image003.gif" o:title="图2"/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l6 level1 lfo10'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端发起请求到</span><span
lang=EN-US>load balancer</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的虚拟</span><span
lang=EN-US>ip</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l6 level1 lfo10'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load banlancer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>把客户的请求包包裹，然后转发给其中的一个</span><span
lang=EN-US>real server</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>。</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l6 level1 lfo10'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>接受请求，解包。得到客户端发来的原始包。</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l6 level1 lfo10'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>处理，把结果通过</span><span lang=EN-US>vip</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>直接返回给客户端。</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l6 level1 lfo10'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端接受</span><span
lang=EN-US>real server</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的响应。</span>
</p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>注意：</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l8 level1 lfo11'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load balancer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>和</span><span lang=EN-US>realserver </span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>直接通过</span><span lang=EN-US>ip tunnel</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>技术重新封装、解包</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l8 level1 lfo11'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load balancer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>和</span><span lang=EN-US> realserver </span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>使用相同的</span><span lang=EN-US>vip</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l8 level1 lfo11'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load balnacer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>和</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>可以不再同一个网络</span></p>

<h5><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>2.1.1.2.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>DR</span></h5>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_82"
 o:spid="_x0000_i1125" type="#_x0000_t75" alt="图3" style='width:378pt;height:361.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image004.gif" o:title="图3"/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l12 level1 lfo13'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端发起请求到</span><span
lang=EN-US>load balancer</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的虚拟</span><span
lang=EN-US>ip</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l12 level1 lfo13'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load banlancer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>把客户发送的包，修改源</span><span lang=EN-US>mac</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>地址为</span><span lang=EN-US>vip</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的，目的</span><span lang=EN-US>mac</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>地址为</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的，然后发送给</span><span lang=EN-US>realserver</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l12 level1 lfo13'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>接受请求</span><span lang=EN-US>,</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>并处理，然后把结果通过</span><span lang=EN-US>vip</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>直接返回给客户端。</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l12 level1 lfo13'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端接受</span><span
lang=EN-US>real server</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的响应。</span>
</p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>注意</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l5 level1 lfo12'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load balancer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>和</span><span lang=EN-US> realserver </span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>使用相同的</span><span lang=EN-US>vip</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l5 level1 lfo12'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>load balancer</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>和</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>必须在同一个网络，因为</span><span lang=EN-US>load
balancer</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>需要知道</span><span
lang=EN-US>realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的</span><span
lang=EN-US>mac</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>地址。</span><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp; </span></span></p>

<h5><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>2.1.1.2.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>LVS-DR</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>工作原理详解</span><span lang=EN-US>
(51CTO)</span></h5>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;text-indent:6.0pt;mso-char-indent-count:.5;mso-pagination:
widow-orphan'><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>如下图所示：<span lang=EN-US>VS/DR</span>的体系结构：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center;mso-pagination:widow-orphan'><span lang=EN-US><a
href="http://images.51cto.com/files/uploadimg/20110822/095044558.jpg"
target="_blank"><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt;mso-no-proof:yes;text-decoration:none;text-underline:
none'><v:shape id="图片_x0020_101" o:spid="_x0000_i1124" type="#_x0000_t75"
 alt="LVS-DR工作原理"
 href="http://images.51cto.com/files/uploadimg/20110822/095044558.jpg"
 target="&quot;_blank&quot;" style='width:373.5pt;height:264pt;visibility:visible;
 mso-wrap-style:square' o:button="t">
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="lvs/image005.jpg" o:title="LVS-DR工作原理"/>
</v:shape></span></a></span><span lang=EN-US style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>我将结合这幅原理图及具体的实例来讲解一下<span
lang=EN-US>LVS-DR</span>的原理，包括数据包、数据帧的走向和转换过程。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>官方的原理说明：<span
lang=EN-US>Director</span>接收用户的请求，然后根据负载均衡算法选取一台<span lang=EN-US>realserver</span>，将包转发过去，最后由<span
lang=EN-US>realserver</span>直接回复给用户。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>实例场景设备清单：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center;mso-pagination:widow-orphan'><span lang=EN-US><a
href="http://images.51cto.com/files/uploadimg/20110525/1131531.png"
target="_blank"><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt;mso-no-proof:yes;text-decoration:none;text-underline:
none'><v:shape id="图片_x0020_100" o:spid="_x0000_i1123" type="#_x0000_t75"
 alt="实例场景设备清单"
 href="http://images.51cto.com/files/uploadimg/20110525/1131531.png"
 target="&quot;_blank&quot;" style='width:373.5pt;height:53.25pt;visibility:visible;
 mso-wrap-style:square' o:button="t">
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="lvs/image006.jpg" o:title="实例场景设备清单"/>
</v:shape></span></a></span><span lang=EN-US style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>说明：我这里为了方便，<span
lang=EN-US>client</span>是与<span lang=EN-US>vip</span>同一网段的机器。如果是外部的用户访问，将<span
lang=EN-US>client</span>替换成<span lang=EN-US>gateway</span>即可，因为<span
lang=EN-US>IP</span>包头是不变的，变的只是源<span lang=EN-US>mac</span>地址。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>①&nbsp;client</span><span style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>向目标<span lang=EN-US>vip</span>发出请求，<span
lang=EN-US>Director</span>接收。此时<span lang=EN-US>IP</span>包头及数据帧头信息如下：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center;mso-pagination:widow-orphan'><span lang=EN-US><a
href="http://images.51cto.com/files/uploadimg/20110525/1131532.png"
target="_blank"><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt;mso-no-proof:yes;text-decoration:none;text-underline:
none'><v:shape id="图片_x0020_99" o:spid="_x0000_i1122" type="#_x0000_t75" alt="client向目标vip发出请求"
 href="http://images.51cto.com/files/uploadimg/20110525/1131532.png"
 target="&quot;_blank&quot;" style='width:373.5pt;height:87.75pt;visibility:visible;
 mso-wrap-style:square' o:button="t">
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="lvs/image007.png" o:title="client向目标vip发出请求"/>
</v:shape></span></a></span><span lang=EN-US style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>② VS</span><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>根据负载均衡算法选择一台<span lang=EN-US>active</span>的<span
lang=EN-US>realserver(</span>假设是<span lang=EN-US>192.168.57.122)</span>，将此<span
lang=EN-US>RIP</span>所在网卡的<span lang=EN-US>mac</span>地址作为目标<span lang=EN-US>mac</span>地址，发送到局域网里。此时<span
lang=EN-US>IP</span>包头及数据帧头信息如下：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center;mso-pagination:widow-orphan'><span lang=EN-US><a
href="http://images.51cto.com/files/uploadimg/20110823/183324832.jpg"
target="_blank"><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt;mso-no-proof:yes;text-decoration:none;text-underline:
none'><v:shape id="图片_x0020_98" o:spid="_x0000_i1121" type="#_x0000_t75" alt="http://images.51cto.com/files/uploadimg/20110823/183324832.jpg"
 href="http://images.51cto.com/files/uploadimg/20110823/183324832.jpg"
 target="&quot;_blank&quot;" style='width:373.5pt;height:90.75pt;visibility:visible;
 mso-wrap-style:square' o:button="t">
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="lvs/image008.jpg" o:title="183324832"/>
</v:shape></span></a></span><span lang=EN-US style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>③&nbsp;realserver(192.168.57.122)</span><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>在局域网中收到这个帧，拆开后发现目标<span
lang=EN-US>IP(VIP)</span>与本地匹配，于是处理这个报文。随后重新封装报文，发送到局域网。此时<span lang=EN-US>IP</span>包头及数据帧头信息如下：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=center style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:center;mso-pagination:widow-orphan'><span lang=EN-US><a
href="http://images.51cto.com/files/uploadimg/20110823/183345470.jpg"
target="_blank"><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt;mso-no-proof:yes;text-decoration:none;text-underline:
none'><v:shape id="图片_x0020_97" o:spid="_x0000_i1120" type="#_x0000_t75" alt="http://images.51cto.com/files/uploadimg/20110823/183345470.jpg"
 href="http://images.51cto.com/files/uploadimg/20110823/183345470.jpg"
 target="&quot;_blank&quot;" style='width:373.5pt;height:90.75pt;visibility:visible;
 mso-wrap-style:square' o:button="t">
 <v:fill o:detectmouseclick="t"/>
 <v:imagedata src="lvs/image009.jpg" o:title="183345470"/>
</v:shape></span></a></span><span lang=EN-US style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;mso-pagination:widow-orphan'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>④&nbsp;</span><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>如果<span lang=EN-US>client</span>与<span lang=EN-US>VS</span>同一网段，那么<span
lang=EN-US>client(192.168.57.135)</span>将收到这个回复报文。如果跨了网段，那么报文通过<span
lang=EN-US>gateway/</span>路由器经由<span lang=EN-US>Internet</span>返回给用户。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span lang=EN-US style='font-size:
12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>说明：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal><span lang=EN-US>lvs</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>的作者对这个写了详细的描述，请参考</span><span lang=EN-US>
http://www.linuxvirtualserver.org/zh/lvs3.html LVS</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>集群中的</span><span lang=EN-US>IP</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>负载均衡技术</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<h4><![if !supportLists]><strong><span lang=EN-US style='font-family:"Cambria","serif";
mso-ascii-theme-font:major-latin;mso-fareast-font-family:Cambria;mso-fareast-theme-font:
major-latin;mso-hansi-theme-font:major-latin;mso-bidi-font-family:Cambria;
mso-bidi-theme-font:major-latin'><span style='mso-list:Ignore'>2.1.1.3<span
style='font:7.0pt "Times New Roman"'> </span></span></span></strong><![endif]><strong><span
style='mso-bidi-font-size:10.5pt;line-height:156%;font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin;
mso-bidi-font-family:"Times New Roman";mso-bidi-theme-font:major-bidi'>三种转发机制的优缺点</span></strong><strong><span
lang=EN-US style='font-family:"Cambria","serif";mso-ascii-theme-font:major-latin;
mso-hansi-theme-font:major-latin;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:major-bidi'><o:p></o:p></span></strong></h4>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span lang=EN-US style='font-size:
12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>◆<span lang=EN-US>Virtual Server via NAT</span></span></b><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>VS/NAT </span><span
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>的优点是服务器可以运行任何支持<span lang=EN-US>TCP/IP</span>的操作系统，它只需要一个<span lang=EN-US>IP</span>地址配置在<span
lang=EN-US>LVS</span>主机上，服务器组可以用私有的<span lang=EN-US>IP</span>地址。缺点是它的扩充能力有限，当服务器结点数目升到<span
lang=EN-US>20</span>时，<span lang=EN-US>LVS</span>主机本身有可能成为系统的新瓶颈，因为在<span
lang=EN-US>VS/NAT</span>中请求和响应封包都需要通过负载平衡<span lang=EN-US>LVS</span>主机。在<span
lang=EN-US> Pentium 166</span>主机上测得重写封包的平均延时为<span lang=EN-US>60us</span>，假设<span
lang=EN-US>TCP</span>封包的平均长度为<span lang=EN-US>536 Bytes</span>，则<span
lang=EN-US>LVS</span>主机的最大吞吐量为<span lang=EN-US>8.93 MBytes/s</span>。再假设每台服务器的吞吐量为<span
lang=EN-US>600KBytes/s</span>，这样一个<span lang=EN-US>LVS</span>主机可以带动<span
lang=EN-US>16</span>台服务器。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>◆<span lang=EN-US>Virtual Server via IP Tunneling</span></span></b><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>在<span lang=EN-US>VS/TUN </span>的集群系统中，负载平衡<span
lang=EN-US>LVS</span>主机只将请求分配到不同的实际服务器，实际服务器将应答的资料直接返回给用户。这样，负载平衡<span
lang=EN-US>LVS</span>主机就可以处理巨量的请求，而不会成为系统的瓶颈。即使负载平衡<span lang=EN-US>LVS</span>主机只有<span
lang=EN-US>100Mbps</span>的全双工网卡，虚拟服务器的最大吞吐量可以达到几<span lang=EN-US>Gbps</span>。所以，<span
lang=EN-US>VS/TUN</span>可以极大地增加负载平衡<span lang=EN-US>LVS</span>主机分配的服务器数量，它可以用来构建高性能超级服务器。<span
lang=EN-US>VS/TUN</span>技术对服务器的要求是所有的服务器必须支持<span lang=EN-US>&quot;IP
Tunneling&quot;</span>或者<span lang=EN-US>&quot;IP Encapsulation&quot;</span>协议。目前，<span
lang=EN-US>VS/TUN </span>的后端服务器主要运行<span lang=EN-US>Linux</span>操作系统。因为<span
lang=EN-US>&quot;IP Tunneling&quot;</span>正成为各个操作系统的标准协议，所以<span lang=EN-US>VS/TUN</span>也会适用运行其它操作系统的后端服务器。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>◆<span lang=EN-US>Virtual Server via Direct Routing</span></span></b><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>同<span lang=EN-US>VS/TUN </span>一样，<span lang=EN-US>VS/DRLVS</span>主机只处理客户到服务器端的连接，响应资料可以直接从独立的网络路由返回给客户。这可以极大地提高<span
lang=EN-US>LVS</span>集群系统的伸缩性。同<span lang=EN-US> VS/TUN</span>相比，这种方法没有<span
lang=EN-US>IP</span>隧道的开销，但是要求负载平衡<span lang=EN-US>LVS</span>主机与实际服务器都有一块网卡连在同一物理网段上，服务器网络设备或者设备别名不作<span
lang=EN-US> ARP </span>响应。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<h4><![if !supportLists]><strong><span lang=EN-US style='font-family:"Cambria","serif";
mso-ascii-theme-font:major-latin;mso-fareast-font-family:Cambria;mso-fareast-theme-font:
major-latin;mso-hansi-theme-font:major-latin;mso-bidi-font-family:Cambria;
mso-bidi-theme-font:major-latin'><span style='mso-list:Ignore'>2.1.1.4<span
style='font:7.0pt "Times New Roman"'> </span></span></span></strong><![endif]><strong><span
style='font-family:宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:
Cambria;mso-hansi-theme-font:major-latin;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:major-bidi'>结论</span></strong><strong><span lang=EN-US
style='font-family:"Cambria","serif";mso-ascii-theme-font:major-latin;
mso-hansi-theme-font:major-latin;mso-bidi-font-family:"Times New Roman";
mso-bidi-theme-font:major-bidi'><o:p></o:p></span></strong></h4>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:1184;mso-padding-alt:0cm 5.4pt 0cm 5.4pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td valign=top style='border:solid windowtext 1.0pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan'><b><span
  lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
  mso-font-kerning:0pt'><span style='mso-spacerun:yes'>&nbsp;</span></span></b><span
  lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
  mso-font-kerning:0pt'><o:p></o:p></span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan'><span
  lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
  mso-font-kerning:0pt'>VS/NAT<o:p></o:p></span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan'><span
  lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
  mso-font-kerning:0pt'>VS/TUN<o:p></o:p></span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;mso-pagination:widow-orphan'><span
  lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
  mso-font-kerning:0pt'>VS/DR<o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>服务器<span lang=EN-US>(OS)<o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>任意<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>支持隧道<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>多数<span lang=EN-US>(</span>支持<span lang=EN-US>Non-arp )<o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>服务器网络<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>私有网络<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>局域网<span lang=EN-US>/</span>广域网<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>局域网<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>服务器数目<span lang=EN-US>(100M</span>网络<span lang=EN-US>)<o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
  mso-font-kerning:0pt'>10~20<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
  mso-font-kerning:0pt'>100<o:p></o:p></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>多<span lang=EN-US>(100)<o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>服务器网关<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>负载均衡器<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>自己的路由<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>自己的路由<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;mso-yfti-lastrow:yes'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>效率<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>一般<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>高<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
  style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
  0pt'>最高<span lang=EN-US><o:p></o:p></span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=left style='mso-margin-top-alt:auto;mso-margin-bottom-alt:
auto;text-align:left;text-indent:24.0pt;mso-char-indent-count:2.0;mso-pagination:
widow-orphan'><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>三种<span lang=EN-US>IP</span>负载均衡技术中特别是后两种技术<span
lang=EN-US>VS/TUN</span>，<span lang=EN-US>VS/DR</span>极大地提高系统的伸缩性。</span><span
style='mso-bidi-font-size:10.5pt;color:#333333'> </span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>2.1.2<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>调度算法</h3>

<p class=MsoNormal align=left style='text-align:left;text-indent:24.0pt;
mso-char-indent-count:2.0;line-height:17.55pt;mso-pagination:widow-orphan;
background:white'><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>Director</span><span
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>在接收到来自于<span lang=EN-US>Client</span>的请求时，会基于<span lang=EN-US>&quot;schedule&quot;</span>从<span
lang=EN-US>RealServer</span>中选择一个响应给<span lang=EN-US>Client</span>。<span
lang=EN-US>ipvs</span>支持以下调度算法：（<span lang=EN-US>1</span>、<span lang=EN-US>2</span>为静态调度算法，<span
lang=EN-US>3</span>、<span lang=EN-US>4</span>、<span lang=EN-US>5</span>、<span
lang=EN-US>6</span>、<span lang=EN-US>7</span>、<span lang=EN-US>8</span>为动态调度算法）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoListParagraph align=left style='margin-left:18.0pt;text-align:left;
text-indent:-18.0pt;mso-char-indent-count:0;line-height:17.55pt;mso-pagination:
widow-orphan;mso-list:l17 level1 lfo16;background:white'><![if !supportLists]><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><span style='mso-list:Ignore'>1、</span></span><![endif]><span
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>轮询（<span lang=EN-US>round robin, rr)<o:p></o:p></span></span></p>

<p class=MsoListParagraph align=left style='margin-left:25.1pt;text-align:left;
text-indent:-18.0pt;mso-char-indent-count:0;line-height:17.55pt;mso-pagination:
widow-orphan;mso-list:l0 level1 lfo17;background:white'><![if !supportLists]><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><span style='mso-list:Ignore'>2．</span></span><![endif]><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'> </span><span style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>加权轮询<span lang=EN-US>(Weighted
round robin, wrr)</span>——<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>新的连接请求被轮流分配至各<span
lang=EN-US>RealServer</span>；算法的优点是其简洁性，它无需记录当前所有连接的状态，所以它是一种无状态调度。轮叫调度算法假设所有服务器处理性能均相同，不管服务器的当前连接数和响应速度。该算法相对简单，不适用于服务器组中处理性能不一的情况，而且当请求服务时间变化比较大时，轮叫调度算法容易导致服务器间的负载不平衡。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>2</span><span style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>、目标地址散列调度（<span lang=EN-US>Destination
Hashing</span>，<span lang=EN-US>dh</span>）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>算 法也是针对目标<span
lang=EN-US>IP</span>地址的负载均衡，但它是一种静态映射算法，通过一个散列（<span lang=EN-US>Hash</span>）函数将一个目标<span
lang=EN-US>IP</span>地址映射到一台服务器。目标地址散列调度算法先 根据请求的目标<span lang=EN-US>IP</span>地址，作为散列键（<span
lang=EN-US>Hash Key</span>）从静态分配的散列表找出对应的服务器，若该服务器是可用的且未超载，将请求发送到该服务器，否则返回空。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:9.0pt;font-family:宋体;mso-bidi-font-family:宋体;
color:#555555;mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'>3</span><span style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>、源地址散列调度（<span lang=EN-US>Source
Hashing</span>，<span lang=EN-US>sh</span>）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>算 法正好与目标地址散列调度算法相反，它根据请求的源<span
lang=EN-US>IP</span>地址，作为散列键（<span lang=EN-US>Hash Key</span>）从静态分配的散列表找出对应的服务器，若该服务器是可用的且未超载，将请求发送到该服务器，否则返回空。它采用的散列函数与目标地址散列调度算法
的相同。除了将请求的目标<span lang=EN-US>IP</span>地址换成请求的源<span lang=EN-US>IP</span>地址外，它的算法流程与目标地址散列调度算法的基本相似。在实际应用中，源地址散列调度和目标地址散列
调度可以结合使用在防火墙集群中，它们可以保证整个系统的唯一出入口。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;mso-pagination:widow-orphan'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;
mso-font-kerning:0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>4</span><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>、最少连接<span lang=EN-US>(least connected, lc)</span>， 加权最少连接<span
lang=EN-US>(weighted least connection, wlc)</span>——<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>新的连接请求将被分配至当前连接数最少的<span
lang=EN-US>RealServer</span>；最小连接调度是一种动态调度算法，它通过服务器当前所活跃的连接数来估计服务器的负载情况。调度器需要记录各个服务器已建立连接的数目，当一个请求被调度到某台服务器，其连接数加<span
lang=EN-US>1</span>；当连接中止或超时，其连接数减一。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>lc</span><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>：<span lang=EN-US>256*A+I=</span>当前连接数<span
lang=EN-US>&nbsp; wlc</span>：（<span lang=EN-US>256*A+I</span>）<span lang=EN-US>/W=</span>当前连接数<span
lang=EN-US>&nbsp;&nbsp; </span>【<span lang=EN-US>A</span>：活动连接数<span
lang=EN-US>&nbsp; I:</span>非活动连接数<span lang=EN-US> W</span>：权重值】<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>5</span><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>、基于局部性的最少链接调度（<span lang=EN-US>Locality-Based Least
Connections Scheduling</span>，<span lang=EN-US>lblc</span>）——<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>针对请求报文的目标<span
lang=EN-US>IP</span>地址的负载均衡调度，目前主要用于<span lang=EN-US>Cache</span>集群系统，因为在<span
lang=EN-US>Cache</span>集群中客户请求报文的目标<span lang=EN-US>IP</span>地址是变化的。这里假设任何后端服务器都可以处理任一请求，算法的设计目标是在服务器的负载基本平衡情况下，将相同目标<span
lang=EN-US>IP</span>地址的请求调度到同一台服务器，来提高各台服务器的访问局部性和主存<span lang=EN-US>Cache</span>命中率，从而整个集群系统的处理能力。<span
lang=EN-US>LBLC</span>调度算法先根据请求的目标<span lang=EN-US>IP</span>地址找出该目标<span
lang=EN-US>IP</span>地址最近使用的服务器，若该服务器是可用的且没有超载，将请求发送到该服务器；若服务器不存在，或者该服务器超载且有服务器处于其一半的工作负载，则用“最少链接”的原则选出一个可用的服务器，将请求发送到该服务器。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>6</span><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>、带复制的基于局部性最少链接调度（<span lang=EN-US>Locality-Based Least
Connections with Replication Scheduling</span>，<span lang=EN-US>lblcr</span>）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>——也是针对目标<span
lang=EN-US>IP</span>地址的负载均衡，目前主要用于<span lang=EN-US>Cache</span>集群系统。它与<span
lang=EN-US>LBLC</span>算法的不同之处是它要维护从一个目标<span lang=EN-US>IP</span>地址到一组服务器的映射，而<span
lang=EN-US> LBLC</span>算法维护从一个目标<span lang=EN-US>IP</span>地址到一台服务器的映射。对于一个“热门”站点的服务请求，一台<span
lang=EN-US>Cache </span>服务器可能会忙不过来处理这些请求。这时，<span lang=EN-US>LBLC</span>调度算法会从所有的<span
lang=EN-US>Cache</span>服务器中按“最小连接”原则选出一台<span lang=EN-US>Cache</span>服务器，映射该“热门”站点到这台<span
lang=EN-US>Cache</span>服务器，很快这台<span lang=EN-US>Cache</span>服务器也会超载，就会重复上述过程选出新的<span
lang=EN-US>Cache</span>服务器。这样，可能会导致该“热门”站点的映像会出现在所有的<span lang=EN-US>Cache</span>服务器上，降低了<span
lang=EN-US>Cache</span>服务器的使用效率。<span lang=EN-US>LBLCR</span>调度算法将“热门”站点映射到一组<span
lang=EN-US>Cache</span>服务器（服务器集合），当该“热门”站点的请求负载增加时，会增加集合里的<span lang=EN-US>Cache</span>服务器，来处理不断增长的负载；当该“热门”站点的请求负载降低时，会减少集合里的<span
lang=EN-US>Cache</span>服务器数目。这样，该“热门”站点的映像不太可能出现在所有的<span lang=EN-US>Cache</span>服务器上，从而提供<span
lang=EN-US>Cache</span>集群系统的使用效率。<span lang=EN-US>LBLCR</span>算法先根据请求的目标<span
lang=EN-US>IP</span>地址找出该目标<span lang=EN-US>IP</span>地址对应的服务器组；按“最小连接”原则从该服务器组中选出一台服务器，若服务器没有超载，将请求发送到该服务器；若服务器超载；则按“最小连接”原则从整个集群中选出一台服务器，将该服务器加入到服务器组中，将请求发送到该服务器。同时，当该服务器组有一段时间没有被修改，将最忙的服务器从服务器组中删除，以降低复制的程度。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>7</span><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>、 最短的期望的延迟（<span lang=EN-US>Shortest Expected Delay
Scheduling ,sed</span>）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>sed: (A+1)/w=</span><span style='font-size:12.0pt;font-family:宋体;
mso-bidi-font-family:宋体;mso-font-kerning:0pt'>当前连接数<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:
0pt'>8</span><span style='font-size:12.0pt;font-family:宋体;mso-bidi-font-family:
宋体;mso-font-kerning:0pt'>、最少队列调度（<span lang=EN-US>Never Queue Scheduling ,nq</span>）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>无需队列。如果有台<span
lang=EN-US>realserver</span>的连接数＝<span lang=EN-US>0</span>就直接分配过去，不需要在进行<span
lang=EN-US>sed</span>运算<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>四、关于<span
lang=EN-US>LVS</span>追踪标记<span lang=EN-US>fwmark<o:p></o:p></span></span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:17.55pt;
mso-pagination:widow-orphan;background:white'><span style='font-size:12.0pt;
font-family:宋体;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>如果<span
lang=EN-US>LVS</span>放置于多防火墙的网络中，并且每个防火墙都用到了状态追踪的机制，那么在回应一个针对于<span lang=EN-US>LVS</span>的连接请求时必须经过此请求连接进来时的防火墙，否则，这个响应的数据包将会被丢弃<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p style='line-height:19.2pt'><b style='mso-bidi-font-weight:normal'><span
style='mso-ascii-font-family:宋体;mso-ascii-theme-font:minor-fareast;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:宋体;mso-hansi-theme-font:
minor-fareast'>说明：作者写了详细的调度算法优缺点可以查看<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.linuxvirtualserver.org/zh/lvs4.html"><span style='font-size:
12.0pt;font-family:宋体;mso-ascii-theme-font:minor-fareast;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-theme-font:minor-fareast'>http://www.linuxvirtualserver.org/zh/lvs4.html</span></a></span><span
class=MsoHyperlink><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
mso-ascii-theme-font:minor-fareast;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp; </span>LVS</span></span><span
class=MsoHyperlink><span style='font-size:12.0pt;font-family:宋体;mso-ascii-theme-font:
minor-fareast;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-theme-font:minor-fareast'>集群的负载调度 </span></span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-ascii-theme-font:minor-fareast;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-theme-font:
minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h1><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>LVS</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>配置篇</span></h1>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>LVS</span><span
style='font-family:宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:
Cambria;mso-hansi-theme-font:major-latin'>安装</span> </h2>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'><span
style='mso-spacerun:yes'>&nbsp;</span></span><span lang=EN-US style='mso-ascii-font-family:
宋体;mso-ascii-theme-font:minor-fareast;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:宋体;mso-hansi-theme-font:minor-fareast;
color:#555555'><span style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span
style='mso-ascii-font-family:宋体;mso-ascii-theme-font:minor-fareast;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:宋体;mso-hansi-theme-font:
minor-fareast'>从<span lang=EN-US>Linux</span>内核版本<span lang=EN-US>2.6</span>起，<span
lang=EN-US>ip_vs code</span>已经被整合进了内核中，因此，只要在编译内核的时候选择了<span lang=EN-US>ipvs</span>的功能，您的<span
lang=EN-US>Linux</span>即能支持<span lang=EN-US>LVS</span>。<span lang=EN-US>Linux
2.4.23</span>以后的内核版本也整合了<span lang=EN-US>ip_vs code</span>，但如果是更旧的内核版本，您得自己手动将<span
lang=EN-US>ip_vs code</span>整合进内核原码中，并重新编译内核方可使用<span lang=EN-US>lvs</span>。 <span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:24.0pt;mso-char-indent-count:2.0'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;mso-ascii-theme-font:minor-fareast;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-theme-font:
minor-fareast'>ipvsadm</span><span style='font-size:12.0pt;font-family:宋体;
mso-ascii-theme-font:minor-fareast;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-theme-font:minor-fareast'>是用来与<span lang=EN-US>ipvs</span>交互的命令行工具，它</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-theme-font:minor-fareast;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-theme-font:
minor-fareast;mso-bidi-font-family:宋体;mso-font-kerning:0pt'>的作用表</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-theme-font:minor-fareast;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-theme-font:
minor-fareast'>现在：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
mso-ascii-theme-font:minor-fareast;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-theme-font:minor-fareast'>1</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-theme-font:minor-fareast;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-theme-font:
minor-fareast'>、定义在<span lang=EN-US>Director</span>上进行<span lang=EN-US>dispatching</span>的服务<span
lang=EN-US>(service)</span>，以及哪此服务器<span lang=EN-US>(server)</span>用来提供此服务；<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
mso-ascii-theme-font:minor-fareast;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-theme-font:minor-fareast'>2</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-theme-font:minor-fareast;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-theme-font:
minor-fareast'>、为每台同时提供某一种服务的服务器定义其权重（即概据服务器性能确定的其承担负载的能力） <span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo1'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>查看版本</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1119" type="#_x0000_t75"
 style='width:415.5pt;height:87pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image010.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo1'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>内核是否支持</span><span
lang=EN-US>ipvs</span></p>

<p class=MsoNormal><span lang=EN-US>modprobe -l |grep ipvs</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>表明系统内核已经默认支持了</span><span
lang=EN-US>IPVS</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>模块。接着就可以安装</span><span
lang=EN-US>IPVS</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>管理软件了</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_50"
 o:spid="_x0000_i1118" type="#_x0000_t75" style='width:294.75pt;height:159pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image011.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l4 level1 lfo1'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>安装</span><span
lang=EN-US>ipvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的管理软件</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><b style='mso-bidi-font-weight:normal'><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>直接通过软件库安装</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US>centos</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_66" o:spid="_x0000_i1117"
 type="#_x0000_t75" style='width:222pt;height:21.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image012.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US>suse</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1116" type="#_x0000_t75"
 style='width:161.25pt;height:26.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image013.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><b style='mso-bidi-font-weight:normal'><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>基于源代码构建</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1115" type="#_x0000_t75"
 style='width:415.5pt;height:13.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image014.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1114" type="#_x0000_t75"
 style='width:294.75pt;height:58.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image015.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1113" type="#_x0000_t75"
 style='width:414.75pt;height:240pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image016.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>需要安装</span></p>

<pre style='background:#F9F9FF'><span lang=EN-US style='color:black'>please install the development package for popt which should<o:p></o:p></span></pre><pre
style='background:#F9F9FF'><span lang=EN-US style='color:black'>give you popt.h. </span></pre>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1112"
 type="#_x0000_t75" style='width:306.75pt;height:24.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image017.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><b style='mso-bidi-font-weight:normal'><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>基于</span><span lang=EN-US>rpm</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>包构建</span><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1111" type="#_x0000_t75"
 style='width:414.75pt;height:49.5pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image018.png" o:title=""/>
</v:shape></span></p>

<p style='margin-top:4.8pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
0cm;line-height:14.25pt;background:white'><span lang=EN-US style='font-size:
10.0pt;font-family:"Arial","sans-serif";color:black'>Then, we can build the
ipvsadm-1.24 rpm in the following command:<o:p></o:p></span></p>

<div style='mso-element:para-border-div;border:solid #2F6FAB 1.0pt;mso-border-alt:
solid #2F6FAB .75pt;padding:12.0pt 12.0pt 12.0pt 12.0pt;background:#F9F9F9'><pre
style='line-height:13.2pt;background:#F9F9F9;border:none;mso-border-alt:solid #2F6FAB .75pt;
padding:0cm;mso-padding-alt:12.0pt 12.0pt 12.0pt 12.0pt'><span lang=EN-US
style='color:black'>rpmbuild --rebuild ipvsadm-1.24-6.src.rpm<o:p></o:p></span></pre></div>

<p style='margin-top:4.8pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
0cm;line-height:14.25pt;background:white'><span lang=EN-US style='font-size:
10.0pt;font-family:"Arial","sans-serif";color:black'>And install using: rpm
-ivh /usr/src/redhat/RPMS/i386/ipvsadm-1.24-6.i386.rpm<o:p></o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1110" type="#_x0000_t75"
 style='width:327.75pt;height:81pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image019.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><b style='mso-bidi-font-weight:normal'><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>验证</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_72" o:spid="_x0000_i1109"
 type="#_x0000_t75" style='width:327.75pt;height:28.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image020.png" o:title=""/>
</v:shape></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>命令手册</span></h2>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>操作虚拟服务</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--add-service<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;
</span>-A<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>add
virtual service with options</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--edit-service<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>-E<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>edit
virtual service with options</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--delete-service<span style='mso-spacerun:yes'>&nbsp; </span>-D<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>delete virtual service</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>操作</span><span
lang=EN-US>realserver</span></p>

<p class=MsoNormal><span lang=EN-US>--add-server<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-a<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>add
real server with options</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--edit-server<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;
</span>-e<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>edit
real server with options</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--delete-server<span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span>-d<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>delete real server</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>配置操作</span></p>

<p class=MsoNormal><span lang=EN-US>--list<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-L|-l<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span>list
the table</span></p>

<p class=MsoNormal><span lang=EN-US>--clear<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-C<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>clear the whole table</span></p>

<p class=MsoNormal><span lang=EN-US>--restore<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-R<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>restore rules from stdin</span></p>

<p class=MsoNormal><span lang=EN-US>--save<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-S<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>save
rules to stdout</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>配置选项</span></p>

<p class=MsoNormal><span lang=EN-US>Options:</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--tcp-service<span style='mso-spacerun:yes'>&nbsp; </span>-t
service-address<span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span>service-address is host[:port]</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--udp-service<span style='mso-spacerun:yes'>&nbsp; </span>-u
service-address<span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span>service-address is host[:port]</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--fwmark-service<span style='mso-spacerun:yes'>&nbsp; </span>-f
fwmark<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>fwmark is an integer greater than zero</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--ipv6<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-6<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>fwmark
entry uses IPv6</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>调度方式</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--scheduler<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>-s
scheduler<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>one of rr|wrr|lc|wlc|lblc|lblcr|dh|sh|sed|nq,</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>the default scheduler is wlc.</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--pe<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>engine<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>alternate persistence engine may be sip,</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>not set by default.</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>#session</span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>保持，保证客户端都发到同一个</span><span lang=EN-US>server</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>上。</span><span lang=EN-US>-p</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>指定多长时间。不指定时间，默认</span><span
lang=EN-US>300</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>秒</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--persistent<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>-p
[timeout]<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>persistent service<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>掩码，不同</span><span lang=EN-US>ip</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>地址和掩码与得到的网络地址，启用一个网络地址，对应一个</span><span
lang=EN-US>realserver</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--netmask<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-M netmask<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>persistent granularity mask</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--real-server<span style='mso-spacerun:yes'>&nbsp; </span>-r
server-address<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>server-address is host (and port)</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>转发模式</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--gatewaying<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>-g<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>gatewaying (direct routing) (default)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--ipip<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-i<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;</span>ipip
encapsulation (tunneling)</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--masquerading -m<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>masquerading (NAT)</span></p>

<p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>负载的比例</span><span lang=EN-US>,</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>默认值</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>，越大负载越高</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--weight<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-w
weight<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>capacity of real server</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--u-threshold<span style='mso-spacerun:yes'>&nbsp; </span>-x
uthreshold<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>upper threshold of connections</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span>--l-threshold<span style='mso-spacerun:yes'>&nbsp; </span>-y
lthreshold<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>lower threshold of connections</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>常用命令</span></h2>

<p class=MsoNormal><span lang=EN-US>1</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>查看配置</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_85"
 o:spid="_x0000_i1108" type="#_x0000_t75" style='width:383.25pt;height:88.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image021.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>2</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>保存配置到文件</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -S &gt;lvs.cfg </span></p>

<p class=MsoNormal><span lang=EN-US>3</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>加载配置</span></p>

<p class=MsoNormal><span lang=EN-US>cat lvs.cfg |ipvsadm –R<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>或者</span><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp; </span>ipvsadm –R &lt; lvs.cfg</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>4</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>查看连接</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm<span
style='mso-spacerun:yes'>&nbsp; </span>-lcn </span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:-105.0pt;mso-char-indent-count:
-10.0'><span lang=EN-US>Prot LocalAddress:Port Conns InPkts OutPkts InBytes
OutBytes</span></p>

<p class=MsoNormal style='margin-left:105.0pt;text-indent:-105.0pt;mso-char-indent-count:
-10.0'><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>连接数</span> <span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>输入包</span> <span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>输出包</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>输入流量</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>输出流量</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>5</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>连接清零</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm –Z</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>6. </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>启动</span><span lang=EN-US>ipvsadm</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>配置之后实时生效，但是重启清空，所以需要开机加载</span></p>

<p class=MsoNormal><span lang=EN-US>service ipvsadm<span
style='mso-spacerun:yes'>&nbsp; </span>start<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>加载配置文件</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>7. </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>保存配置</span></p>

<p class=MsoNormal><span lang=EN-US>service ipvsadm save<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>保存到配置文件中</span></p>

<p class=MsoNormal><span lang=EN-US>8. </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>停止服务</span></p>

<p class=MsoNormal><span lang=EN-US>service ipvsadm stop<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>清空配置，不会清空配置文件</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US>9. </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>示例</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_11"
 o:spid="_x0000_i1107" type="#_x0000_t75" style='width:414.75pt;height:141.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image022.png" o:title=""/>
</v:shape></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>LVS</span><span
style='font-family:宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:
Cambria;mso-hansi-theme-font:major-latin'>配置和分析</span></h2>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1106"
 type="#_x0000_t75" style='width:390pt;height:65.25pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image023.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1105"
 type="#_x0000_t75" style='width:342pt;height:40.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image024.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1104"
 type="#_x0000_t75" style='width:276pt;height:42.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image025.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>所有的负载均衡器配置路由转发功能</span></p>

<p class=MsoNormal><span lang=EN-US>echo 1&nbsp;&gt; /proc/sys/net/ipv4/ip_forward&nbsp;
#</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>开启服务器路由转发</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.4.1<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span>NAT</span>配置</h3>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
lang=EN-US>NAT</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>服务可以使用单网卡或者双网卡模式，双网卡模式和单网卡模式配置上没有区别，主要区别在于增加的一块网卡，还是前面放一个路由器。但是负载均衡器</span><span
lang=EN-US>nat</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>方式要求客户端从外网访问，因为如果客户端从内网访问，</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>会变成</span><span
lang=EN-US>dr</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>模式。</span><span
lang=EN-US>vip</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>地址可以使用本机实际</span><span
lang=EN-US>Ip</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>或者使用独立的虚拟</span><span
lang=EN-US>Ip</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>地址。</span>
</p>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>双网卡模式</span><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>一般需要双网卡，一个网卡配置外网，另一个配置内网。功效类似</span><span
lang=EN-US>nat</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>转发的路由器。</span></p>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>单网卡模式</span><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:21.0pt;mso-char-indent-count:2.0'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>前端需要路由器支持，然后路由器转发请求到负载均衡服务器上。这样的话至少需要申请两个外网</span><span
lang=EN-US>ip</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>地址。一个分配给路由器，另一个提供给负载均衡器。</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>当然也可以通过真正路由器转发到内网，</span><span
lang=EN-US>nat</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>只需要配置一个内网地址就可以了。</span>
</p>

<p class=MsoNormal><span lang=EN-US>nat</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>转换，</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>需要把数据包返回给负载均衡服务器，所以负载均衡服务器是一个网关。</span></p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4.1.1<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:宋体;
mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:Cambria;
mso-hansi-theme-font:major-latin'>负载均衡器配置</span></h4>

<p class=MsoNormal><span lang=EN-US>1</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>开启服务器路由转发</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>echo 1&nbsp;&gt;
/proc/sys/net/ipv4/ip_forward&nbsp; <span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span></span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>（实时生效</span><span lang=EN-US>,</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>临时配置）</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>或者</span> <span lang=EN-US>vi
/etc/sysctl.conf </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span># Controls IP packet forwarding</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>net.ipv4.ip_forward
= 0 </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>此配置永久生效，但是需要重启网卡</span> <span lang=EN-US>service
network restart</span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>注意</span><span lang=EN-US>:<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>必须配置转发功能，否则工作不正常，或者数据很慢。</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US>2</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span> <span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>设置服务虚地址</span> </p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_64"
 o:spid="_x0000_i1103" type="#_x0000_t75" style='width:404.25pt;height:18pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image026.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US>-A<span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>添加</span>
</p>

<p class=MsoNormal><span lang=EN-US>-t<span style='mso-spacerun:yes'>&nbsp;
</span>ip</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>地址</span><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>虚拟地址和端口</span></p>

<p class=MsoNormal><span lang=EN-US>-s<span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>负载均衡模式</span><span
lang=EN-US> rr</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>（轮询模式）</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>重新设置调度算法</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_58"
 o:spid="_x0000_i1102" type="#_x0000_t75" style='width:379.5pt;height:32.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image027.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4.1.2<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>添加后端服务器</span></h4>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1101"
 type="#_x0000_t75" style='width:415.5pt;height:103.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image028.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>-a<span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>添加一个</span><span
lang=EN-US>realserver</span></p>

<p class=MsoNormal><span lang=EN-US>-t<span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>支持</span><span
lang=EN-US>tcp</span></p>

<p class=MsoNormal><span lang=EN-US>-r<span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>代表一个</span><span
lang=EN-US>realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的</span><span
lang=EN-US>ip:port</span></p>

<p class=MsoNormal><span lang=EN-US>-m<span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>代表通过</span><span
lang=EN-US>nat</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>协议转发</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4.1.3<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:宋体;
mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:Cambria;
mso-hansi-theme-font:major-latin'>举例</span></h4>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>例如</span><span
lang=EN-US>ipp</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>模拟端</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端访问</span></p>

<p class=MsoNormal><span lang=EN-US>192.168.1.75:81/idemo/mcht/index.html </span></p>

<p class=MsoNormal><span lang=EN-US>192.168.1.100 192.168.1.76</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>提供服务</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>机器配置</span></p>

<p class=MsoNormal><span lang=EN-US>Director:</span></p>

<p class=MsoNormal><span lang=EN-US>IP<span style='mso-spacerun:yes'>&nbsp;
</span>192.168.1.75</span></p>

<p class=MsoNormal><span lang=EN-US>mac </span></p>

<p class=MsoNormal><span lang=EN-US>vip </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>使用本机地址</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>eth0<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Link
encap:Ethernet<span style='mso-spacerun:yes'>&nbsp; </span>HWaddr
00:0C:29:99:1A:59<span style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>inet addr:192.168.1.75<span style='mso-spacerun:yes'>&nbsp;
</span>Bcast:192.168.1.255<span style='mso-spacerun:yes'>&nbsp;
</span>Mask:255.255.255.0</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US>Real server</span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l7 level1 lfo18'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>IP:192.168.1.76</span></p>

<p class=MsoNormal><span lang=EN-US>eth0 mac: 00:0C:29:66:56:A4<span
style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt;
mso-char-indent-count:0;mso-list:l7 level1 lfo18'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>IP:192.168.1.100</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>配置如下</span><span
lang=EN-US>:</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>负载均衡器</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>echo 1&nbsp;&gt;
/proc/sys/net/ipv4/ip_forward</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm<span
style='mso-spacerun:yes'>&nbsp; </span>-C</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm<span
style='mso-spacerun:yes'>&nbsp; </span>-A<span style='mso-spacerun:yes'>&nbsp;
</span>-t 192.168.1.75:81 -s rr</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -a -t 192.168.1.75:81<span
style='mso-spacerun:yes'>&nbsp; </span>-r 192.168.1.100:8080 -m</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -a -t 192.168.1.75:81<span
style='mso-spacerun:yes'>&nbsp; </span>-r 192.168.1.76:8080 -m</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span lang=EN-US>realserver<o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>route add -net 192.168.255.0 netmask
255.255.255.0 gw 192.168.1.75</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>说明：</span></p>

<p class=MsoNormal><span lang=EN-US>realserver</span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>需要把这个响应发到负载均衡器上，所以添加静态路由</span></p>

<p class=MsoNormal><span lang=EN-US>route add -net 192.168.255.0 netmask
255.255.255.0 gw 192.168.1.75</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>或者</span><span
lang=EN-US>realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>上的默认网关就是</span><span
lang=EN-US>192.168.1.75</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，推荐这种方式。</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.4.2<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US>NAT</span>抓包<a name="_GoBack"></a>分析</h3>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>下面从数据包角度，看其工作机制</span></p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4.2.1<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span lang=EN-US>load balancer</span><span
style='font-family:宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:
Cambria;mso-hansi-theme-font:major-latin'>转发</span></h4>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>192</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span><span lang=EN-US>168</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>．</span><span lang=EN-US>255</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>．</span><span lang=EN-US>102</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>发送请求报文</span><span lang=EN-US>192.168.1.75</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的报文</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1100"
 type="#_x0000_t75" style='width:415.5pt;height:115.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image029.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US>nat</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>转换，把目标地址转换为</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的地址</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_39"
 o:spid="_x0000_i1099" type="#_x0000_t75" style='width:415.5pt;height:114pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image030.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span></span></p>

<p class=MsoNormal><span lang=EN-US>realserver</span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>响应报文，返回给</span><span lang=EN-US>102,</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>通过网关的。</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1098"
 type="#_x0000_t75" style='width:415.5pt;height:177pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image031.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>网关进行转换</span>
<span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>把源地址改成网关地址。</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_44"
 o:spid="_x0000_i1097" type="#_x0000_t75" style='width:414.75pt;height:144.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image032.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4.2.2<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>realserver </span><span style='font-family:
宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:Cambria;
mso-hansi-theme-font:major-latin'>上抓包</span></h4>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>76</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>接收</span><span lang=EN-US>102</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的请求，请求是透明，</span><span lang=EN-US>76</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>不知道网关存在。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_67"
 o:spid="_x0000_i1096" type="#_x0000_t75" style='width:415.5pt;height:162.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image033.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>76</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>把响应报文回传给</span><span lang=EN-US>102</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>，也是透明的。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_47"
 o:spid="_x0000_i1095" type="#_x0000_t75" style='width:415.5pt;height:177.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image034.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4.2.3<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>client</span></h4>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端</span><span
lang=EN-US>255.102</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>发起请求到</span><span
lang=EN-US>1.75</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_102"
 o:spid="_x0000_i1094" type="#_x0000_t75" style='width:414.75pt;height:168.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image035.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US>192</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>．</span><span lang=EN-US>168</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>．</span><span lang=EN-US>1</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>．</span><span lang=EN-US>75</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>响应报文到</span><span lang=EN-US>255.102</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_103"
 o:spid="_x0000_i1093" type="#_x0000_t75" style='width:414.75pt;height:150.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image036.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>LVS</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>命令</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_61"
 o:spid="_x0000_i1092" type="#_x0000_t75" style='width:415.5pt;height:118.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image037.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_49"
 o:spid="_x0000_i1091" type="#_x0000_t75" style='width:415.5pt;height:390pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image038.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_40"
 o:spid="_x0000_i1090" type="#_x0000_t75" style='width:415.5pt;height:292.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image039.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>交替</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_52"
 o:spid="_x0000_i1089" type="#_x0000_t75" style='width:415.5pt;height:237pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image040.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>没有监听还在等</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_55"
 o:spid="_x0000_i1088" type="#_x0000_t75" style='width:415.5pt;height:223.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image041.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_43"
 o:spid="_x0000_i1087" type="#_x0000_t75" style='width:415.5pt;height:306.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image042.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_46"
 o:spid="_x0000_i1086" type="#_x0000_t75" style='width:415.5pt;height:264pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image043.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.4.3<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span>IP</span>隧道</h3>

<p class=MsoNormal style='text-indent:15.75pt;mso-char-indent-count:1.5'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>几台机器必须使用相同的</span><span lang=EN-US>vip</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>和端口，对源请求再次封装，转发到实际的服务器上，服务器直接返回给客户端。</span>
</p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4.3.1<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>配置</span></h4>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>负载均衡器</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -C</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm<span
style='mso-spacerun:yes'>&nbsp; </span>-A<span style='mso-spacerun:yes'>&nbsp;
</span>-t 192.168.1.240:8080 -s rr</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -a -t 192.168.1.240:8080<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>-r 192.168.1.76:8080 -i</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -a -t 192.168.1.240:8080 <span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span>-r 192.168.1.100:8080 -i</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>ifconfig tunl0 192.168.1.240<span
style='mso-spacerun:yes'>&nbsp; </span>netmask 255.255.255.0<span
style='mso-spacerun:yes'>&nbsp; </span>broadcast 192.168.1.255</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span lang=EN-US>realserver</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>配置</span><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>ifconfig tunl0 192.168.1.240<span
style='mso-spacerun:yes'>&nbsp; </span>netmask 255.255.255.0<span
style='mso-spacerun:yes'>&nbsp; </span>broadcast 192.168.1.255</span></p>

<p class=MsoNormal><span lang=EN-US>realserver </span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>防止发送和响应本机虚拟</span><span lang=EN-US>ip</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的</span><span lang=EN-US>arp</span></p>

<p class=MsoNormal><span lang=EN-US>echo &quot;1&quot; &gt;
/proc/sys/net/ipv4/conf/all/arp_ignore</span></p>

<p class=MsoNormal><span lang=EN-US>echo &quot;1&quot; &gt;
/proc/sys/net/ipv4/conf/lo/arp_ignore</span></p>

<p class=MsoNormal><span lang=EN-US>echo &quot;2&quot; &gt; /proc/sys/net/ipv4/conf/lo/arp_announce</span></p>

<p class=MsoNormal><span lang=EN-US>echo &quot;2&quot; &gt;
/proc/sys/net/ipv4/conf/all/arp_announce</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>配置之后</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的</span><span lang=EN-US>mac</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>地址相同。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_88"
 o:spid="_x0000_i1085" type="#_x0000_t75" style='width:319.5pt;height:26.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image044.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_89"
 o:spid="_x0000_i1084" type="#_x0000_t75" style='width:348pt;height:22.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image045.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.4.4<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span>IP</span>隧道抓包分析</h3>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>访问</span><span
lang=EN-US>vip</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_90"
 o:spid="_x0000_i1083" type="#_x0000_t75" style='width:399.75pt;height:267pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image046.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin;
mso-no-proof:yes'>查看连接</span><span lang=EN-US style='mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_91"
 o:spid="_x0000_i1082" type="#_x0000_t75" style='width:414.75pt;height:78.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image047.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>负载均衡器把</span><span
lang=EN-US>163</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的请求报文，转到</span><span
lang=EN-US>realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>上</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_92"
 o:spid="_x0000_i1081" type="#_x0000_t75" style='width:415.5pt;height:169.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image048.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端响应报文</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_93"
 o:spid="_x0000_i1080" type="#_x0000_t75" style='width:415.5pt;height:145.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image049.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_84"
 o:spid="_x0000_i1079" type="#_x0000_t75" style='width:415.5pt;height:111.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image050.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户机请求报文和接受报文的情况</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_2"
 o:spid="_x0000_i1078" type="#_x0000_t75" style='width:414.75pt;height:165pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image051.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>三次握手</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1077"
 type="#_x0000_t75" style='width:414.75pt;height:60pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image052.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h4><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.4.4.1<span style='font:7.0pt "Times New Roman"'>
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>错误配置</span></h4>

<h5><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>3.4.4.1.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>端口配置不同，错误</span></h5>

<p class=MsoNormal><span lang=EN-US>ipvsadm<span
style='mso-spacerun:yes'>&nbsp; </span>-A<span style='mso-spacerun:yes'>&nbsp;
</span>-t 192.168.1.75:81 -s rr</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -a -t 192.168.1.75:81<span
style='mso-spacerun:yes'>&nbsp; </span>-r 192.168.1.100:8080 -i</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -a -t 192.168.1.75:81<span
style='mso-spacerun:yes'>&nbsp; </span>-r 192.168.1.76:8080 –i</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h5><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>3.4.4.1.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>只配置</span><span
lang=EN-US>server ,</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>没有返回包</span></h5>

<p class=MsoNormal><span lang=EN-US>163</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>机器上</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_38"
 o:spid="_x0000_i1076" type="#_x0000_t75" style='width:415.5pt;height:107.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image053.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US>director</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_45"
 o:spid="_x0000_i1075" type="#_x0000_t75" style='width:414.75pt;height:177pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image054.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>163</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>发送到</span><span lang=EN-US>75</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的原始包</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>转换包</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_71"
 o:spid="_x0000_i1074" type="#_x0000_t75" style='width:415.5pt;height:172.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image055.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US>75</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>到</span><span lang=EN-US>100</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>里面包裹</span><span
lang=EN-US> 163</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>到</span><span
lang=EN-US>75</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的包</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>100</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>响应包</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_83"
 o:spid="_x0000_i1073" type="#_x0000_t75" style='width:415.5pt;height:174.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image056.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US>100-75<span style='mso-spacerun:yes'>&nbsp;
</span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>添加隧道之后</span>
<span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>本机可以访问</span><span
lang=EN-US>8080 </span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>但是调度器不可以</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_86"
 o:spid="_x0000_i1072" type="#_x0000_t75" style='width:415.5pt;height:92.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image057.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>只有两个报文</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_87"
 o:spid="_x0000_i1071" type="#_x0000_t75" style='width:415.5pt;height:156pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image058.png" o:title=""/>
</v:shape></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.4.5<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US>DR</span>配置</h3>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>机器配置</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>Director:</span></p>

<p class=MsoNormal><span lang=EN-US>IP<span style='mso-spacerun:yes'>&nbsp;
</span>192.168.1.76</span></p>

<p class=MsoNormal><span lang=EN-US>mac </span></p>

<p class=MsoNormal><span lang=EN-US>vip<span style='mso-spacerun:yes'>&nbsp;
</span>192.168.1.240<span style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>eth0<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Link
encap:Ethernet<span style='mso-spacerun:yes'>&nbsp; </span>HWaddr
00:0C:29:99:1A:59<span style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>inet addr:192.168.1.75<span style='mso-spacerun:yes'>&nbsp;
</span>Bcast:192.168.1.255<span style='mso-spacerun:yes'>&nbsp;
</span>Mask:255.255.255.0</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>eth0:0<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>Link encap:Ethernet<span
style='mso-spacerun:yes'>&nbsp; </span>HWaddr 00:0C:29:99:1A:59<span
style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>inet addr:192.168.1.240 </span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span lang=EN-US>Real
server<o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>eth0 </span></p>

<p class=MsoNormal><span lang=EN-US>mac: 00:0C:29:66:56:A4<span
style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US>IP:192.168.1.76</span></p>

<p class=MsoNormal><span lang=EN-US>lo;</span></p>

<p class=MsoNormal><span lang=EN-US>lo:0<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Link encap:Local
Loopback<span style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>inet addr:192.168.1.240<span style='mso-spacerun:yes'>&nbsp;
</span>Mask:255.255.255.255</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>负载均衡器的配置</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -C</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm<span
style='mso-spacerun:yes'>&nbsp; </span>-A<span style='mso-spacerun:yes'>&nbsp;
</span>-t 192.168.1.240:8080 -s rr</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -a -t 192.168.1.240:8080<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>-r 192.168.1.76:8080 -g</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm -a -t 192.168.1.240:8080 <span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span>-r 192.168.1.100:8080 -g</span></p>

<p class=MsoNormal><span lang=EN-US>ifconfig eth0:0 192.168.1.240<span
style='mso-spacerun:yes'>&nbsp; </span>netmask 255.255.255.0<span
style='mso-spacerun:yes'>&nbsp; </span>broadcast 192.168.1.255</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span lang=EN-US>realserver
</span></b><b style='mso-bidi-font-weight:normal'><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>的配置</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>ifconfig<span
style='mso-spacerun:yes'>&nbsp; </span>lo:0 192.168.1.240<span
style='mso-spacerun:yes'>&nbsp; </span>netmask 255.255.255.255</span></p>

<p class=MsoNormal><span lang=EN-US># </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>防止发送和响应本机虚拟</span><span lang=EN-US>ip</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的</span><span lang=EN-US>arp</span></p>

<p class=MsoNormal><span lang=EN-US>echo &quot;1&quot; &gt;
/proc/sys/net/ipv4/conf/all/arp_ignore</span></p>

<p class=MsoNormal><span lang=EN-US>echo &quot;1&quot; &gt;
/proc/sys/net/ipv4/conf/lo/arp_ignore</span></p>

<p class=MsoNormal><span lang=EN-US>echo &quot;2&quot; &gt; /proc/sys/net/ipv4/conf/lo/arp_announce</span></p>

<p class=MsoNormal><span lang=EN-US>echo &quot;2&quot; &gt;
/proc/sys/net/ipv4/conf/all/arp_announce</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>测试网址</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>http://192.168.1.240:8080</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.4.6<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US>DR</span>抓包分</h3>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>客户端请求</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_95"
 o:spid="_x0000_i1070" type="#_x0000_t75" style='width:415.5pt;height:241.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image059.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span lang=EN-US>realserver</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>响应请求</span><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_96"
 o:spid="_x0000_i1069" type="#_x0000_t75" style='width:415.5pt;height:158.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image060.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US>mac</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>地址是</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的，所以是从</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>中发出来的</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>mac</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>地址改写，使用回环接口改写</span><span lang=EN-US>mac</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>。虚</span><span lang=EN-US>ip</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>作为回环地址</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>原理</span>
<span lang=EN-US><a href="http://os.51cto.com/art/201105/264303.htm">http://os.51cto.com/art/201105/264303.htm</a></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.2cto.com/os/201109/103535.html">http://www.2cto.com/os/201109/103535.html</a></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://wenku.baidu.com/view/a460aa63ddccda38376baf42.html">http://wenku.baidu.com/view/a460aa63ddccda38376baf42.html</a></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1068"
 type="#_x0000_t75" style='width:365.25pt;height:288.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image061.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span style='font-size:9.0pt;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;color:black'>环境：</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'>1</span><span style='font-size:9.0pt;mso-ascii-font-family:Verdana;
mso-hansi-font-family:Verdana;color:black'>台</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Verdana","sans-serif";color:black'>linux</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>服务器，</span><span style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'> </span><span style='font-size:9.0pt;mso-ascii-font-family:Verdana;
mso-hansi-font-family:Verdana;color:black'>用于</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Verdana","sans-serif";color:black'>directory<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>2</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>台</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>windows</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>服务器，用于</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>realserver<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>IP</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>地址划分：</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>linux</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>服务器</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'> 192.168.180.40<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>windows1</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>服务器</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'> 192.168.180.58<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>windows2</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>服务器</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'> 192.168.180.59<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>VIP</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>：</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>192.168.180.61<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span style='font-size:9.0pt;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;color:black'>网关：</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'>192.168.180.62<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>linux</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>服务器配置：</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>ifconfig eth1:1
192.168.180.61 netmask 255.255.255.255 up<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>route add -host
192.168.180.61 dev eth1:1<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>ipvsadm -C<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>ipvsadm -A -t </span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:red'>192.168.180.61</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>:80 -s rr<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>ipvsadm -a -t
192.168.180.61:80 -r 192.168.180.58:80 -g<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>ipvsadm -a -t
192.168.180.61:80 -r 192.168.180.59:80 -g<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>ipvsadm -L -n<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span style='font-size:9.0pt;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;color:black'>服务已启动，确定工作正常</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>windows</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>服务器配置：</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span style='font-size:9.0pt;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;color:black'>在</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'>2008R2</span><span style='font-size:9.0pt;mso-ascii-font-family:
Verdana;mso-hansi-font-family:Verdana;color:black'>上添加了</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Verdana","sans-serif";color:black'>loopback
adapter</span><span style='font-size:9.0pt;mso-ascii-font-family:Verdana;
mso-hansi-font-family:Verdana;color:black'>，</span><span style='font-size:9.0pt;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;color:red'>配置</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:red'>VIP 192.168.180.61</span><span style='font-size:9.0pt;mso-ascii-font-family:
Verdana;mso-hansi-font-family:Verdana;color:black'>，掩码</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Verdana","sans-serif";color:black'>255.255.255.255
</span><span style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>网关本想指定</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>192.168.180.61 </span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>但是</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>windows</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>不让指定，我就没有指定。在</span><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>windows </span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>在两台</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>windows</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>上搭建好</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>IIS</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>，建立站点，本想测试效果，但是</span><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>client</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>访问</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'>VIP</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>刷新不到页面。网上查一下，有朋友写需要输入一下命令：</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>netsh interface ipv4 set
interface &quot;net&quot; weakhostreceive=enabled<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>netsh interface ipv4 set
interface &quot;net&quot; weakhostsend=enabled<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>netsh interface ipv4 set
interface &quot;loopback&quot; weakhostreceive=enabled<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>netsh interface ipv4 set
interface &quot;loopback&quot; weakhostsend=enabled<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span style='font-size:9.0pt;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;color:black'>但是我在命令提示符里输入命令后，在刷新页面也出不来。</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'><o:p>&nbsp;</o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:19.5pt;background:white'><span
style='font-size:10.5pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>上面的四条命令一定要输入，因为</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:black'>windows
2008</span><span style='font-size:10.5pt;mso-ascii-font-family:Arial;
mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;color:black'>的默认中，网卡的</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Arial","sans-serif";color:black'>stronghost</span><span
style='font-size:10.5pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>处于启用状态，这个设置可以防止跨接口转发数据包，这就表明：来自一个网络适配器的请求不会被环回适配器处理，因为这个请求来自于不同的网络适配器。为了将环回适配器从</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Arial","sans-serif";color:black'>stronghost</span><span
style='font-size:10.5pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>切换为</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:black'>weakhost</span><span
style='font-size:10.5pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>，需要运行以上四条命令，要不然</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:black'>TCP</span><span
style='font-size:10.5pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>的状态会一直处于</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Arial","sans-serif";color:black'>SYN_RECV </span><span
style='font-size:10.5pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>状态，解决这个问题花了我一天的时间，最后在一个老外的文档里找到的办法</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:19.5pt;background:white'><span
lang=EN-US style='font-size:10.5pt;font-family:"Arial","sans-serif";color:black'>http://blog.loadbalancer.org/direct-server-return-on-windows-2008-using-loopback-adpter/<o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'><o:p>&nbsp;</o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black;mso-no-proof:yes'><v:shape
 id="_x0000_i1067" type="#_x0000_t75" style='width:415.5pt;height:334.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image062.png" o:title=""/>
</v:shape></span><span lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span style='font-size:9.0pt;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;color:black'>在</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'>linux</span><span style='font-size:9.0pt;mso-ascii-font-family:
Verdana;mso-hansi-font-family:Verdana;color:black'>上使用</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Verdana","sans-serif";color:black'>ipvsadm
-Ln </span><span style='font-size:9.0pt;mso-ascii-font-family:Verdana;
mso-hansi-font-family:Verdana;color:black'>查看，可以看到</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Verdana","sans-serif";color:black'>Inactconn</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>在增长。</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'><o:p>&nbsp;</o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'><o:p>&nbsp;</o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'><o:p>&nbsp;</o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>部署邮件系统负载均衡，采用</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>LVS-DR</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>模式，调度器是一台</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>centos 5.8</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>，</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>real-server</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>是两台</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>windows2008</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>，</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>DR</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>的配置网上很多，就不贴出来了，主要是</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>real-server</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>的配置，因为是</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>windows
2008</span><span style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:black'>，多了些步骤</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>具体做法如下：</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>1.</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>关掉系统自带防火墙功能</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>2.</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>新增环回网卡</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>3.</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>配置环回</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>ip</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>为</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>vip</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>的</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>ip</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>，掩码</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>255.255.255.255<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>4.</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>修改网卡信息</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>在命令行下修改，开始</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>--</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>运行</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>--cmd<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>netsh
interface ipv4 set interface &quot;</span><span style='font-size:9.0pt;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:black'>实节点网卡名字</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Arial","sans-serif";color:black'>&quot; weakhostreceive=enabled<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>netsh
interface ipv4 set interface &quot;</span><span style='font-size:9.0pt;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:black'>实节点网卡名字</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Arial","sans-serif";color:black'>&quot; weakhostsend=enabled<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>netsh
interface ipv4 set interface &quot;</span><span style='font-size:9.0pt;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:black'>实节点环回网卡名字</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Arial","sans-serif";color:black'>&quot; weakhostreceive=enabled<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>netsh
interface ipv4 set interface &quot;</span><span style='font-size:9.0pt;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;color:black'>实节点环回网卡名字</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Arial","sans-serif";color:black'>&quot; weakhostsend=enabled<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>完成后，测试一下是否好了，恭喜你，：）大功告成！</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>上面的四条命令一定要输入，因为</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>windows
2008</span><span style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;color:black'>的默认中，网卡的</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>stronghost</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>处于启用状态，这个设置可以防止跨接口转发数据包，这就表明：来自一个网络适配器的请求不会被环回适配器处理，因为这个请求来自于不同的网络适配器。为了将环回适配器从</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>stronghost</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>切换为</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>weakhost</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>，需要运行以上四条命令，要不然</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>TCP</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>的状态会一直处于</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>SYN_RECV </span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>状态，解决这个问题花了我一天的时间，最后在一个老外的文档里找到的办法</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'>http://blog.loadbalancer.org/direct-server-return-on-windows-2008-using-loopback-adpter/<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:16.3pt;background:white'><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:black'>有不懂的欢迎留言！</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'><o:p>&nbsp;</o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'><o:p>&nbsp;</o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black'>KEEPALIVED</span><span
style='font-size:9.0pt;mso-ascii-font-family:Verdana;mso-hansi-font-family:
Verdana;color:black'>需要修改</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black'><o:p></o:p></span></p>

<p style='margin-top:0cm;margin-right:0cm;margin-bottom:15.6pt;margin-left:
0cm;line-height:10.65pt;background:white'><span lang=EN-US style='font-size:
9.0pt;font-family:"Verdana","sans-serif";color:black;mso-no-proof:yes'><v:shape
 id="图片_x0020_13" o:spid="_x0000_i1066" type="#_x0000_t75" style='width:315pt;
 height:62.25pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image063.png" o:title=""/>
</v:shape></span><span lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_4"
 o:spid="_x0000_i1065" type="#_x0000_t75" style='width:415.5pt;height:333.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image064.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1064"
 type="#_x0000_t75" style='width:415.5pt;height:161.25pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image065.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1063"
 type="#_x0000_t75" style='width:310.5pt;height:322.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image066.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1062"
 type="#_x0000_t75" style='width:415.5pt;height:270.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image067.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1061"
 type="#_x0000_t75" style='width:415.5pt;height:270.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image068.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1060"
 type="#_x0000_t75" style='width:278.25pt;height:117.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image069.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>Director</span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>修改</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1059"
 type="#_x0000_t75" style='width:415.5pt;height:309.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image070.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>问题</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black;background:white'>在</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
color:black;background:white'>linux</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black;
background:white'>上使用</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black;background:white'>ipvsadm -Ln </span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black;background:white'>查看，可以看到</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black;
background:white'>Inactconn</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black;
background:white'>在增长。</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black;background:white'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black;background:white'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:
Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Verdana;color:black;background:white'>网关可以不用指定，修改下注册表，</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black;background:white'>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Tcpip\Parameters\Interfaces
</span><span style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black;background:white'>找到</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Verdana","sans-serif";color:black;
background:white'>Microsoft loopback adapter</span><span style='font-size:9.0pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black;
background:white'>设置</span><span lang=EN-US style='font-size:9.0pt;font-family:
"Verdana","sans-serif";color:black;background:white'>ipaddress</span><span
style='font-size:9.0pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;
color:black;background:white'>值：</span><span lang=EN-US style='font-size:9.0pt;
font-family:"Verdana","sans-serif";color:black;background:white'>192.168.180.61
Subnetmask: 255.255.255.255</span><span style='font-size:9.0pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black;background:white'>，禁用设备再启用即可。</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Verdana","sans-serif";
color:black;background:white'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<pre style='margin-bottom:6.25pt;line-height:15.05pt;background:white'><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>使用抓包软件，用你的电脑访问</span><span
lang=EN-US style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>VIP</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>地址，看下传过来的</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>MAC</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>地址是</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>LINUX</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>服务器</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>MAC</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>地址，还是</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>real server MAC</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>地址，用</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>real service<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>ping VIP</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>地址</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'><span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>在</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>arp -a </span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>看获取</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>VIP</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>的</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>MAC</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>的地址</span><span style='font-size:
9.0pt;font-family:"Arial","sans-serif";color:#333333'> </span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>因该不是</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'>Linux MAC</span><span
style='font-size:9.0pt;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;
mso-bidi-font-family:Arial;color:#333333'>地址，请确认。</span><span lang=EN-US
style='font-size:9.0pt;font-family:"Arial","sans-serif";color:#333333'><o:p></o:p></span></pre>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1058"
 type="#_x0000_t75" style='width:415.5pt;height:273.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image071.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>服务器上进行了修改</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1057"
 type="#_x0000_t75" style='width:415.5pt;height:93.75pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image072.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_28"
 o:spid="_x0000_i1056" type="#_x0000_t75" style='width:415.5pt;height:117.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image073.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>这里的</span><span
lang=EN-US>96</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>实际上是错误的，应该是</span><span
lang=EN-US>:82</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>。客户端的那个。</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1055"
 type="#_x0000_t75" style='width:414.75pt;height:120pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image074.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>包不返回</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1054"
 type="#_x0000_t75" style='width:414.75pt;height:208.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image075.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="_x0000_i1053"
 type="#_x0000_t75" style='width:415.5pt;height:388.5pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="lvs/image076.png" o:title=""/>
</v:shape></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>ipvsadm</span><span
style='font-size:10.5pt;color:#555555'>下载地址： <span lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
style='font-size:10.5pt;color:red;background:#FFCC00'>一、关于<span lang=EN-US>ipvsadm:</span></span><span
lang=EN-US style='font-size:10.5pt;color:#555555'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
style='font-size:10.5pt;color:#555555'>注：权重用整数来表示，有时候也可以将其设置为<span lang=EN-US>atomic_t</span>；其有效表示值范围为<span
lang=EN-US>24bit</span>整数空间，即（<span lang=EN-US>2^24-1</span>）；<span lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
style='font-size:10.5pt;color:#555555'>因此，<span lang=EN-US>ipvsadm</span>命令的主要作用表现在以下方面：<span
lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>1</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>添加服务（通过设定其权重<span lang=EN-US>&gt;0</span>）</span><span
style='font-size:10.5pt;color:#555555'>；<span lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>2</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>关闭服务（通过设定其权重<span lang=EN-US>&gt;0</span>）</span><span
style='font-size:10.5pt;color:#555555'>；此应用场景中，已经连接的用户将可以继续使用此服务，直到其退出或超时；新的连接请求将被拒绝；<span
lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>3</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>保存<span lang=EN-US>ipvs</span>设置</span><span style='font-size:10.5pt;
color:#555555'>，通过使用“</span><span lang=EN-US style='font-size:10.5pt;
color:fuchsia'>ipvsadm-sav &gt; ipvsadm.sav</span><span style='font-size:10.5pt;
color:#555555'>”命令实现；<span lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>4</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>恢复<span lang=EN-US>ipvs</span>设置</span><span style='font-size:10.5pt;
color:#555555'>，通过使用“</span><span lang=EN-US style='font-size:10.5pt;
color:fuchsia'>ipvsadm-sav &lt; ipvsadm.sav</span><span style='font-size:10.5pt;
color:#555555'>”命令实现；<span lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>5</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>显示<span lang=EN-US>ip_vs</span>的版本号</span><span style='font-size:
10.5pt;color:#555555'>，下面的命令显示<span lang=EN-US>ipvs</span>的<span lang=EN-US>hash</span>表的大小为<span
lang=EN-US>4k</span>；<span lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>&nbsp; #<span
class=apple-converted-space>&nbsp;</span></span><span lang=EN-US
style='font-size:10.5pt;color:fuchsia'>ipvsadm</span><span lang=EN-US
style='font-size:10.5pt;color:#555555'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>&nbsp;&nbsp;&nbsp; IP Virtual
Server version 1.2.1 (size=4096)<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>6</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>显示<span lang=EN-US>ipvsadm</span>的版本号</span><span lang=EN-US
style='font-size:10.5pt;color:#555555'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>&nbsp; #<span
class=apple-converted-space>&nbsp;</span></span><span lang=EN-US
style='font-size:10.5pt;color:fuchsia'>ipvsadm --version</span><span
lang=EN-US style='font-size:10.5pt;color:#555555'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>&nbsp;&nbsp; ipvsadm v1.24
2003/06/07 (compiled with popt and IPVS v1.2.0)<o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>7</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>查看<span lang=EN-US>LVS</span>上当前的所有连接</span><span lang=EN-US
style='font-size:10.5pt;color:#555555'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>#</span><span
class=apple-converted-space><span lang=EN-US style='font-size:10.5pt;
color:fuchsia'>&nbsp;</span></span><span lang=EN-US style='font-size:10.5pt;
color:fuchsia'>ipvsadm -Lcn&nbsp;&nbsp;<span class=apple-converted-space>&nbsp;</span></span><span
lang=EN-US style='font-size:10.5pt;color:#555555'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
style='font-size:10.5pt;color:#555555'>或者<span lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>#</span><span lang=EN-US
style='font-size:10.5pt;color:fuchsia'>cat /proc/net/ip_vs_conn</span><span
lang=EN-US style='font-size:10.5pt;color:#555555'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>8</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>查看虚拟服务和<span lang=EN-US>RealServer</span>上当前的连接数、数据包数和字节数的统计值</span><span
style='font-size:10.5pt;color:#555555'>，则可以使用下面的命令实现：<span lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>#</span><span
class=apple-converted-space><span lang=EN-US style='font-size:10.5pt;
color:fuchsia'>&nbsp;</span></span><span lang=EN-US style='font-size:10.5pt;
color:fuchsia'>ipvsadm -l --stats</span><span lang=EN-US style='font-size:10.5pt;
color:#555555'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>9</span><span
style='font-size:10.5pt;color:#555555'>、</span><span style='font-size:10.5pt;
color:red'>查看包传递速率的近似精确值</span><span style='font-size:10.5pt;color:#555555'>，可以使用下面的命令：<span
lang=EN-US><o:p></o:p></span></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:21.0pt;background:white'><span
lang=EN-US style='font-size:10.5pt;color:#555555'>#</span><span
class=apple-converted-space><span lang=EN-US style='font-size:10.5pt;
color:fuchsia'>&nbsp;</span></span><span lang=EN-US style='font-size:10.5pt;
color:fuchsia'>ipvsadm -l --rate</span><span lang=EN-US style='font-size:10.5pt;
color:#555555'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_1"
 o:spid="_x0000_i1052" type="#_x0000_t75" style='width:415.5pt;height:191.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image077.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>3.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>配置问题</span></h2>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.5.1<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]><span
lang=EN-US>ipvsadm</span>的配置重启无效</h3>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><span
lang=EN-US>ipvsadm</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的配置重启无效，所以需要启动加载。</span></p>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>设置如下</span></p>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><span
lang=EN-US>chkconfig<span style='mso-spacerun:yes'>&nbsp; </span>ipvsadm<span
style='mso-spacerun:yes'>&nbsp; </span>on <span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span>#</span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>启动加载</span></p>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><span
lang=EN-US>service ipvsadm<span style='mso-spacerun:yes'>&nbsp;
</span>start<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>保存配置并启动</span></p>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><span
lang=EN-US>service ipvsadm<span style='mso-spacerun:yes'>&nbsp;
</span>save<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>保存配置</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>3.5.2<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>如何关闭虚接口</h3>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_94"
 o:spid="_x0000_i1051" type="#_x0000_t75" style='width:130.5pt;height:10.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image078.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h1><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>提高篇</span></h1>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>高性能</span></h2>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>4.1.1<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>硬件</h3>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>从目前的数据来看，性能是很高的，理论上</span><span
lang=EN-US>DR</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>模式可以抗衡硬件级别的负载均衡器。</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>做服务器选购上，选择针对网络优化的服务器。</span>
</p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>lvs</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>作者提供的硬件配置</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_12"
 o:spid="_x0000_i1050" type="#_x0000_t75" style='width:414.75pt;height:259.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image079.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_36"
 o:spid="_x0000_i1049" type="#_x0000_t75" style='width:414.75pt;height:222.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image080.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>参考资料</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.docin.com/p-310290067.html">http://www.docin.com/p-310290067.html</a></span></p>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>4.1.2<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>性能调优</h3>

<p class=MsoNormal><span lang=EN-US><a
href="http://hi.baidu.com/higkoo/item/9e98b202d8709dc12e4c6bb2">http://hi.baidu.com/higkoo/item/9e98b202d8709dc12e4c6bb2</a></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><a href="http://weibo.com/benjiaming1981">http://weibo.com/benjiaming1981</a></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>内核优化</span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kernel.taobao.org/index.php/Documents/Kernel_build">http://kernel.taobao.org/index.php/Documents/Kernel_build</a></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:15.75pt;background:white'><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>去年</span><span lang=EN-US><a
href="http://hi.baidu.com/higkoo/item/dcfef11bc63946cc39cb3034" target="_blank"><span
lang=EN-US style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#3FA7CB'><span lang=EN-US>试用</span></span></a></span><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>了一下</span><span lang=EN-US><a
href="http://kernel.taobao.org/" target="_blank"><span lang=EN-US
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#3FA7CB'><span lang=EN-US>淘宝内核</span></span></a></span><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>，发现它对</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Tahoma","sans-serif";color:#454545'>LVS</span><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>性能有质的提升。敬佩之心倍上心头，兴奋之余开始了解淘宝内核。</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545'><o:p></o:p></span></p>

<p style='margin:0cm;margin-bottom:.0001pt;line-height:15.75pt;background:white'><span
lang=EN-US style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545'>&nbsp;&nbsp;&nbsp;&nbsp;</span><span style='font-size:10.5pt;
mso-ascii-font-family:Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:
Tahoma;color:#454545'>简单公布一下测试结果：在一台</span><span lang=EN-US><a
href="https://code.google.com/p/public-higkoo/source/browse/trunk/2013/01/Dell-R610.txt"
target="_blank"><span lang=EN-US style='font-size:10.5pt;mso-ascii-font-family:
Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#3FA7CB'><span
lang=EN-US>普通的</span></span><span style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#3FA7CB'>4</span><span lang=EN-US style='font-size:10.5pt;mso-ascii-font-family:
Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#3FA7CB'><span
lang=EN-US>核服务器</span></span></a></span><span style='font-size:10.5pt;
mso-ascii-font-family:Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:
Tahoma;color:#454545'>上，使用</span><span lang=EN-US style='font-size:10.5pt;
font-family:"Tahoma","sans-serif";color:#454545'>LVS</span><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>的</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Tahoma","sans-serif";color:#454545'>DR</span><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>模式，后端</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Tahoma","sans-serif";color:#454545'>7</span><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>台</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Tahoma","sans-serif";color:#454545'>RealServer</span><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>。在</span><span lang=EN-US
style='font-size:10.5pt;font-family:"Tahoma","sans-serif";color:#454545'>CentOS</span><span
style='font-size:10.5pt;mso-ascii-font-family:Tahoma;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>原生内核上，每秒最高转发约</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545'>6</span><span style='font-size:10.5pt;mso-ascii-font-family:
Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>万个</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545'>HTTP</span><span style='font-size:10.5pt;mso-ascii-font-family:
Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>请求，而使用淘宝内核后可高达约</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545'>14</span><span style='font-size:10.5pt;mso-ascii-font-family:
Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>万次请求每秒（瓶颈在测试机，无法模拟更大压力）。而在这台服务器上直接测试</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545'>Nginx</span><span style='font-size:10.5pt;mso-ascii-font-family:
Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>状态页，最高每秒处理约</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545'>4</span><span style='font-size:10.5pt;mso-ascii-font-family:
Tahoma;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#454545'>万次请求。</span><span
lang=EN-US style='font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://hi.baidu.com/higkoo/item/dcfef11bc63946cc39cb3034">http://hi.baidu.com/higkoo/item/dcfef11bc63946cc39cb3034</a></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Tahoma","sans-serif";color:#454545;background:white'>&nbsp;</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Tahoma;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545;background:white'>咨询了一下</span><span
lang=EN-US><a href="http://weibo.com/benjiaming1981" target="_blank"><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Tahoma;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#3FA7CB;
background:white'><span lang=EN-US>佳明</span></span></a></span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Tahoma;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545;background:white'>和</span><span
lang=EN-US><a href="http://weibo.com/clocktick" target="_blank"><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Tahoma;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;color:#3FA7CB;
background:white'><span lang=EN-US>炳天</span></span></a></span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Tahoma;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545;background:white'>，我感觉我找到原因了：淘宝对内核的配置也进行了大量的优化。针对</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545;background:white'>LVS</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Tahoma;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Tahoma;mso-bidi-font-family:
Tahoma;color:#454545;background:white'>的优化就是将</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Tahoma","sans-serif";color:#454545;
background:white'>CONFIG_IP_VS_TAB_BITS</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Tahoma;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Tahoma;
mso-bidi-font-family:Tahoma;color:#454545;background:white'>由</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545;background:white'>12</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Tahoma;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Tahoma;mso-bidi-font-family:
Tahoma;color:#454545;background:white'>调整到</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Tahoma","sans-serif";color:#454545;
background:white'>20“sed&nbsp;-i&nbsp;'s/CONFIG_IP_VS_TAB_BITS=12/CONFIG_IP_VS_TAB_BITS=20/g'&nbsp;SOURCES/config-generic”</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Tahoma;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#454545;background:white'>：</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#454545;background:white'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Tahoma","sans-serif";color:#454545;background:white'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_104"
 o:spid="_x0000_i1048" type="#_x0000_t75" style='width:414.75pt;height:131.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image081.png" o:title=""/>
</v:shape></span><span lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:
"Tahoma","sans-serif";color:#454545;background:white'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Tahoma","sans-serif";color:#454545;background:white'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>高可用</span></h2>

<h3><![if !supportLists]><span lang=EN-US><span style='mso-list:Ignore'>4.2.1<span
style='font:7.0pt "Times New Roman"'> </span></span></span><![endif]>单点问题</h3>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>使用过程中会出现单点问题，为了提高可靠性。可以使用双机软件，进行热备。通常和</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>搭配的双机软件是</span><span
lang=EN-US>keepalived</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，</span><span
lang=EN-US>keepalived</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>会配置</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>规则。</span>
</p>

<p class=MsoNormal style='text-indent:26.25pt;mso-char-indent-count:2.5'><span
lang=EN-US>keepalived</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>通过</span><span
lang=EN-US>vrrp</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>协议检测两台主机的健康状态，一旦出现故障，</span><span
lang=EN-US>vip</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>自动切换到新的主机上。</span><span
lang=EN-US>ipvsadm</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>只是</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的管理软件，所以</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Tahoma;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#444444'>即使没安装有</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#444444'>ipvsadm</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Tahoma;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;
color:#444444'>，只要配置有</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Tahoma","sans-serif";color:#444444'>keepalived</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Tahoma;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#444444'>的</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Tahoma","sans-serif";color:#444444'>lvs</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Tahoma;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Tahoma;mso-bidi-font-family:Tahoma;color:#444444'>，启动服务后就会自动生成</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Tahoma","sans-serif";
color:#444444'>LVS</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Tahoma;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Tahoma;mso-bidi-font-family:Tahoma;
color:#444444'>规则。</span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span lang=EN-US>keepalived</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>安装</span><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>wget<span style='mso-spacerun:yes'>&nbsp;
</span><a href="http://www.keepalived.org/software/keepalived-1.2.13.tar.gz">http://www.keepalived.org/software/keepalived-1.2.13.tar.gz</a></span></p>

<p class=MsoNormal><span lang=EN-US style='background:white'>tar xzvf
keepalived-1.2.13.tar.gz; cd keepalived-1.2.13; ./configure; make; make install</span><span
class=apple-converted-space><span lang=EN-US style='font-size:13.5pt;
font-family:"Courier New";color:black;background:white'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_25"
 o:spid="_x0000_i1047" type="#_x0000_t75" style='width:391.5pt;height:147pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image082.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>配置例子</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>需要在主备服务器上都配置，主备服务器配置有细微区别</span><span
lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>vi /etc/keepalived/keepalived.conf</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>定义</span><span
lang=EN-US>vrrp</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>检测实例</span></p>

<p class=MsoNormal><span lang=EN-US>vrrp_instance VI_1 {</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span style='color:red'>state
MASTER<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>#</span></span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin;
color:red'>备机改成</span><span style='color:red'> <span lang=EN-US>BACKUP<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>interface eth0<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>绑定的网卡</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>virtual_router_id 51 #</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>虚拟标识，通讯协议用，主备保持一直</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;
</span><b style='mso-bidi-font-weight:normal'><span style='color:red'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span>priority 100<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#</span></b></span><b
style='mso-bidi-font-weight:normal'><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin;
color:red'>优先级</span><span lang=EN-US style='color:red'><span
style='mso-spacerun:yes'>&nbsp; </span></span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin;color:red'>备机需要改低一点</span><span
lang=EN-US style='color:red'> 99<o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>advert_int 1</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>authentication {</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>auth_type PASS<span style='mso-spacerun:yes'>&nbsp; </span>#vrrp</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>协议验证模式</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>auth_pass 1111<span style='mso-spacerun:yes'>&nbsp; </span>#vrrp</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>协议密码</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>}</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>#</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>管理的虚拟地址</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>virtual_ipaddress {</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>192.168.1.240 #lvs</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>对外的虚拟地址，可以定义多个</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>}</span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>#</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>定义</span><span lang=EN-US>VIP</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的地址</span></p>

<p class=MsoNormal><span lang=EN-US>virtual_server 192.168.1.240 8080 {</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>delay_loop 6<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>轮询一次</span><span lang=EN-US>realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的个周期，</span><span lang=EN-US>10</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>秒中轮询一次</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>lb_algo wrr <span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;</span>#lvs</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的算法</span><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>rr|wrr|lc|wlc|sh|dh|lblc</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>lb_kind DR<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#lvs</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>的转发方式</span> <span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span></span><span lang=EN-US
style='mso-fareast-font-family:宋体;mso-font-kerning:0pt'>&nbsp;NAT|DR|TUN </span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>persistence_timeout 50<span
style='mso-spacerun:yes'>&nbsp; </span># </span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>对应</span><span lang=EN-US>lvs p</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>选项</span><span lang=EN-US> 50</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>秒内发送到同一台服务器上</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>protocol TCP<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#tcp</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>检查状态</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>#</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>定义</span><span lang=EN-US>realserver1</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>real_server 192.168.1.100 8080{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>weight 1<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>#</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>服务器权重</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TCP_CHECK
{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>connect_timeout 3<span style='mso-spacerun:yes'>&nbsp; </span>#3</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>秒超时</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>定义</span><span lang=EN-US>realserver2</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>real_server 192.168.1.76 8080{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>weight 1</span></p>

<p class=MsoNormal><span lang=EN-US><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TCP_CHECK
{</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>connect_timeout 3</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}</span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>}</span></p>

<p class=MsoNormal><span lang=EN-US>}</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>启动</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>service keepalived start</span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>会自动创建</span><span
lang=EN-US>vip</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>和</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>规则。前提是</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>规则，否则不改变。</span></p>

<p class=MsoNormal><span lang=EN-US>ipvsadm –ln </span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>查看运行规则</span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>重新启动</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>service keepalived restart<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>会清空规则，重新生成规则</span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>停止</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US>service keepallived stop </span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>会清空规则</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>更多资料参看：</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US><a href="http://www.keepalived.org/">http://www.keepalived.org/</a><span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>官网</span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.keepalived.org/documentation.html">http://www.keepalived.org/documentation.html</a><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>官网文档</span></p>

<p class=MsoNormal><span lang=EN-US>VRRP is a fundamental brick for router
failover. VRRP (Virtual Router Redundancy Protocol :&nbsp;<a
href="http://www.ietf.org/rfc/rfc2338.txt"><span style='color:windowtext;
text-decoration:none;text-underline:none'>RFC2338</span></a>) is focused on
director takeover, it provide low-level design for router backup.</span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>高扩展</span></h2>

<p class=MsoNormal><span lang=EN-US>lvs</span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>不支持扩展方式，常用的方式是使用</span><span lang=EN-US>dns</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>轮询到不同的</span><span lang=EN-US>lvs</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>上。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>ospf+lvs<span
style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>参考资料</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.docin.com/p-310290067.html">http://www.docin.com/p-310290067.html</a></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://my.oschina.net/lxcong/blog/143904">http://my.oschina.net/lxcong/blog/143904</a><span
style='mso-spacerun:yes'>&nbsp; </span></span></p>

<h1><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>应用场景</span></h1>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>5.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>典型的部署方案</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_22"
 o:spid="_x0000_i1046" type="#_x0000_t75" style='width:415.5pt;height:405.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image083.png" o:title=""/>
</v:shape></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>5.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>淘宝部署方案</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_31"
 o:spid="_x0000_i1045" type="#_x0000_t75" style='width:415.5pt;height:273.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image084.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_34"
 o:spid="_x0000_i1044" type="#_x0000_t75" style='width:414.75pt;height:202.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image085.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_37"
 o:spid="_x0000_i1043" type="#_x0000_t75" style='width:414.75pt;height:312pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image086.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>还是</span><span lang=EN-US>DR</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>模式</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h1><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>问题</span></h1>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>6.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>Lvs </span><span style='font-family:宋体;
mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:Cambria;
mso-hansi-theme-font:major-latin'>如何判断</span><span lang=EN-US> realserver</span><span
style='font-family:宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:
Cambria;mso-hansi-theme-font:major-latin'>挂机</span></h2>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l1 level1 lfo6'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>Keepalived </span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>提供了</span><span
lang=EN-US>Realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>检测方式</span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.linuxvirtualserver.org/docs/ha/keepalived.html">http://www.linuxvirtualserver.org/docs/ha/keepalived.html</a></span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l1 level1 lfo6'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US>Heartbeat</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>提供了</span><span
lang=EN-US> ldiretor</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>检测</span></p>

<p class=MsoNormal><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;mso-bidi-font-family:
宋体;color:black;mso-font-kerning:0pt'>首先架构应该是前面有</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt'>2</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-hansi-font-family:Verdana;mso-bidi-font-family:宋体;color:black;mso-font-kerning:
0pt'>台</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:
"Verdana","sans-serif";mso-fareast-font-family:宋体;mso-bidi-font-family:宋体;
color:black;mso-font-kerning:0pt'>lvs</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;
mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt'>机器，</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
mso-fareast-font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:
0pt'>2</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:
Verdana;mso-hansi-font-family:Verdana;mso-bidi-font-family:宋体;color:black;
mso-font-kerning:0pt'>个都安装</span><span lang=EN-US style='mso-bidi-font-size:
10.5pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:宋体;
mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt'>heartbeat</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-hansi-font-family:Verdana;mso-bidi-font-family:宋体;color:black;mso-font-kerning:
0pt'>，做主备，后面接</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";mso-fareast-font-family:宋体;mso-bidi-font-family:
宋体;color:black;mso-font-kerning:0pt'>1</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;
mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt'>个以上实际的访问主机</span><span
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt'> <span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";mso-fareast-font-family:宋体;mso-bidi-font-family:
宋体;color:black;mso-font-kerning:0pt'>ldirected</span><span style='mso-bidi-font-size:
10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;
mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt'>是</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
mso-fareast-font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:
0pt'>heartbeat</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;mso-bidi-font-family:
宋体;color:black;mso-font-kerning:0pt'>的一个插件，如果其中一个机器坏了，会自动从</span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
mso-fareast-font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:
0pt'>lvs</span><span style='mso-bidi-font-size:10.5pt;font-family:宋体;
mso-ascii-font-family:Verdana;mso-hansi-font-family:Verdana;mso-bidi-font-family:
宋体;color:black;mso-font-kerning:0pt'>中剔除，如果</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";mso-fareast-font-family:
宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:0pt'>lvs</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-hansi-font-family:Verdana;mso-bidi-font-family:宋体;color:black;mso-font-kerning:
0pt'>机器坏了，会切换到备机</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";mso-fareast-font-family:宋体;mso-bidi-font-family:
宋体;color:black;mso-font-kerning:0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:19.2pt;mso-pagination:widow-orphan'><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
mso-fareast-font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:
0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:19.2pt;mso-pagination:widow-orphan'><span
lang=EN-US><a href="http://www.keepalived.org/LVS-NAT-Keepalived-HOWTO.html">http://www.keepalived.org/LVS-NAT-Keepalived-HOWTO.html</a></span><span
lang=EN-US style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";
mso-fareast-font-family:宋体;mso-bidi-font-family:宋体;color:black;mso-font-kerning:
0pt'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>6.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>图形管理界面</span></h2>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span class=apple-converted-space><span lang=EN-US style='font-size:7.5pt;
font-family:"Verdana","sans-serif";color:#4B5D67;background:#9BC3D5'>&nbsp;</span></span><span
lang=EN-US style='font-size:7.5pt;font-family:"Verdana","sans-serif";
color:#4B5D67;background:#9BC3D5'>Piranha<o:p></o:p></span></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US><a
href="http://kezhong.wordpress.com/2010/03/28/setup-linux-loadbalancer-with-piranha-and-lvs-on-centos-5-4/">http://kezhong.wordpress.com/2010/03/28/setup-linux-loadbalancer-with-piranha-and-lvs-on-centos-5-4/</a></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>6.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span>NAT</span><span style='font-family:宋体;
mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:Cambria;
mso-hansi-theme-font:major-latin'>同一个网段问题</span></h2>

<p class=MsoNormal style='text-indent:5.25pt;mso-char-indent-count:.5'><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black;background:white'>同一个网段内的客户端不能访问</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black;
background:white'>LVS/NAT</span><span style='mso-bidi-font-size:10.5pt;
font-family:宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;
mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Verdana;color:black;
background:white'>方式的</span><span lang=EN-US style='mso-bidi-font-size:10.5pt;
font-family:"Verdana","sans-serif";color:black;background:white'>Director</span><span
style='mso-bidi-font-size:10.5pt;font-family:宋体;mso-ascii-font-family:Verdana;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Verdana;color:black;background:white'>，因为</span><span lang=EN-US
style='mso-bidi-font-size:10.5pt;font-family:"Verdana","sans-serif";color:black;
background:white'>RS</span><span style='mso-bidi-font-size:10.5pt;font-family:
宋体;mso-ascii-font-family:Verdana;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Verdana;color:black;background:white'>直接返回给了客户端了<b
style='mso-bidi-font-weight:normal'>。</b></span><b style='mso-bidi-font-weight:
normal'><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>外网访问</span><span lang=EN-US><o:p></o:p></span></b></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_10"
 o:spid="_x0000_i1042" type="#_x0000_t75" style='width:415.5pt;height:64.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image087.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>无法访问</span><span
lang=EN-US>nat</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>转换</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_73"
 o:spid="_x0000_i1041" type="#_x0000_t75" style='width:415.5pt;height:5in;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image088.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>本机可以</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_74"
 o:spid="_x0000_i1040" type="#_x0000_t75" style='width:415.5pt;height:112.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image089.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_75"
 o:spid="_x0000_i1039" type="#_x0000_t75" style='width:415.5pt;height:83.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image090.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>抓包</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_76"
 o:spid="_x0000_i1038" type="#_x0000_t75" style='width:415.5pt;height:214.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image091.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_77"
 o:spid="_x0000_i1037" type="#_x0000_t75" style='width:415.5pt;height:216.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image092.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>直接转发模式</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_78"
 o:spid="_x0000_i1036" type="#_x0000_t75" style='width:415.5pt;height:168pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image093.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>尝试下一个服务器</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_79"
 o:spid="_x0000_i1035" type="#_x0000_t75" style='width:415.5pt;height:104.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image094.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>客户端添加路由，强制使用路由器</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_81"
 o:spid="_x0000_i1034" type="#_x0000_t75" style='width:414.75pt;height:189.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image095.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>发现</span><span
lang=EN-US>163</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>还是重复发送数据到</span><span
lang=EN-US>75,75</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>返回的报文不认可。</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>6.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-family:宋体;
mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:Cambria;
mso-hansi-theme-font:major-latin'>防火墙问题</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_80"
 o:spid="_x0000_i1033" type="#_x0000_t75" style='width:415.5pt;height:222.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image096.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>6.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US>shell</span><span
style='font-family:宋体;mso-ascii-font-family:Cambria;mso-ascii-theme-font:major-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:major-fareast;mso-hansi-font-family:
Cambria;mso-hansi-theme-font:major-latin'>无法登陆</span></h2>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_6"
 o:spid="_x0000_i1032" type="#_x0000_t75" style='width:415.5pt;height:168.75pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image097.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>登陆到</span><span
lang=EN-US>79</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>，在登陆</span><span
lang=EN-US>75</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US>ssh 192.168.1.75 </span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>很慢，其他正常</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_15"
 o:spid="_x0000_i1031" type="#_x0000_t75" style='width:220.5pt;height:27pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image098.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_7"
 o:spid="_x0000_i1030" type="#_x0000_t75" style='width:415.5pt;height:269.25pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image099.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>本地添加路由，可以正常访问</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_16"
 o:spid="_x0000_i1029" type="#_x0000_t75" style='width:415.5pt;height:118.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image100.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>正常的报文</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_18"
 o:spid="_x0000_i1028" type="#_x0000_t75" style='width:415.5pt;height:90pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image101.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>排查原因</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_19"
 o:spid="_x0000_i1027" type="#_x0000_t75" style='width:414.75pt;height:69pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image102.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>解决方法</span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_20"
 o:spid="_x0000_i1026" type="#_x0000_t75" style='width:304.5pt;height:19.5pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image103.png" o:title=""/>
</v:shape></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-no-proof:yes'><v:shape id="图片_x0020_21"
 o:spid="_x0000_i1025" type="#_x0000_t75" style='width:338.25pt;height:36pt;
 visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="lvs/image104.png" o:title=""/>
</v:shape></span><span lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>6.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>组网问题</span></h2>

<p class=MsoNormal><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>一定把网络规划好，才用的转发模式依赖与网络结构。</span></p>

<h2><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Cambria;
mso-fareast-theme-font:major-latin;mso-bidi-font-family:Cambria;mso-bidi-theme-font:
major-latin'><span style='mso-list:Ignore'>6.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Cambria;mso-ascii-theme-font:major-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
major-fareast;mso-hansi-font-family:Cambria;mso-hansi-theme-font:major-latin'>其他问题排查</span></h2>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l15 level1 lfo19'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>1．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>查看</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>状态</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US>watch ipvsadm -ln</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l15 level1 lfo19'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>2．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>查看</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>配置</span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l15 level1 lfo19'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>3．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>查看</span><span
lang=EN-US>realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>的服务情况</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l15 level1 lfo19'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>4．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>抓包看</span><span
lang=EN-US>lvs</span><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>是否工作正常</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l15 level1 lfo19'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>5．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>抓包查看</span><span
lang=EN-US>realserver</span><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>是否工作正常</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l15 level1 lfo19'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>6．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>抓包查看客户段是否正常工作</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l15 level1 lfo19'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:Calibri;mso-fareast-theme-font:minor-latin;
mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
style='mso-list:Ignore'>7．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>查看系统日志</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:0cm;mso-char-indent-count:
0'><span lang=EN-US>tail –f /var/log/message</span></p>

<h1><![if !supportLists]><span lang=EN-US style='mso-fareast-font-family:Calibri;
mso-fareast-theme-font:minor-latin;mso-bidi-font-family:Calibri;mso-bidi-theme-font:
minor-latin'><span style='mso-list:Ignore'>7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:宋体;mso-ascii-font-family:
Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>参考资料</span></h1>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.ibm.com/developerworks/cn/linux/cluster/l-lvsinst/index.html">http://www.ibm.com/developerworks/cn/linux/cluster/l-lvsinst/index.html</a><span
class=MsoHyperlink><span style='mso-spacerun:yes'>&nbsp; </span></span></span><span
class=MsoHyperlink><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>入门</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.ultramonkey.org/papers/lvs_tutorial/html/">http://www.ultramonkey.org/papers/lvs_tutorial/html/</a><span
class=MsoHyperlink><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span class=MsoHyperlink><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>实践大全</span><span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.linuxvirtualserver.org/zh/">http://www.linuxvirtualserver.org/zh/</a><span
class=MsoHyperlink><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span class=MsoHyperlink><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>中文官网</span><span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a href="http://www.linuxvirtualserver.org">http://www.linuxvirtualserver.org</a><span
class=MsoHyperlink><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span></span><span
class=MsoHyperlink><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>英文官网</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.linuxvirtualserver.org/zh/lvs3.html">http://www.linuxvirtualserver.org/zh/lvs3.html</a><span
class=MsoHyperlink> LVS</span></span><span class=MsoHyperlink><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>集群中的</span><span lang=EN-US>IP</span></span><span
class=MsoHyperlink><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>负载均衡技术</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.linuxvirtualserver.org/zh/lvs4.html">http://www.linuxvirtualserver.org/zh/lvs4.html</a><span
class=MsoHyperlink><span style='mso-spacerun:yes'>&nbsp; </span>LVS</span></span><span
class=MsoHyperlink><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>集群的负载调度</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://ixdba.blog.51cto.com/2895551/552947">http://ixdba.blog.51cto.com/2895551/552947</a><span
class=MsoHyperlink><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span></span><span
class=MsoHyperlink><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>高手篇</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://hi.baidu.com/buttlewolf/item/8486d6fca03c434e932af2ea">http://hi.baidu.com/buttlewolf/item/8486d6fca03c434e932af2ea</a><span
class=MsoHyperlink><span style='mso-spacerun:yes'>&nbsp; </span></span></span><span
class=MsoHyperlink><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>几种配置方案</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://ixdba.blog.51cto.com/2895551/552947">http://ixdba.blog.51cto.com/2895551/552947</a><span
class=MsoHyperlink><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://blog.163.com/lucky_yjw/blog/static/6947908920120654622166/">http://blog.163.com/lucky_yjw/blog/static/6947908920120654622166/</a><span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>命令详解</span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://os.51cto.com/art/201202/319979.htm">http://os.51cto.com/art/201202/319979.htm</a><span
class=MsoHyperlink> <span style='mso-spacerun:yes'>&nbsp;</span></span>LVS</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>负责均衡教程</span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://linux.chinaunix.net/techdoc/net/2009/07/21/1125256.shtml">http://linux.chinaunix.net/techdoc/net/2009/07/21/1125256.shtml</a><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>LVS+Keepalived</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>实现高可用集群</span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://network.51cto.com/art/201004/196878.htm">http://network.51cto.com/art/201004/196878.htm</a><span
class=MsoHyperlink><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span></span><span
class=MsoHyperlink><span style='font-family:宋体;mso-ascii-font-family:Calibri;
mso-ascii-theme-font:minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:
minor-fareast;mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin'>三种转发机制的优缺点</span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://machael.blog.51cto.com/829462/211587/">http://machael.blog.51cto.com/829462/211587/</a><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>ipvsadm</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>命令参考，线上配置</span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.cnblogs.com/lgfeng/archive/2012/10/16/2726308.html"><span
style='color:windowtext;text-decoration:none;text-underline:none'>http://www.cnblogs.com/lgfeng/archive/2012/10/16/2726308.html</span></a><span
style='mso-spacerun:yes'>&nbsp; </span><a
href="http://www.cnblogs.com/lgfeng/archive/2012/10/16/2726308.html"><span
style='color:windowtext;text-decoration:none;text-underline:none'>LVS</span><span
lang=EN-US style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin;color:windowtext;
text-decoration:none;text-underline:none'><span lang=EN-US>负载均衡中</span></span><span
style='color:windowtext;text-decoration:none;text-underline:none'>arp_ignore</span><span
lang=EN-US style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin;color:windowtext;
text-decoration:none;text-underline:none'><span lang=EN-US>和</span></span><span
style='color:windowtext;text-decoration:none;text-underline:none'>arp_annonuce</span><span
lang=EN-US style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin;color:windowtext;
text-decoration:none;text-underline:none'><span lang=EN-US>参数配置的含义</span></span></a></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://www.doc88.com/p-239796984871.html">http://www.doc88.com/p-239796984871.html</a><span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-family:宋体;
mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>红帽</span><span lang=EN-US>lvs</span><span
style='font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;
mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
Calibri;mso-hansi-theme-font:minor-latin'>配置</span> <span style='font-family:
宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:minor-latin;mso-fareast-font-family:
宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Calibri;
mso-hansi-theme-font:minor-latin'>推荐</span></p>

</div>

</body>

</html>
