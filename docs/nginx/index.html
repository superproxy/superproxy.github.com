<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type  content="text/html; charset=utf-8" ><title>Nginx实践</title><!--[if gte mso 9]><xml><w:WordDocument><w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel><w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery><w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery><w:DocumentKind>DocumentNotSpecified</w:DocumentKind><w:DrawingGridVerticalSpacing>7.8 磅</w:DrawingGridVerticalSpacing><w:PunctuationKerning></w:PunctuationKerning><w:View>Web</w:View><w:Compatibility><w:DontGrowAutofit/><w:BalanceSingleByteDoubleByteWidth/><w:DoNotExpandShiftReturn/><w:UseFELayout/></w:Compatibility><w:Zoom>0</w:Zoom></w:WordDocument></xml><![endif]--><!--[if gte mso 9]><xml><w:LatentStyles DefLockedState="false"  DefUnhideWhenUsed="true"  DefSemiHidden="true"  DefQFormat="false"  DefPriority="99"  LatentStyleCount="260" >
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Normal" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="heading 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  QFormat="true"  Name="heading 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  QFormat="true"  Name="heading 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  QFormat="true"  Name="heading 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  QFormat="true"  Name="heading 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  QFormat="true"  Name="heading 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  QFormat="true"  Name="heading 7" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  QFormat="true"  Name="heading 8" ></w:LsdException>
<w:LsdException Locked="false"  Priority="9"  SemiHidden="false"  QFormat="true"  Name="heading 9" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 7" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 8" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index 9" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 7" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 8" ></w:LsdException>
<w:LsdException Locked="false"  Priority="39"  SemiHidden="false"  Name="toc 9" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Normal Indent" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="footnote text" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="annotation text" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="header" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="footer" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="index heading" ></w:LsdException>
<w:LsdException Locked="false"  Priority="35"  SemiHidden="false"  QFormat="true"  Name="caption" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="table of figures" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="envelope address" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="envelope return" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="footnote reference" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="annotation reference" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="line number" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="page number" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="endnote reference" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="endnote text" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="table of authorities" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="macro" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="toa heading" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Bullet" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Number" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Bullet 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Bullet 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Bullet 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Bullet 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Number 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Number 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Number 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Number 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="10"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Title" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Closing" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Signature" ></w:LsdException>
<w:LsdException Locked="false"  Priority="1"  SemiHidden="false"  Name="Default Paragraph Font" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Body Text" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Body Text Indent" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Continue" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Continue 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Continue 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Continue 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="List Continue 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Message Header" ></w:LsdException>
<w:LsdException Locked="false"  Priority="11"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Subtitle" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Salutation" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Date" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Body Text First Indent" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Body Text First Indent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Note Heading" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Body Text 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Body Text 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Body Text Indent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Body Text Indent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Block Text" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="Hyperlink" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="FollowedHyperlink" ></w:LsdException>
<w:LsdException Locked="false"  Priority="22"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Strong" ></w:LsdException>
<w:LsdException Locked="false"  Priority="20"  SemiHidden="false"  UnhideWhenUsed="false"  QFormat="true"  Name="Emphasis" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="Document Map" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Plain Text" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="E-mail Signature" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="Normal (Web)" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="HTML Acronym" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="HTML Address" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="HTML Cite" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="HTML Code" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="HTML Definition" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="HTML Keyboard" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="HTML Preformatted" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="HTML Sample" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="HTML Typewriter" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="HTML Variable" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="Normal Table" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="annotation subject" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="No List" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Simple 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Simple 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Simple 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Classic 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Classic 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Classic 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Classic 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Colorful 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Colorful 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Colorful 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Columns 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Columns 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Columns 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Columns 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Columns 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Grid 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Grid 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Grid 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Grid 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Grid 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Grid 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Grid 7" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Grid 8" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table List 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table List 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table List 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table List 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table List 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table List 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table List 7" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table List 8" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table 3D effects 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table 3D effects 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table 3D effects 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Contemporary" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Elegant" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Professional" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Subtle 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Subtle 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Web 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Web 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Web 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="99"  SemiHidden="false"  Name="Balloon Text" ></w:LsdException>
<w:LsdException Locked="false"  Priority="59"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Table Grid" ></w:LsdException>
<w:LsdException Locked="false"  Priority="0"  SemiHidden="false"  Name="Table Theme" ></w:LsdException>
<w:LsdException Locked="false"  Priority="60"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Shading" ></w:LsdException>
<w:LsdException Locked="false"  Priority="61"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light List" ></w:LsdException>
<w:LsdException Locked="false"  Priority="62"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Grid" ></w:LsdException>
<w:LsdException Locked="false"  Priority="63"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="64"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="65"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="66"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="67"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="68"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="69"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="70"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Dark List" ></w:LsdException>
<w:LsdException Locked="false"  Priority="71"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Shading" ></w:LsdException>
<w:LsdException Locked="false"  Priority="72"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful List" ></w:LsdException>
<w:LsdException Locked="false"  Priority="73"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Grid" ></w:LsdException>
<w:LsdException Locked="false"  Priority="60"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Shading Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="61"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light List Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="62"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Grid Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="63"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 1 Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="64"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 2 Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="65"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 1 Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="66"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 2 Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="67"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 1 Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="68"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 2 Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="69"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 3 Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="70"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Dark List Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="71"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Shading Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="72"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful List Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="73"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Grid Accent 1" ></w:LsdException>
<w:LsdException Locked="false"  Priority="60"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Shading Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="61"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light List Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="62"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Grid Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="63"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 1 Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="64"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 2 Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="65"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 1 Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="66"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 2 Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="67"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 1 Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="68"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 2 Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="69"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 3 Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="70"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Dark List Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="71"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Shading Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="72"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful List Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="73"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Grid Accent 2" ></w:LsdException>
<w:LsdException Locked="false"  Priority="60"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Shading Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="61"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light List Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="62"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Grid Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="63"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 1 Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="64"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 2 Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="65"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 1 Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="66"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 2 Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="67"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 1 Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="68"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 2 Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="69"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 3 Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="70"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Dark List Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="71"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Shading Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="72"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful List Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="73"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Grid Accent 3" ></w:LsdException>
<w:LsdException Locked="false"  Priority="60"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Shading Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="61"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light List Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="62"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Grid Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="63"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 1 Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="64"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 2 Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="65"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 1 Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="66"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 2 Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="67"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 1 Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="68"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 2 Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="69"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 3 Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="70"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Dark List Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="71"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Shading Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="72"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful List Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="73"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Grid Accent 4" ></w:LsdException>
<w:LsdException Locked="false"  Priority="60"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Shading Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="61"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light List Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="62"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Grid Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="63"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 1 Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="64"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 2 Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="65"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 1 Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="66"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 2 Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="67"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 1 Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="68"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 2 Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="69"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 3 Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="70"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Dark List Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="71"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Shading Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="72"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful List Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="73"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Grid Accent 5" ></w:LsdException>
<w:LsdException Locked="false"  Priority="60"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Shading Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="61"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light List Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="62"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Light Grid Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="63"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 1 Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="64"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Shading 2 Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="65"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 1 Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="66"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium List 2 Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="67"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 1 Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="68"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 2 Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="69"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Medium Grid 3 Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="70"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Dark List Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="71"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Shading Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="72"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful List Accent 6" ></w:LsdException>
<w:LsdException Locked="false"  Priority="73"  SemiHidden="false"  UnhideWhenUsed="false"  Name="Colorful Grid Accent 6" ></w:LsdException>
</w:LatentStyles></xml><![endif]--><style>
@font-face{
font-family:"Times New Roman";
}

@font-face{
font-family:"宋体";
}

@font-face{
font-family:"Symbol";
}

@font-face{
font-family:"Courier New";
}

@font-face{
font-family:"Wingdings";
}

@font-face{
font-family:"Cambria";
}

@font-face{
font-family:"Arial";
}

@font-face{
font-family:"Helvetica";
}

@font-face{
font-family:"微软雅黑";
}

@font-face{
font-family:"Tahoma";
}

@font-face{
font-family:"Lucida Console";
}

@font-face{
font-family:"Consolas";
}

@font-face{
font-family:"Verdana";
}

@font-face{
font-family:"Calibri";
}

@list l0:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l0:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l0:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l0:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l0:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l0:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l0:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l0:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l0:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l1:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l1:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l1:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l1:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l1:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l1:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l1:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l1:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l1:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l2:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F0B7;
mso-level-tab-stop:36.0000pt;
mso-level-number-position:left;
margin-left:36.0000pt; text-indent:-18.0000pt; font-family:Symbol; font-size:10.0000pt; }

@list l2:level2{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\6F;
mso-level-tab-stop:72.0000pt;
mso-level-number-position:left;
margin-left:72.0000pt; text-indent:-18.0000pt; font-family:'Courier New'; font-size:10.0000pt; }

@list l2:level3{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F0A7;
mso-level-tab-stop:108.0000pt;
mso-level-number-position:left;
margin-left:108.0000pt; text-indent:-18.0000pt; font-family:Wingdings; font-size:10.0000pt; }

@list l2:level4{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F0A7;
mso-level-tab-stop:144.0000pt;
mso-level-number-position:left;
margin-left:144.0000pt; text-indent:-18.0000pt; font-family:Wingdings; font-size:10.0000pt; }

@list l2:level5{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F0A7;
mso-level-tab-stop:180.0000pt;
mso-level-number-position:left;
margin-left:180.0000pt; text-indent:-18.0000pt; font-family:Wingdings; font-size:10.0000pt; }

@list l2:level6{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F0A7;
mso-level-tab-stop:216.0000pt;
mso-level-number-position:left;
margin-left:216.0000pt; text-indent:-18.0000pt; font-family:Wingdings; font-size:10.0000pt; }

@list l2:level7{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F0A7;
mso-level-tab-stop:252.0000pt;
mso-level-number-position:left;
margin-left:252.0000pt; text-indent:-18.0000pt; font-family:Wingdings; font-size:10.0000pt; }

@list l2:level8{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F0A7;
mso-level-tab-stop:288.0000pt;
mso-level-number-position:left;
margin-left:288.0000pt; text-indent:-18.0000pt; font-family:Wingdings; font-size:10.0000pt; }

@list l2:level9{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F0A7;
mso-level-tab-stop:324.0000pt;
mso-level-number-position:left;
margin-left:324.0000pt; text-indent:-18.0000pt; font-family:Wingdings; font-size:10.0000pt; }

@list l3:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l3:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l3:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l3:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l3:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l3:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l3:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l3:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l3:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l4:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1．";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l4:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l4:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l4:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l4:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l4:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l4:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l4:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l4:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l5:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l5:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l5:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l5:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l5:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l5:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l5:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l5:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l5:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l6:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l6:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l6:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l6:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l6:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l6:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l6:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l6:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l6:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l7:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l7:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l7:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l7:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l7:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l7:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l7:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l7:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l7:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l8:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l8:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l8:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l8:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l8:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l8:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l8:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l8:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l8:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l9:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l9:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l9:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l9:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l9:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l9:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l9:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l9:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l9:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l10:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:30.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l10:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:54.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l10:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:75.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l10:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:96.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l10:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:117.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l10:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:138.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l10:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:159.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l10:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:180.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l10:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:201.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l11:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:21.6000pt; text-indent:-21.6000pt; font-family:'Times New Roman'; }

@list l11:level2{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:28.8000pt; text-indent:-28.8000pt; font-family:'Times New Roman'; }

@list l11:level3{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:36.0000pt; text-indent:-36.0000pt; font-family:'Times New Roman'; }

@list l11:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:43.2000pt; text-indent:-43.2000pt; font-family:'Times New Roman'; }

@list l11:level5{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:50.4000pt; text-indent:-50.4000pt; font-family:'Times New Roman'; }

@list l11:level6{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5.%6";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:57.6000pt; text-indent:-57.6000pt; font-family:'Times New Roman'; }

@list l11:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5.%6.%7";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:64.8000pt; text-indent:-64.8000pt; font-family:'Times New Roman'; }

@list l11:level8{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5.%6.%7.%8";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:72.0000pt; text-indent:-72.0000pt; font-family:'Times New Roman'; }

@list l11:level9{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5.%6.%7.%8.%9";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:79.2000pt; text-indent:-79.2000pt; font-family:'Times New Roman'; }

@list l12:level1{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:36.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l12:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:60.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l12:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:81.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l12:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:102.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l12:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:123.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l12:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:144.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l12:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:165.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l12:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:186.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l12:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:207.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l13:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:39.0000pt;
mso-level-number-position:left;
margin-left:39.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l14:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:81.0000pt;
mso-level-number-position:left;
margin-left:81.0000pt; text-indent:-18.0000pt; font-family:Wingdings; }

@list l15:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:18.0000pt;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l16:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:18.0000pt;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:Wingdings; }

@list l17:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:60.0000pt;
mso-level-number-position:left;
margin-left:60.0000pt; text-indent:-18.0000pt; font-family:Wingdings; }

@list l18:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:60.0000pt;
mso-level-number-position:left;
margin-left:60.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l19:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:39.0000pt;
mso-level-number-position:left;
margin-left:39.0000pt; text-indent:-18.0000pt; font-family:Wingdings; }

@list l20:level1{
mso-level-number-format:bullet;
mso-level-suffix:tab;
mso-level-text:\F06C;
mso-level-tab-stop:102.0000pt;
mso-level-number-position:left;
margin-left:102.0000pt; text-indent:-18.0000pt; font-family:Wingdings; }

@list l21:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:81.0000pt;
mso-level-number-position:left;
margin-left:81.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l22:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:102.0000pt;
mso-level-number-position:left;
margin-left:102.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l23:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1．";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l23:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l23:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l23:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l23:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l23:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l23:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l23:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l23:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l24:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:36.0000pt;
mso-level-number-position:left;
margin-left:36.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l24:level2{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%2.";
mso-level-tab-stop:72.0000pt;
mso-level-number-position:left;
margin-left:72.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l24:level3{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:108.0000pt;
mso-level-number-position:left;
margin-left:108.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l24:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:144.0000pt;
mso-level-number-position:left;
margin-left:144.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l24:level5{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%5.";
mso-level-tab-stop:180.0000pt;
mso-level-number-position:left;
margin-left:180.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l24:level6{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:216.0000pt;
mso-level-number-position:left;
margin-left:216.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l24:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:252.0000pt;
mso-level-number-position:left;
margin-left:252.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l24:level8{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%8.";
mso-level-tab-stop:288.0000pt;
mso-level-number-position:left;
margin-left:288.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l24:level9{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:324.0000pt;
mso-level-number-position:left;
margin-left:324.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l25:level1{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:36.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l25:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:60.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l25:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:81.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l25:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:102.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l25:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:123.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l25:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:144.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l25:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:165.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l25:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:186.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l25:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:207.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l26:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:21.2500pt; text-indent:-21.2500pt; font-family:'Times New Roman'; }

@list l26:level2{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:49.6000pt; text-indent:-28.3500pt; font-family:'Times New Roman'; }

@list l26:level3{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:70.9000pt; text-indent:-28.3500pt; font-family:'Times New Roman'; }

@list l26:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:99.2000pt; text-indent:-35.4000pt; font-family:'Times New Roman'; }

@list l26:level5{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:127.5500pt; text-indent:-42.5000pt; font-family:'Times New Roman'; }

@list l26:level6{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5.%6";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:163.0000pt; text-indent:-56.7000pt; font-family:'Times New Roman'; }

@list l26:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5.%6.%7";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:191.3500pt; text-indent:-63.8000pt; font-family:'Times New Roman'; }

@list l26:level8{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5.%6.%7.%8";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:219.7000pt; text-indent:-70.9000pt; font-family:'Times New Roman'; }

@list l26:level9{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.%2.%3.%4.%5.%6.%7.%8.%9";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:255.1000pt; text-indent:-85.0000pt; font-family:'Times New Roman'; }

@list l27:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l27:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l27:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l27:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l27:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l27:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l27:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l27:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l27:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l28:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l28:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l28:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l28:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l28:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l28:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l28:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l28:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l28:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l29:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l29:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l29:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l29:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l29:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l29:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l29:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l29:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l29:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l30:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l30:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l30:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l30:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l30:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l30:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l30:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l30:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l30:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l31:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l31:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l31:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l31:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l31:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l31:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l31:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l31:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l31:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l32:level1{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%1.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:18.0000pt; text-indent:-18.0000pt; font-family:'Times New Roman'; }

@list l32:level2{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%2)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:42.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l32:level3{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%3.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:63.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l32:level4{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%4.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:84.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l32:level5{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%5)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:105.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l32:level6{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%6.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:126.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l32:level7{
mso-level-number-format:decimal;
mso-level-suffix:tab;
mso-level-text:"%7.";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:147.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l32:level8{
mso-level-number-format:alpha-lower;
mso-level-suffix:tab;
mso-level-text:"%8)";
mso-level-tab-stop:none;
mso-level-number-position:left;
margin-left:168.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

@list l32:level9{
mso-level-number-format:lower-roman;
mso-level-suffix:tab;
mso-level-text:"%9.";
mso-level-tab-stop:none;
mso-level-number-position:right;
margin-left:189.0000pt; text-indent:-21.0000pt; font-family:'Times New Roman'; }

p.MsoNormal{
mso-style-name:正文;
mso-style-parent:"";
margin:0pt;
margin-bottom:.0001pt;
font-family:宋体;
font-size:12.0000pt;
}

h1{
mso-style-name:"标题 1";
mso-style-next:正文;
margin-top:17.0000pt;
margin-bottom:16.5000pt;
margin-left:21.6000pt;
text-indent:-21.6000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:1;
line-height:240%;
font-family:宋体;
font-weight:bold;
font-size:22.0000pt;
mso-font-kerning:22.0000pt;
}

h2{
mso-style-name:"标题 2";
mso-style-noshow:yes;
mso-style-next:正文;
margin-top:13.0000pt;
margin-bottom:13.0000pt;
margin-left:28.8000pt;
text-indent:-28.8000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:2;
line-height:173%;
font-family:Cambria;
mso-fareast-font-family:宋体;
mso-bidi-font-family:宋体;
font-weight:bold;
font-size:16.0000pt;
}

h3{
mso-style-name:"标题 3";
mso-style-noshow:yes;
mso-style-next:正文;
margin-top:13.0000pt;
margin-bottom:13.0000pt;
margin-left:36.0000pt;
text-indent:-36.0000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:3;
line-height:173%;
font-family:宋体;
font-weight:bold;
font-size:16.0000pt;
}

h4{
mso-style-name:"标题 4";
mso-style-noshow:yes;
mso-style-next:正文;
margin-top:14.0000pt;
margin-bottom:14.5000pt;
margin-left:43.2000pt;
text-indent:-43.2000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:4;
line-height:156%;
font-family:Cambria;
mso-fareast-font-family:宋体;
mso-bidi-font-family:宋体;
font-weight:bold;
font-size:14.0000pt;
}

h5{
mso-style-name:"标题 5";
mso-style-noshow:yes;
mso-style-next:正文;
margin-top:14.0000pt;
margin-bottom:14.5000pt;
margin-left:50.4000pt;
text-indent:-50.4000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:5;
line-height:156%;
font-family:宋体;
font-weight:bold;
font-size:14.0000pt;
}

h6{
mso-style-name:"标题 6";
mso-style-noshow:yes;
mso-style-next:正文;
margin-top:12.0000pt;
margin-bottom:3.2000pt;
margin-left:57.6000pt;
text-indent:-57.6000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:6;
line-height:133%;
font-family:Cambria;
mso-fareast-font-family:宋体;
mso-bidi-font-family:宋体;
font-weight:bold;
font-size:12.0000pt;
}

p.MsoHeading7{
mso-style-name:"标题 7";
mso-style-noshow:yes;
mso-style-next:正文;
margin-top:12.0000pt;
margin-bottom:3.2000pt;
margin-left:64.8000pt;
text-indent:-64.8000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:7;
line-height:133%;
font-family:宋体;
font-weight:bold;
font-size:12.0000pt;
}

p.MsoHeading8{
mso-style-name:"标题 8";
mso-style-noshow:yes;
mso-style-next:正文;
margin-top:12.0000pt;
margin-bottom:3.2000pt;
margin-left:72.0000pt;
text-indent:-72.0000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:8;
line-height:133%;
font-family:Cambria;
mso-fareast-font-family:宋体;
mso-bidi-font-family:宋体;
font-size:12.0000pt;
}

p.Msoheading9{
mso-style-name:"标题 9";
mso-style-noshow:yes;
mso-style-next:正文;
margin-top:12.0000pt;
margin-bottom:3.2000pt;
margin-left:79.2000pt;
text-indent:-79.2000pt;
page-break-after:avoid;
mso-pagination:lines-together;
mso-outline-level:9;
line-height:133%;
font-family:Cambria;
mso-fareast-font-family:宋体;
mso-bidi-font-family:宋体;
font-size:10.5000pt;
}

span.10{
font-family:'Times New Roman';
}

span.15{
font-family:'Times New Roman';
}

span.16{
font-family:'Times New Roman';
}

span.17{
font-family:Cambria;
mso-fareast-font-family:宋体;
font-weight:bold;
font-size:16.0000pt;
}

span.18{
font-family:宋体;
font-size:9.0000pt;
}

span.19{
font-family:宋体;
font-weight:bold;
font-size:22.0000pt;
mso-font-kerning:22.0000pt;
}

span.20{
font-family:宋体;
font-size:12.0000pt;
}

span.21{
font-family:'Times New Roman';
color:rgb(128,0,128);
text-decoration:underline;
text-underline:single;
}

span.22{
font-family:'Times New Roman';
}

span.23{
font-family:'Times New Roman';
}

span.24{
font-family:'Times New Roman';
}

span.25{
font-family:'Times New Roman';
}

span.26{
font-family:Cambria;
mso-fareast-font-family:宋体;
font-weight:bold;
font-size:14.0000pt;
}

span.27{
font-family:'Times New Roman';
}

span.28{
font-family:宋体;
font-size:9.0000pt;
}

span.29{
font-family:'Times New Roman';
}

span.30{
font-family:'Times New Roman';
}

span.31{
font-family:'Times New Roman';
}

span.32{
font-family:'Times New Roman';
}

span.33{
font-family:'Times New Roman';
}

span.34{
font-family:'Times New Roman';
}

span.35{
font-family:'Times New Roman';
}

span.36{
font-family:'Times New Roman';
font-weight:bold;
}

span.37{
font-family:宋体;
font-weight:bold;
font-size:16.0000pt;
}

span.38{
font-family:'Times New Roman';
}

span.39{
font-family:Cambria;
mso-fareast-font-family:宋体;
}

span.40{
font-family:'Times New Roman';
}

span.41{
font-family:'Times New Roman';
color:rgb(0,0,255);
text-decoration:underline;
text-underline:single;
}

span.42{
font-family:'Times New Roman';
}

span.43{
font-family:Cambria;
mso-fareast-font-family:宋体;
font-weight:bold;
font-size:16.0000pt;
}

span.44{
font-family:宋体;
font-size:9.0000pt;
}

span.45{
font-family:Cambria;
mso-fareast-font-family:宋体;
font-size:12.0000pt;
}

span.46{
font-family:'Times New Roman';
}

span.47{
font-family:'Times New Roman';
}

span.48{
font-family:'Times New Roman';
}

span.49{
font-family:'Times New Roman';
}

span.50{
font-family:宋体;
font-size:12.0000pt;
}

span.51{
font-family:'Times New Roman';
}

span.52{
font-family:'Times New Roman';
}

span.53{
font-family:宋体;
font-weight:bold;
font-size:12.0000pt;
}

span.54{
font-family:'Times New Roman';
}

span.55{
font-family:宋体;
font-weight:bold;
font-size:14.0000pt;
}

span.56{
font-family:'Times New Roman';
}

span.57{
font-family:'Times New Roman';
}

span.58{
font-family:'Times New Roman';
}

span.59{
font-family:'Times New Roman';
}

span.60{
font-family:Cambria;
mso-fareast-font-family:宋体;
font-weight:bold;
font-size:12.0000pt;
}

span.61{
font-family:宋体;
font-size:9.0000pt;
}

span.62{
font-family:'Times New Roman';
}

span.63{
font-family:'Times New Roman';
}

span.64{
font-family:'Times New Roman';
}

span.65{
font-family:Arial;
mso-fareast-font-family:宋体;
display:none;
mso-hide:all;
font-size:8.0000pt;
}

span.66{
font-family:Arial;
mso-fareast-font-family:宋体;
display:none;
mso-hide:all;
font-size:8.0000pt;
}

span.67{
font-family:'Times New Roman';
}

p.MsoFooter{
mso-style-name:页脚;
mso-style-noshow:yes;
margin:0pt;
margin-bottom:.0001pt;
layout-grid-mode:char;
font-family:宋体;
font-size:9.0000pt;
}

p.MsoDocumentMap{
mso-style-name:文档结构图;
mso-style-noshow:yes;
margin:0pt;
margin-bottom:.0001pt;
font-family:宋体;
font-size:9.0000pt;
}

p.MsoHeader{
mso-style-name:页眉;
mso-style-noshow:yes;
margin:0pt;
margin-bottom:.0001pt;
border-bottom:0.7500pt solid windowtext;
mso-border-bottom-alt:0.7500pt solid windowtext;
padding:0pt 0pt 1pt 0pt ;
layout-grid-mode:char;
text-align:center;
font-family:宋体;
font-size:9.0000pt;
}

p.MsoAcetate{
mso-style-name:批注框文本;
mso-style-noshow:yes;
margin:0pt;
margin-bottom:.0001pt;
font-family:宋体;
font-size:9.0000pt;
}

p.pre{
mso-style-name:"HTML 预设格式";
mso-style-noshow:yes;
margin:0pt;
margin-bottom:.0001pt;
font-family:宋体;
font-size:12.0000pt;
}

p.NewStyle73{
mso-style-name:"HTML Bottom of Form";
mso-style-noshow:yes;
mso-style-next:正文;
margin:0pt;
margin-bottom:.0001pt;
border-top:0.7500pt solid windowtext;
mso-border-top-alt:0.7500pt solid windowtext;
padding:1pt 0pt 0pt 0pt ;
text-align:center;
font-family:Arial;
mso-fareast-font-family:宋体;
display:none;
mso-hide:all;
font-size:8.0000pt;
}

p.p{
mso-style-name:"普通\(网站\)";
mso-style-noshow:yes;
margin-top:5.0000pt;
margin-bottom:5.0000pt;
mso-margin-top-alt:auto;
mso-margin-bottom-alt:auto;
font-family:宋体;
font-size:12.0000pt;
}

p.MsoTitle{
mso-style-name:标题;
mso-style-next:正文;
margin-top:12.0000pt;
margin-bottom:3.0000pt;
text-align:center;
mso-outline-level:1;
font-family:Cambria;
mso-fareast-font-family:宋体;
mso-bidi-font-family:宋体;
font-weight:bold;
font-size:16.0000pt;
}

p.NewStyle76{
mso-style-name:"List Paragraph";
margin:0pt;
margin-bottom:.0001pt;
text-indent:21.0000pt;
mso-char-indent-count:2.0000;
font-family:宋体;
font-size:12.0000pt;
}

p.NewStyle77{
mso-style-name:tdep;
margin-top:5.0000pt;
margin-bottom:5.0000pt;
mso-margin-top-alt:auto;
mso-margin-bottom-alt:auto;
font-family:宋体;
font-size:12.0000pt;
}

p.NewStyle78{
mso-style-name:fc081;
margin-top:5.0000pt;
margin-bottom:5.0000pt;
mso-margin-top-alt:auto;
mso-margin-bottom-alt:auto;
font-family:宋体;
font-size:12.0000pt;
}

p.NewStyle79{
mso-style-name:"HTML Top of Form";
mso-style-noshow:yes;
mso-style-next:正文;
margin:0pt;
margin-bottom:.0001pt;
border-bottom:0.7500pt solid windowtext;
mso-border-bottom-alt:0.7500pt solid windowtext;
padding:0pt 0pt 1pt 0pt ;
text-align:center;
font-family:Arial;
mso-fareast-font-family:宋体;
display:none;
mso-hide:all;
font-size:8.0000pt;
}

span.msoIns{
mso-style-type:export-only;
mso-style-name:"";
text-decoration:underline;
text-underline:single;
color:blue;
}

span.msoDel{
mso-style-type:export-only;
mso-style-name:"";
text-decoration:line-through;
color:red;
}

table.MsoNormalTable{
mso-style-name:普通表格;
mso-style-parent:"";
mso-style-noshow:yes;
mso-tstyle-rowband-size:0;
mso-tstyle-colband-size:0;
mso-padding-alt:0.0000pt 5.4000pt 0.0000pt 5.4000pt;
mso-para-margin:0pt;
mso-para-margin-bottom:.0001pt;
mso-pagination:widow-orphan;
font-family:'Times New Roman';
font-size:10.0000pt;
mso-ansi-language:#0400;
mso-fareast-language:#0400;
mso-bidi-language:#0400;
}

table.MsoTableGrid{
mso-style-name:网格型;
mso-tstyle-rowband-size:0;
mso-tstyle-colband-size:0;
mso-padding-alt:0.0000pt 5.4000pt 0.0000pt 5.4000pt;
mso-border-top-alt:0.5000pt solid windowtext;
mso-border-left-alt:0.5000pt solid windowtext;
mso-border-bottom-alt:0.5000pt solid windowtext;
mso-border-right-alt:0.5000pt solid windowtext;
mso-border-insideh:0.5000pt solid windowtext;
mso-border-insidev:0.5000pt solid windowtext;
mso-para-margin:0pt;
mso-para-margin-bottom:.0001pt;
mso-pagination:widow-orphan;
font-family:'Times New Roman';
font-size:10.0000pt;
mso-ansi-language:#0400;
mso-fareast-language:#0400;
mso-bidi-language:#0400;
}
@page{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}@page Section0{
margin-top:72.0000pt;
margin-bottom:72.0000pt;
margin-left:90.0000pt;
margin-right:90.0000pt;
size:595.3000pt 841.9000pt;
layout-grid:15.6000pt;
}
div.Section0{page:Section0;}</style></head><body style="tab-interval:21pt; text-justify-trim:punctuation; " ><!--StartFragment--><div class="Section0"  style="layout-grid:15.6000pt; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:26.0000pt; mso-font-kerning:0.0000pt; " >Nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:26.0000pt; mso-font-kerning:0.0000pt; " >实践</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:26.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h1 style="mso-list:l11 level1 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >介绍</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h1><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >功能</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;[engine&nbsp;x]是</span><span><a href="http://sysoev.ru/en/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >Igor&nbsp;Sysoev</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >编写的一个HTTP和反向代理服务器，另外它也可以作为邮件代理服务器。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >优势</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=NewStyle76  style="margin-bottom:9.0000pt; margin-left:21.2500pt; text-indent:-21.2500pt; mso-char-indent-count:0.0000; line-height:21.0000pt; mso-list:l26 level1 lfo2; " ><![if !supportLists]><span style="font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >可以高并发连接：官方测试Nginx能够支撑5万并发连接，在实际生产环境中可支持2～4万并发连接数。</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-bottom:9.0000pt; margin-left:21.2500pt; text-indent:-21.2500pt; mso-char-indent-count:0.0000; line-height:21.0000pt; mso-list:l26 level1 lfo2; " ><![if !supportLists]><span style="font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >内存消耗少：同等硬件环境下，Nginx的处理能力相当于Apache的5～10倍。</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-bottom:9.0000pt; margin-left:21.2500pt; text-indent:-21.2500pt; mso-char-indent-count:0.0000; line-height:21.0000pt; mso-list:l26 level1 lfo2; " ><![if !supportLists]><span style="font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Nginx作为WEB服务器，Nginx处理静态文件、索引文件、自动索引的效率非常高。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-bottom:9.0000pt; margin-left:21.2500pt; text-indent:-21.2500pt; mso-char-indent-count:0.0000; line-height:21.0000pt; mso-list:l26 level1 lfo2; " ><![if !supportLists]><span style="font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Nginx作为代理服务器，Nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >可以实现无缓存的反向代理，提高网站的性能</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-bottom:9.0000pt; margin-left:21.2500pt; text-indent:-21.2500pt; mso-char-indent-count:0.0000; line-height:21.0000pt; mso-list:l26 level1 lfo2; " ><![if !supportLists]><span style="font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Nginx作为负载均衡服务器，</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >内部可以支持</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >PHP、也可以支持HTTP代理服务器对外进行服务，同时还支持简单的容错和利用算法进行负载</span><span style="mso-spacerun:'yes'; font-family:Helvetica; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-bottom:9.0000pt; margin-left:21.2500pt; text-indent:-21.2500pt; mso-char-indent-count:0.0000; line-height:21.0000pt; mso-list:l26 level1 lfo2; " ><![if !supportLists]><span style="font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >6<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >成本低廉：Nginx为开源软件，采用的是2-clause&nbsp;BSD-like协议，可以免费使用，并可用于商业用途。该协议衍生自BSD协议，但删掉了其中的&#8220;不可以用开源代码的作者/机构名字和原来产品的名字做市场推广&#8221;。</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:21.2500pt; text-indent:-21.2500pt; mso-char-indent-count:0.0000; mso-list:l26 level1 lfo2; " ><![if !supportLists]><span style="font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >7<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(51,51,51); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >其他：配置文件简单，支持Rewrite重写规则，内置的健康检查功能，节省带宽，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >稳定性高，支持热部署。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >缺点</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >功能没有apache支持的多，没有很多额外的功能。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >不支持cgi,仅支持fastcgi方式（fastcgi通过监听tcp接受远程请求）。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >代理方面，不支持Https代理</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h1 style="mso-list:l11 level1 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >成功案例</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h1><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >nginx<font face="宋体" >客户</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >它已经在众多流量很大的俄罗斯网站上使用了很长时间，这些网站包括</span><span><a href="http://www.yandex.ru/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >Yandex</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >、</span><span><a href="http://www.mail.ru/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >Mail.Ru</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >、</span><span><a href="http://www.vkontakte.ru/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >VKontakte</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，以及</span><span><a href="http://www.rambler.ru/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >Rambler</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >。据Netcraft统计，在2012年8月份，</span><span><a href="http://news.netcraft.com/archives/2012/08/02/august-2012-web-server-survey.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >世界上最繁忙的网站中有<font face="Times New Roman" >11.48%</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >使用Nginx作为其服务器或者代理服务器。部分成功案例请见：&nbsp;</span><span><a href="https://signup.netflix.com/openconnect/software" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >Netflix</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，&nbsp;</span><span><a href="http://barry.wordpress.com/2008/04/28/load-balancer-update/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >Wordpress.com</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，&nbsp;</span><span><a href="http://blog.fastmail.fm/2007/01/04/webimappop-frontend-proxies-changed-to-nginx/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >FastMail.FM</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >国内客户：金山、新浪、迅雷</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >nginx<font face="宋体" >的修改版</font><font face="Cambria" >tengine</font><font face="宋体" >的客户</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >天猫、淘宝、支付宝、</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >51cto、腾讯、土豆、京东、酷六、PPLIVE、开源中国、凤凰网、</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Internet&nbsp;Archive</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >等&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >数据来源：&nbsp;</span><span><a href="http://tengine.taobao.org/download/tengine@alibaba.pdf" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://tengine.taobao.org/download/tengine@alibaba.pdf</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h1 style="mso-list:l11 level1 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:normal; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >3<span>&nbsp;</span></span></span><![endif]><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:normal; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >入门篇</span><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:normal; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h1><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:normal; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >3.1<span>&nbsp;</span></span></span><![endif]><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:normal; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >windows</span><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:normal; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >下安装启动</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >本文使用windows版本</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >，总共三个步骤，下载，解压、启动。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l7 level1 lfo3; " ><![if !supportLists]><span style="font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >下载</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://www.nginx.org/download/nginx-1.1.2.zip" ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://www.nginx.org/download/nginx-1.1.2.zip</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l7 level1 lfo3; " ><![if !supportLists]><span style="font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >解压</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >解压到目录</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >D:\nginx-1.1.2</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l7 level1 lfo3; " ><![if !supportLists]><span style="font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >启动</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >双击nginx.exe就可以了，也可以通过命令行执行start&nbsp;nginx.exe。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="75"  src="nginx.files/nginx1730.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >如果在命令行</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >中，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >执行nginx.exe，就会进入监听状态。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l7 level1 lfo3; " ><![if !supportLists]><span style="font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >访问</span><span><a href="http://127.0.0.1/" ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://127.0.0.1/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >就可以看到了。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l7 level1 lfo3; " ><![if !supportLists]><span style="font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >其他命令：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >停止命令</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;-s&nbsp;stop。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >如果执行了多次ngin.exe，只能关闭其中的一个。D:\nginx-1.1.2\logs\nginx.pid&nbsp;&nbsp;这个文件记录可以</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >最后一个打开的</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >进程编号。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >更多可以参考</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="#nginxwindows" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; " >http://tengine.taobao.org/book/appendix_c.html#nginxwindows</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >linux<font face="宋体" >下安装启动</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在centos环境下</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l8 level1 lfo4; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >yum&nbsp;install&nbsp;nginx&nbsp;&nbsp;&nbsp;&nbsp;#安装</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l8 level1 lfo4; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >service&nbsp;nginx&nbsp;&nbsp;start&nbsp;&nbsp;#启动</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l8 level1 lfo4; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >然后客户端通过浏览器访问&nbsp;</span><span><a href="http://127.0.0.1/" ><span class="41"  style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://127.0.0.1/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;就可以了</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:0.0000pt; mso-char-indent-count:0.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:0.0000pt; mso-char-indent-count:0.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >查看安装文件</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >[root@ippdev5&nbsp;~]#&nbsp;find&nbsp;/&nbsp;-name&nbsp;nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/usr/share/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/usr/sbin/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/var/log/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;#日志位置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/var/lib/yum/repos/x86_64/6/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/var/cache/yum/x86_64/6/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/var/cache/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/etc/logrotate.d/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/etc/rc.d/init.d/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;#启动文件</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/etc/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/etc/sysconfig/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span><a href="#nginxlinux" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; " >http://tengine.taobao.org/book/appendix_c.html#nginxlinux</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >nginx<font face="宋体" >工作模型</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx启动时会启动一个master的主进程，然后是从进程。从进程的数目和配置相关，默认是一个。master进程接受用户的操作，然后把相关信号在传递给个个worker进程。&nbsp;连接请求由work进程负责处理。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="340"  src="nginx.files/nginx2743.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料&nbsp;</span><span><a href="#id1" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://tengine.taobao.org/book/chapter_02.html#id1</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >配置</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >配置是个技术活</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >，首先要知道配置文件的路径和配置文件的规则。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.4.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >配置文件路径</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l3 level1 lfo5; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >windwos配置文件：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx-1.1.2\conf\nginx.conf</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l3 level1 lfo5; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >linux环境，配置文件路径</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置一般的路径：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;/etc/nginx/nginx.conf</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >yum&nbsp;install安装后，配置文件在</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/etc/nginx/nginx.conf</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;和&nbsp;conf.d下面。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.4.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >配置文件格式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置文件分为单项配置和组合配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l1 level1 lfo6; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >单项配置格式：&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;指令&nbsp;[指令选项]&nbsp;值;(包括分号)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l1 level1 lfo6; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >组合配置格式：&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;指令&nbsp;&nbsp;[值]&nbsp;&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;（单项配置或者多项配置）*</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注意：官方没有这么描述，绝大部分的规则是这两种。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx常用的三个组合配置&nbsp;http、server、location,注意它们是嵌套关系。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在配置的时候一定分清楚配置项是在哪个组合配置中配置的，一般指令参考中会指明是哪个指令（正式的说法叫指令上下文），</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(255,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >这三个层次关系一定要记住</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.4.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >默认配置详解</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过下面这个命令可以，查看nginx的有效配置（过滤了注释和空行）</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >grep&nbsp;-v&nbsp;'^\s*#'&nbsp;&nbsp;/etc/nginx/nginx.conf&nbsp;|&nbsp;grep&nbsp;-v&nbsp;"^$"</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >精简配置如下</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >worker_processes&nbsp;&nbsp;1;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;#使用一个进程处理http请求</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >events&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;worker_connections&nbsp;&nbsp;1024;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;#每个进程处理1024个连接</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >http&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mime.types;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;mime文件类型的定义</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;default_type&nbsp;&nbsp;application/octet-stream;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;#默认的文件类型&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;sendfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;支持文件发送</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;keepalive_timeout&nbsp;&nbsp;65;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;连接保持时间65秒</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#定义一个服务器</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;监听80端口</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;localhost;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;服务器的名称</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;url&nbsp;匹配&nbsp;/&nbsp;执行下面的规则</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;html;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;web的根目录，相对目录是在nginx下面</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;&nbsp;index.html&nbsp;index.htm;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;#&nbsp;index首页查找顺序，先找index.html,找不到找index.htm</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error_page&nbsp;&nbsp;&nbsp;500&nbsp;502&nbsp;503&nbsp;504&nbsp;&nbsp;/50x.html;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;#&nbsp;错误码是&nbsp;500等的时候，匹配50x.html页面</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;=&nbsp;/50x.html&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;html;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;50x.html所在的根目录</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >小实验</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;nginx命令</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l5 level1 lfo7; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >帮助命令</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >h&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l5 level1 lfo7; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >查看版本和支持的模块</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;&#8211;V</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="47"  src="nginx.files/nginx4332.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l5 level1 lfo7; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >优雅重启命令，等待work进程处理完请求</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >s&nbsp;reload</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l5 level1 lfo7; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >测试配置，每次修改配置后测试一下</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >t&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >其他命令可以通过帮助查看</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;查看日志</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >server&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/spool/vhost/data/$host;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >access_log&nbsp;&nbsp;/var/log/nginx/log/host.access.log&nbsp;;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >access_log</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >指令说明</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在/varlog/nginx/log/</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;host.access.log</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;有访问日志</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >查看nginx状态</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location&nbsp;/status&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;#定义路径</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;stub_status&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;#开启监控</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置完后重新启动</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Nginx后我们可以通过浏览器访问http://localhost/status&nbsp;查看</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="395"  height="188"  src="nginx.files/nginx4699.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Active&nbsp;connections&nbsp;&nbsp;&nbsp;&nbsp;//当前&nbsp;Nginx&nbsp;正处理的活动连接数。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >server&nbsp;accepts&nbsp;handled&nbsp;requests&nbsp;//总共处理了8&nbsp;个连接&nbsp;,&nbsp;成功创建&nbsp;8&nbsp;次握手,总共处理了500个请求。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Reading&nbsp;//nginx&nbsp;读取到客户端的&nbsp;Header&nbsp;信息数。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Writing&nbsp;//nginx&nbsp;返回给客户端的&nbsp;Header&nbsp;信息数。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Waiting&nbsp;//开启&nbsp;keep-alive&nbsp;的情况下，这个值等于&nbsp;active&nbsp;-&nbsp;(reading&nbsp;+&nbsp;writing)，意思就是&nbsp;Nginx&nbsp;已经处理完正在等候下一次请求指令的驻留连接</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过命令查看</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >定制目录&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#root&nbsp;&nbsp;&nbsp;html;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;d:\myweb;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;#修改root的根目录</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;&nbsp;index.html&nbsp;index.htm;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;#修改首页查找的顺序</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >修了：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l6 level1 lfo8; " ><![if !supportLists]><span style="font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >根目录为&nbsp;d:\myweb</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >尽量使用这种路径风格&nbsp;&nbsp;d:/myweb</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >,</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;要不然会在转移字符下出问题，nginx没有检测</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l6 level1 lfo8; " ><![if !supportLists]><span style="font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >修改主页查找顺序先找index.html，找不到查找index.htm</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >重新加载配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:5.2500pt; mso-char-indent-count:0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;-s&nbsp;reload</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >记得每次修改后都要执行！</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >监听多个端口&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >server&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >listen&nbsp;80;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >listen&nbsp;81;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >同时监听80,81端口，访问</span><span><a href="http://127.0.0.1/" ><span class="41"  style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; " >http://127.0.0.1</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >和访问</span><span><a href="http://127.0.0.1:81/" ><span class="41"  style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; " >http://127.0.0.1:81/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >一样的效果。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.6<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;配置多个端口</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >独立的监听端口配置&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >server&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;82;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;html;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;&nbsp;index.html&nbsp;index.htm;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.7<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;配置虚拟主机</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过不同的域名，实现加载不同的内容。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >server&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >listen&nbsp;80;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >server_name</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;allinpay.com</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;html</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;&nbsp;index.html&nbsp;index.htm;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >server&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >listen&nbsp;80;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >server_name</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;allinpay.net</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;html</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;&nbsp;index.html&nbsp;index.htm;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >都是监听80端口，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >通过</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >则访问</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >不同的域名访问不同的路径</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.8<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;配置虚拟目录</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在server上下文中，定义wiki的虚拟目录</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;location&nbsp;/wiki&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#加不加/都可以</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#alias&nbsp;d:/myweb/mywiki/;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias&nbsp;d:/myweb/mywiki;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;#</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;index.html&nbsp;index.htm&nbsp;;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://ip/wiki" ><span class="41"  style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://ip/wiki</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;则访问&nbsp;d:/myweb/mywiki下面的目录</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >定义虚拟目录的时候，注意目录匹配的优先级。配置文件的先后顺序匹配。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注意alias和root的区别</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;location&nbsp;/wiki&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >root</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;d:/myweb/mywiki;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;index.html&nbsp;index.htm&nbsp;;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >实际访问的目录是&nbsp;&nbsp;d:/mweb/mywiki/wiki</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.9<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;文件服务器</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >location&nbsp;/download&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;alias&nbsp;&nbsp;/root/download;&nbsp;&nbsp;&nbsp;#&nbsp;本机目录</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;autoindex&nbsp;on;&nbsp;&nbsp;#自动产生&nbsp;索引</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&#9;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >limit_rate&nbsp;512k;&nbsp;&nbsp;&nbsp;#下载速度不超过512K</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&#9;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >charset&nbsp;utf-8;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;html网站编码格式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;autoindex_exact_size&nbsp;off;&nbsp;#友好显示文件大小</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;autoindex_localtime&nbsp;on;&nbsp;&nbsp;#使用本地时间</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;index.html;&nbsp;&nbsp;#默认主页</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span><a href="#allow" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://wiki.nginx.org/HttpAccessModule#allow</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.5.10<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >访问限制</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="text-indent:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >allow&nbsp;127.0.0.1；&nbsp;&nbsp;#本机访问</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >allow&nbsp;192.168.1.0/24;&nbsp;#192.168.1.0网段可以访问</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;deny&nbsp;all;&nbsp;&nbsp;#其他禁止访问&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span><a href="http://nginx.org/en/docs/http/ngx_http_access_module.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/en/docs/http/ngx_http_access_module.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h1 style="mso-list:l11 level1 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >4<span>&nbsp;</span></span></span><![endif]><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >&nbsp;提高篇</span><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h1><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;Location<font face="宋体" >详解</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><table class=MsoNormalTable  style="border-collapse:collapse; width:285.6000pt; margin-left:4.6500pt; mso-table-layout-alt:fixed; mso-padding-alt:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >语法:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=322  valign=center  style="width:241.9000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;[&nbsp;=&nbsp;|&nbsp;~&nbsp;|&nbsp;~*&nbsp;|&nbsp;^~&nbsp;]&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >uri</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;{&nbsp;...&nbsp;}</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;@</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >name</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;{&nbsp;...&nbsp;}</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >默认值:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=322  valign=center  style="width:241.9000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8212;&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >上下文:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=322  valign=center  style="width:241.9000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >server,&nbsp;location</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr></table><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >url匹配规则：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l30 level1 lfo9; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >有两种匹配规则，第一种是</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >前缀字符串</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >(=,/)，第二种是正则表达式。使用正则表达式的时候需要</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在路径开始添加&#8220;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >~*</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8221;前缀&nbsp;(不区分大小写)，或者&#8220;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >~</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8221;前缀(区分大小写)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l23 level1 lfo10; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1．<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >使用&#8220;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >=</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8221;前缀可以定义URI和路径的精确匹配</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果发现匹配，则终止路径查找。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l23 level1 lfo10; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2．<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >匹配过程</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l12 level1 lfo11; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >a.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >先查找前缀字符串最长匹配</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l12 level1 lfo11; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >b.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果是精确匹配这选中,结束</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l12 level1 lfo11; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >c.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果不是精确匹配则备选</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l12 level1 lfo11; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >d.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >则按照配置文件的顺序查找正则，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l12 level1 lfo11; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >e.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果匹配正则则使用,结束</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l12 level1 lfo11; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >f.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果还找不到，则重新备选的匹配，&nbsp;结束</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >让我们用一个例子解释上面的说法：&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;=&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;configuration&nbsp;A&nbsp;]</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;configuration&nbsp;B&nbsp;]</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;/documents/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;configuration&nbsp;C&nbsp;]</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;^~&nbsp;/images/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;configuration&nbsp;D&nbsp;]</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;~*&nbsp;\.(gif|jpg|jpeg)$&nbsp;{&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;[&nbsp;configuration&nbsp;E&nbsp;]&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >请求&#8220;/&#8221;匹配配置A，&nbsp;请求&#8220;/index.html&#8221;匹配配置B，&nbsp;请求&#8220;/documents/document.html&#8221;匹配配置C，&nbsp;请求&#8220;/images/1.gif&#8221;匹配配置D，&nbsp;请求&#8220;/documents/1.jpg&#8221;匹配配置E。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >前缀&#8220;@&#8221;定义了命名路径。这种路径不在一般的请求处理中使用，&nbsp;而是用在请求重定向中。这些路径不能嵌套，也不能包含嵌套路径。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >常用的表达式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >^/image/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以/image/开头的uri</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >.(gif|jpg|jpeg|png|bmp|ico)$</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;以图片结尾的文件</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料</span><span><a href="#location" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/cn/docs/http/ngx_http_core_module.html#location</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >Nginx<font face="宋体" >全局变量</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >下面是可以用作判断的全局变量</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >例：</span><span><a href="http://localhost:88/test1/test2/test.php" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://localhost:88/test1/test2/test.php</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >$host：localhost</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >$server_port：88</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >$request_uri：</span><span><a href="http://localhost:88/test1/test2/test.php" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://localhost:88/test1/test2/test.php</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >$document_uri：/test1/test2/test.php</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >$document_root：D:\nginx/html</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >$request_filename：D:\nginx/html/test1/test2/test.php</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Nginx支持的http变量实现在&#160;ngx_http_variables.c&nbsp;的&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >ngx_http_core_variables&nbsp;</span><img width="554"  height="292"  src="nginx.files/nginx8449.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="291"  src="nginx.files/nginx8451.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料:</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http://www.cnblogs.com/AloneSword/archive/2011/12/10/2283483.html</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >URL<font face="宋体" >重写</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通常将用户请求的url转换成实际的url,已达到用户友好、安全或者部署的要求。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考：</span><span><a href="http://wiki.nginx.org/HttpRewriteModule" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://wiki.nginx.org/HttpRewriteModule</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.3.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >基础&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >rewrite&nbsp;的语法格式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><table class=MsoTableGrid  style="border-collapse:collapse; width:274.3500pt; mso-table-layout-alt:fixed; mso-padding-alt:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; " ><tr><td width=78  valign=top  style="width:59.2000pt; padding:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; border-left:0.5000pt solid windowtext; mso-border-left-alt:0.5000pt solid windowtext; border-right:0.5000pt solid windowtext; mso-border-right-alt:0.5000pt solid windowtext; border-top:0.5000pt solid windowtext; mso-border-top-alt:0.5000pt solid windowtext; border-bottom:0.5000pt solid windowtext; mso-border-bottom-alt:0.5000pt solid windowtext; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >Syntax:</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p></td><td width=286  valign=top  style="width:215.1500pt; padding:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; border-left:none; ; mso-border-left-alt:none; ; border-right:0.5000pt solid windowtext; mso-border-right-alt:0.5000pt solid windowtext; border-top:0.5000pt solid windowtext; mso-border-top-alt:0.5000pt solid windowtext; border-bottom:0.5000pt solid windowtext; mso-border-bottom-alt:0.5000pt solid windowtext; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >rewrite</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >regex</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >replacement</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;[&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >flag</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;]</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p></td></tr><tr><td width=78  valign=top  style="width:59.2000pt; padding:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; border-left:0.5000pt solid windowtext; mso-border-left-alt:0.5000pt solid windowtext; border-right:0.5000pt solid windowtext; mso-border-right-alt:0.5000pt solid windowtext; border-top:none; ; mso-border-top-alt:0.5000pt solid windowtext; border-bottom:0.5000pt solid windowtext; mso-border-bottom-alt:0.5000pt solid windowtext; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >Default:</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p></td><td width=286  valign=top  style="width:215.1500pt; padding:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; border-left:none; ; mso-border-left-alt:none; ; border-right:0.5000pt solid windowtext; mso-border-right-alt:0.5000pt solid windowtext; border-top:none; ; mso-border-top-alt:0.5000pt solid windowtext; border-bottom:0.5000pt solid windowtext; mso-border-bottom-alt:0.5000pt solid windowtext; " ><p class=MsoNormal ><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >无</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p></td></tr><tr><td width=78  valign=top  style="width:59.2000pt; padding:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; border-left:0.5000pt solid windowtext; mso-border-left-alt:0.5000pt solid windowtext; border-right:0.5000pt solid windowtext; mso-border-right-alt:0.5000pt solid windowtext; border-top:none; ; mso-border-top-alt:0.5000pt solid windowtext; border-bottom:0.5000pt solid windowtext; mso-border-bottom-alt:0.5000pt solid windowtext; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >Context:</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p></td><td width=286  valign=top  style="width:215.1500pt; padding:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; border-left:none; ; mso-border-left-alt:none; ; border-right:0.5000pt solid windowtext; mso-border-right-alt:0.5000pt solid windowtext; border-top:none; ; mso-border-top-alt:0.5000pt solid windowtext; border-bottom:0.5000pt solid windowtext; mso-border-bottom-alt:0.5000pt solid windowtext; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >server</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >if</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p></td></tr></table><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >rewrite工作机制是通过正则表达式的</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >组匹配</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >模式匹配请求的URL，然后根据后面的规则定义新的URL。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >举个例子：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >一个restful风格转换</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >用户请求&nbsp;/user/1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >web服务器实际上是&nbsp;/user.jsp?id=1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >rewrite的规则:&nbsp;rewrite&nbsp;&nbsp;/user/(\d+)&nbsp;/user.jsp?id=$1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >$1就代表(\d+)匹配到的字符串</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >flag标记有：&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;last&nbsp;相当于Apache里的[L]标记，表示完成rewrite&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;break&nbsp;终止匹配,&nbsp;不再匹配后面的规则&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;redirect&nbsp;返回302临时重定向&nbsp;地址栏会显示跳转后的地址&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;permanent&nbsp;返回301永久重定向&nbsp;地址栏会显示跳转后的地址&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >正则表达式匹配，其中：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >~&nbsp;为区分大小写匹配&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;~*&nbsp;为不区分大小写匹配&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;!~和!~*分别为区分大小写不匹配及不区分大小写不匹配&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >文件及目录匹配，其中：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;-f和!-f用来判断是否存在文件&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;-d和!-d用来判断是否存在目录&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;-e和!-e用来判断是否存在文件或目录&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;-x和!-x用来判断文件是否可执行&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.3.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >配置实例</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在Location上下文中&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >跳转到特定目录&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >例如下面设定</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx在用户使用ie的使用重定向到/nginx-ie目录下：&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >if&nbsp;($http_user_agent&nbsp;~&nbsp;MSIE)&nbsp;{&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >rewrite&nbsp;^(.*)$&nbsp;/nginx-ie/$1&nbsp;break;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >上下：Location</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >域名跳转</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >访问qq.com直接跳转到news.qq.com</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >if&nbsp;($host&nbsp;~&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >^qq</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >\.com")&nbsp;{&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >rewrite&nbsp;^(.*)&nbsp;http://</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >news</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >.</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >qq</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >.com$1/&nbsp;permanent;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >上下：Location</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >防盗链</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;~*&nbsp;\.(gif|jpg|swf)$&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#如果上一个连接不是从jd.com下面访问静态资源的,说明是个无效的连接</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >in</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >valid_referers&nbsp;none&nbsp;blocked&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >jd.com</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >if&nbsp;($invalid_referer)&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >rewrite&nbsp;^/&nbsp;</span><span><a href="http://$host/err.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >http://$host/</span><span class="41"  style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >err.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#定向到error界面</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >上下：Location</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >正向</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >代理&nbsp;</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >正向代理就是做</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >代理服务器的功能</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >。nginx做中间人，转发客户端请求</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >到目标主机上。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >server&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8000;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;localhost;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_header_buffer_size&nbsp;32k;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;large_client_header_buffers&nbsp;4&nbsp;128k;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_buffering&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_buffer_size&nbsp;32k;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_buffers&nbsp;8&nbsp;64k;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_busy_buffers_size&nbsp;128k;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;&nbsp;Host&nbsp;$host;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;&nbsp;X-Real-IP&nbsp;$host;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;&nbsp;X-Forwarded-For&nbsp;$host;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;转发到对应的目标主机上&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;</span><span><a href="http://$http_host$request_uri/" ><span class="41"  style="mso-spacerun:'yes'; font-family:微软雅黑; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:9.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >http://$http_host$request_uri</span></a></span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:42.0000pt; mso-para-margin-left:3.5000gd; text-indent:18.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >resolver&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >114.114.114；</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:42.0000pt; mso-para-margin-left:3.5000gd; text-indent:18.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:'Courier New'; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >resolver_timeout&nbsp;5s;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:60.0000pt; mso-para-margin-left:5.0000gd; " ><span class="20"  style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_send_timeout&#160;&#160;&#160;300;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:60.0000pt; mso-para-margin-left:5.0000gd; " ><span class="20"  style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_read_timeout&#160;&#160;&#160;300;</span><span class="20"  style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:60.0000pt; mso-para-margin-left:5.0000gd; " ><span class="20"  style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_connect_timeout&#160;30s;</span><span class="20"  style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:42.0000pt; mso-para-margin-left:3.5000gd; text-indent:18.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#关闭访问日志，如果需要，默认是开启的。</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access_log&nbsp;off;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >浏览器</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >设置127.0.0.1&nbsp;8000，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >注意选中</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >本地也使用代理服务器</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >常见错误</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >错误：bad&nbsp;gateway&nbsp;502</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >查看错误日志</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2011/09/18&nbsp;17:53:53&nbsp;[error]&nbsp;7504#7580:&nbsp;*1&nbsp;no&nbsp;resolver&nbsp;defined&nbsp;to&nbsp;resolve&nbsp;www.baidu.com,&nbsp;client:&nbsp;127.0.0.1,&nbsp;server:&nbsp;localhost,&nbsp;request:&nbsp;"GET&nbsp;</span><span><a href="http://www.baidu.com/" ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://www.baidu.com/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;HTTP/1.1",&nbsp;host:&nbsp;"www.baidu.com"</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >不能解析&nbsp;</span><span><a href="http://www.baidu.com，也就是说域名解析错误/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; " >www.baidu.com<font face="宋体" >，也就是说域名解析错误</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >在http中配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;#dns服务器或者网关地址,</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;resolver&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >114.114.114</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注意：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >1.&nbsp;不能有hostname</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2.&nbsp;必须有resolver,&nbsp;即dns，即上面的x.x.x.x，换成你们的DNS服务器ip即可</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >3&nbsp;.&nbsp;$http_host和$request_uri是nginx系统变量，不要想着替换他们，保持原样就OK。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >查看dns方法</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >cat&nbsp;/etc/resolv.conf</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="421"  height="157"  src="nginx.files/nginx11218.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="377"  height="230"  src="nginx.files/nginx11221.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="529"  height="161"  src="nginx.files/nginx11223.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="489"  height="97"  src="nginx.files/nginx11226.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://wiki.nginx.org/HttpProxyModule" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://wiki.nginx.org/HttpProxyModule</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;参考大全</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >反向代理</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >反向代理就是把客户端的请求，转发到后台服务器中。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.5.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >单个</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://localhost:8080;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;&nbsp;X-Real-IP&nbsp;&nbsp;$remote_addr;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >将jenkins上的请求，转发到8080的服务上</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >location&nbsp;/jenkins&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;&nbsp;</span><span><a href="http://127.0.0.1:8080" ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://127.0.0.1:8080</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >会自动访问&nbsp;</span><span><a href="http://127.0.0.1:8080/jenkins?" ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://127.0.0.1:8080/jenkins&nbsp;</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >;&nbsp;URL保持不变&nbsp;</span><span><a href="http://yxz/jenkins" ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://yxz/jenkins</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >注意程序要有相同的目录，目标服务器需要有jenkins目录。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.5.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >集群</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >当页面的访问量非常大的时候，往往需要多个应用服务器来共同承担动态页面的执行操作，这时我们就需要使用集群的架构。&nbsp;Nginx&nbsp;通过&nbsp;upstream&nbsp;指令来定义一个服务器的集群</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.5.2.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >upstream&nbsp;<font face="宋体" >配置</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >upstream&nbsp;tomcats&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;server&nbsp;127.0.0.1:80&nbsp;weight=10;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#server&nbsp;&nbsp;&nbsp;127.0.0.1:81&nbsp;&nbsp;weight=10;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;server&nbsp;&nbsp;&nbsp;&nbsp;127.0.0.1:82&nbsp;weight=10;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >代理跳转</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;proxy_pass&nbsp;指令的写法变成了：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://tomcats;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;&nbsp;X-Real-IP&nbsp;&nbsp;$remote_addr;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:18.0000pt; mso-char-indent-count:1.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在&nbsp;Nginx&nbsp;的集群配置中，Nginx&nbsp;使用最简单的平均分配规则给集群中的每个节点分配请求。一旦某个节点失效时，或者重新起效时，Nginx&nbsp;都会非常及时的处理状态的变化，以保证不会影响到用户的访问</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:18.0000pt; mso-char-indent-count:1.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >第二个例子</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:18.0000pt; mso-char-indent-count:1.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >upstream&nbsp;backend&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;backend1.example.com&nbsp;weight=5;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;127.0.0.1:8080&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max_fails=3&nbsp;fail_timeout=30s;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;unix:/tmp/backend3;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >默认情况下，nginx按加权轮转的方式将请求分发到各服务器。&nbsp;在上面的例子中，每7个请求会通过以下方式分发：&nbsp;5个请求分到backend1.example.com，&nbsp;一个请求分到第二个服务器，一个请求分到第三个服务器。&nbsp;与服务器通信的时候，如果出现错误，请求会被传给下一个服务器，直到所有可用的服务器都被尝试过。&nbsp;如果所有服务器都返回失败，客户端将会得到最后通信的那个服务器的（失败）响应结果。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.5.2.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >server<font face="宋体" >配置</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><table class=MsoNormalTable  style="border-collapse:collapse; width:213.5000pt; margin-left:4.6500pt; mso-table-layout-alt:fixed; mso-padding-alt:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >语法:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=226  valign=center  style="width:169.8000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; font-weight:bold; " >server</span><span class="20"  style="font-family:宋体; font-size:12.0000pt; " >&nbsp;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; " >address</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >&nbsp;[</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; " >parameters</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >];</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >默认值:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=226  valign=center  style="width:169.8000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8212;&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >上下文:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=226  valign=center  style="width:169.8000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >upstream</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr></table><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >定义服务器的地址</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; " >address</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >和其他参数</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; " >parameters</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >。&nbsp;地址可以是域名或者IP地址，端口是可选的，或者是指定&#8220;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >unix:</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8221;前缀的UNIX域套接字的路径。如果没有指定端口，就使用80端口。&nbsp;如果一个域名解析到多个IP，本质上是定义了多个server。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >你可以定义下面的参数：&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >weight</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >=</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; " >number</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:36.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >设定服务器的权重，默认是1。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >max_fails</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >=</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; " >number</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:36.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >设定Nginx与服务器通信的尝试失败的次数。在</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >fail_timeout</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参数定义的时间段内，如果失败的次数达到此值，Nginx就认为服务器不可用。在下一个</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >fail_timeout</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >时间段，服务器不会再被尝试。&nbsp;失败的尝试次数默认是1。设为0就会停止统计尝试次数，认为服务器是一直可用的。&nbsp;你可以通过指令</span><span><a href="#proxy_next_upstream" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >proxy_next_upstream</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >、&nbsp;</span><span><a href="#fastcgi_next_upstream" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >fastcgi_next_upstream</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >和&nbsp;</span><span><a href="#memcached_next_upstream" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >memcached_next_upstream</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >来配置什么是失败的尝试。&nbsp;默认配置时，</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >http_404</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >状态不被认为是失败的尝试。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >fail_timeout</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >=</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; " >time</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:36.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >设定&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:72.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; text-indent:-18.0000pt; mso-list:l2 level1 lfo12; " ><![if !supportLists]><span style="font-family:Symbol; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-size:10.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >&#183;<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >统计失败尝试次数的时间段。在这段时间中，服务器失败次数达到指定的尝试次数，服务器就被认为不可用。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:72.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; text-indent:-18.0000pt; mso-list:l2 level1 lfo12; " ><![if !supportLists]><span style="font-family:Symbol; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-size:10.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >&#183;<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >服务器被认为不可用的时间段。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:36.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >默认情况下，该超时时间是10秒。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >backup</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:36.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >标记为备用服务器。当主服务器不可用以后，请求会被传给这些服务器。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >down</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:36.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >标记服务器永久不可用，可以跟</span><span><a href="#ip_hash" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >ip_hash</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >指令一起使用。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.6<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >反向代理负载均衡</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx通过upstream&nbsp;指令完成负载均和和健康检查</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:'Times New Roman'; " ><span style='mso-list:Ignore; ' >4.6.1<span>&nbsp;</span></span></span><![endif]><span class="59"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >Nginx<font face="宋体" >负载均衡基础知识</font></span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=p  style="text-indent:6.0000pt; mso-char-indent-count:0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >upstream目前支持5种方式的分配&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >1)、轮询（默认）</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >每个请求按时间顺序逐一分配到不同的后端</span><span><a href="http://www.zzbaike.com/wiki/????????¨"  title="服务器" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >服务器</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，如果后端服务器down掉，能自动剔除。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2)、weight</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2)、ip_hash</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >每个请求按访问</span><span><a href="http://www.zzbaike.com/wiki/Ip"  title="Ip" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >ip</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >3)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >fair（第三方）</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >按后端服务器的响应时间来分配请求，响应时间短的优先分配。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >4)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >url_hash（第三方）</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >5</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;session&nbsp;stickess</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >（第三方）</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; " ><span style='mso-list:Ignore; ' >4.6.2<span>&nbsp;</span></span></span><![endif]><span class="59"  style="mso-spacerun:'yes'; font-family:宋体; " >&nbsp;&nbsp;</span><span class="59"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >Nginx&nbsp;<font face="宋体" >负载均衡实例</font><font face="Times New Roman" >1</font></span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >upstream&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;back_servers</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;{&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;server&nbsp;127.0.0.1:9090&nbsp;down;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;server&nbsp;127.0.0.1:8080&nbsp;weight=2;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;server&nbsp;127.0.0.1:6060;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;server&nbsp;127.0.0.1:7070&nbsp;backup;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >每个</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >设备的状态设置为:&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:18.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >a)down&nbsp;表示单前的server暂时不参与负载&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:18.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >b)weight&nbsp;默认为1.weight越大，负载的权重就越大。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:18.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >c)max_fails&#160;:允许请求失败的次数默认为1.当超过最大次数时，返回proxy_next_upstream&nbsp;模块定义的错误&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:18.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >d)fail_timeout:max_fails次失败后，暂停的时间。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:18.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >e)backup：其它所有的非backup机器down或者忙的时候，请求backup机器。所以这台机器压力会最轻。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx支持同时设置多组的负载均衡，用来给不用的server来使用。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span><a href="http://nginx.org/en/docs/http/ngx_http_upstream_module.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/en/docs/http/ngx_http_upstream_module.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span><a href="http://nginx.org/cn/docs/http/ngx_http_upstream_module.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; " >http://nginx.org/cn/docs/http/ngx_http_upstream_module.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.7<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >客户端缓存&nbsp;</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.7.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >Expires</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过expires指令来实现。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >浏览器缓存静态资源，再次访问浏览器不发起新的请求。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >不发起请求的几种方式：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l25 level1 lfo13; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >a.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >地址栏访问，不会向服务器发起请求</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l25 level1 lfo13; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >b.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >关闭tab，新开也不会重新访问。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:36.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l25 level1 lfo13; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >c.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >关闭浏览器，重新打开也不会重新访问。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >l</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >ocation&nbsp;~&nbsp;.*\.(gif|jpg|jpeg|png|bmp|swf)$</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;30d;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location&nbsp;~&nbsp;.*\.(js|css)?$</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;1h;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="536"  height="94"  src="nginx.files/nginx15097.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >而下面的配置则定义了几种文件类型的请求处理方式。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location&nbsp;~&nbsp;\.(htm|html|gif|jpg|jpeg|png|bmp|ico|css|js|txt)$&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;/opt/webapp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;expires&nbsp;24h;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过&nbsp;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >expires</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;指令来控制其在浏览器的缓存，以减少不必要的请求。&nbsp;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >expires</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;指令可以控制&nbsp;HTTP&nbsp;应答中的&#8220;&nbsp;Expires&nbsp;&#8221;和&#8220;&nbsp;Cache-Control&nbsp;&#8221;的头标（起到控制页面缓存的作用）。您可以使用例如以下的格式来书写&nbsp;Expires：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;1&nbsp;January,&nbsp;1970,&nbsp;00:00:01&nbsp;GMT;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;60s;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;30m;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;24h;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;1d;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;max;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >expires&nbsp;off;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在服务端设置静态文件的expire参数是指&nbsp;客户的本地浏览器缓存设置.</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >正值expire&nbsp;date&nbsp;=&nbsp;当前时间&nbsp;+&nbsp;设置的time时间</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >负值不缓存</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.7.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >缓存效果</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><img width="554"  height="332"  src="nginx.files/nginx15561.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.7.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >刷新访问的结果</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >F5刷新，会重新请求</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="502"  src="nginx.files/nginx15585.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.8<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >代理缓存</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx通过proxy_cache指令来实现，当然还有其他几种通过memcached，通过ncache。这种方式内置，也最成熟。适合从后端获取资源，然后存储。功能类似squid。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Nginx已经具备Squid所拥有的Web缓存加速功能、清除指定URL缓存的功能。而在性能上，Nginx对多核CPU的利用，胜过Squid不少。&nbsp;另外，在反向代理、负载均衡、健康检查、后端服务器故障转移、Rewrite重写、易用性上，Nginx也比Squid强大得多。这使得一台Nginx可&nbsp;以同时作为&#8220;负载均衡服务器&#8221;与&#8220;Web缓存服务器&#8221;来使用。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="margin-left:0.0000pt; text-indent:0.0000pt; line-height:172%; mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.8.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >proxy_cache</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >#设置Web缓存区名称为cache_one，内存缓存空间大小为200MB，1天没有被访问的内容自动清除，硬盘缓存空间大小为30GB。&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_cache_path&nbsp;/data/proxy_cache_dir&nbsp;levels=1:2&nbsp;keys_zone=cache_one:200m&nbsp;inactive=1d</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >max_size=30g;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;/&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >{&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#如果后端的服务器返回502、504、执行超时等错误，自动将请求转发到upstream负载均衡池中的另一台服务器，实现故障转移。&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_next_upstream&nbsp;http_502&nbsp;http_504&nbsp;error&nbsp;timeout&nbsp;invalid_header;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_cache&nbsp;cache_one;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#对不同的HTTP状态码设置不同的缓存时间&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_cache_valid&nbsp;200&nbsp;304&nbsp;12h;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#以域名、URI、参数组合成Web缓存的Key值，Nginx根据Key值哈希，存储缓存内容到二级缓存目录内&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_cache_key&nbsp;$host$uri$is_args$args;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;Host&nbsp;$host;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;X-Forwarded-For&nbsp;$remote_addr;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_pass&nbsp;http://backend_server;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >expires&nbsp;1d;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#定义缓存key</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >，&nbsp;区域allinpay大小100m,自动清除时间1d,磁盘缓存10</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_cache_path&nbsp;&nbsp;/data/nginx/cache&nbsp;keys_zone=allinpay:100m;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_temp_path&nbsp;&nbsp;/data/nginx/temp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&#160;#注：proxy_temp_path和proxy_cache_path指定的路径必须在同一分区</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&#160;proxy_temp_path&#160;&#160;&nbsp;/data0/proxy_temp_dir;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&#160;#设置Web缓存区名称为cache_one，内存缓存空间大小为200MB，1天没有被访问的内容自动清除，硬盘缓存空间大小为30GB。</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&#160;proxy_cache_path&#160;&#160;/data0/proxy_cache_dir&#160;&#160;levels=1:2&#160;&#160;&nbsp;keys_zone=cache_one:200m&nbsp;inactive=1d&nbsp;max_size=30g;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_cache_path&nbsp;&nbsp;/data/nginx/cache&nbsp;keys_zone=allinpay:100m;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_temp_path&nbsp;&nbsp;/data/nginx/temp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >[root@ippdev5&nbsp;~]#&nbsp;mkdir&nbsp;-p&nbsp;/data/nginx/</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >[root@ippdev5&nbsp;~]#&nbsp;service&nbsp;nginx&nbsp;restart</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >常见问题</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l9 level1 lfo14; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >启动错误</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx:&nbsp;[emerg]&nbsp;mkdir()&nbsp;"/data/nginx/cache"&nbsp;failed&nbsp;(2:&nbsp;No&nbsp;such&nbsp;file&nbsp;or&nbsp;directory)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx:&nbsp;configuration&nbsp;file&nbsp;/etc/nginx/nginx.conf&nbsp;test&nbsp;failed</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >原因没有创建目录</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l30 level1 lfo9; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >缓存默认时间10分钟</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >If&nbsp;cached&nbsp;data&nbsp;is&nbsp;not&nbsp;requested&nbsp;for&nbsp;time&nbsp;defined&nbsp;by&nbsp;the&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >inactive</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;parameter,&nbsp;than&nbsp;that&nbsp;data&nbsp;is&nbsp;removed&nbsp;from&nbsp;the&nbsp;cache.&nbsp;The&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >inactive</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;parameter&nbsp;defaults&nbsp;to&nbsp;10&nbsp;minutes&nbsp;(</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >10m</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >).</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.8.1.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >proxy_cache_key</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >的</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >2<font face="宋体" >种配法</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >：</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l31 level1 lfo15; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过浏览器获取的URL做KEY</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >域名：端口&#160;浏览器完整地址（包括动态参数，如:www.xxx.com:80/goods/1.html）</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;proxy_cache_key&nbsp;"$host:$server_port$request_uri";</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l31 level1 lfo15; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过真实的URL地址做KEY</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;域名：端口&#160;真实请求地址（不是rewrite后的）&#160;?&#160;参数</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >(如www.xxx.com:80/index.jsp?id=111)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >proxy_cache_key&nbsp;"$host:$server_port$uri$is_args$args";</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >建议采用第一种</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.8.1.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >缓存效果</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><img width="554"  height="422"  src="nginx.files/nginx17751.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="405"  src="nginx.files/nginx17755.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >全部缓存了&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="329"  src="nginx.files/nginx17766.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >重新加载jsp</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="369"  src="nginx.files/nginx17781.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >从缓存中加载</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="338"  src="nginx.files/nginx17793.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://blog.s135.com/nginx_cache/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://blog.s135.com/nginx_cache/</span></a></span><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://www.cnblogs.com/meteoric_cry/archive/2011/05/14/2046263.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://www.cnblogs.com/meteoric_cry/archive/2011/05/14/2046263.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span><a href="http://bbs.linuxtone.org/thread-7120-1-1.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://bbs.linuxtone.org/thread-7120-1-1.html</span></a></span><span class="41"  style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx缓存cache的几种方式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://wiki.nginx.org/HttpProxyModule" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://wiki.nginx.org/HttpProxyModule</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;参考大全&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://blog.chinaunix.net/uid-25018796-id-94903.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://blog.chinaunix.net/uid-25018796-id-94903.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;详细配置&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/en/docs/http/ngx_http_proxy_module.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;参数详解</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.8.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >缓存路径计算</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span><a href="http://zhumeng8337797.blog.163.com/blog/static/10076891420142182952255/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://zhumeng8337797.blog.163.com/blog/static/10076891420142182952255/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >先看proxy_cache_path&#160;配置</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >proxy_cache_path&nbsp;&#160;/var/tmp/nginx/cache&nbsp;&#160;levels=1:2&nbsp;&#160;&nbsp;keys_zone=cache_one:200m&nbsp;inactive=1d&nbsp;max_size=30g;</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >1，</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >反向代理缓存的目录为</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >/var/tmp/nginx/cache</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2，缓存文件的</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >key</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >和其它信息放在一个</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >10M</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >的共享内存中，命名为</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >one</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >3，缓存文件最大占用</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >1G</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >磁盘空间</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >4，</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >level=1:2</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >比如有一个<font face="Times New Roman" >URL</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >是</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://www.libertyvps.com/1.png</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >，那么这个图片如果被缓存那他的路径就是</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >/</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >var/tmp/nginx/cache</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >/9/ad/e0bd86606797639426a92306b1b98ad9</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >计算方法：</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >1)&nbsp;nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >先把请求地址</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >/1.png</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >用</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >md5</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >进行哈希，得到</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >e0bd86606797639426a92306b1b98ad9</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2)&nbsp;level=1:2</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >就是把最后一位数</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >9</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >拿出来建一个目录，然后再把</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >9</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >前面的</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >位</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >再</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >建一个目录，最后把刚才得到的这个缓存文件放到<font face="Times New Roman" >9/ad</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >目录中。</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >同样的方法推理，如果<font face="Times New Roman" >level=1:1</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >，那么缓存文件的路径就是</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >/</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >var/tmp</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >/nginx/cache/9/d/e0bd86606797639426a92306b1b98ad9</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:Tahoma; mso-fareast-font-family:宋体; color:rgb(68,68,68); font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >上面的例子只是最简单的<font face="Tahoma" >URL</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Tahoma; color:rgb(68,68,68); font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >，如果带参数呢？</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >比如<font face="Times New Roman" >http://www.libertyvps.com/1.png?v=1</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >，那么缓存路径还是一样吗？</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >先对比下这个两个配置</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >proxy_cache_key&nbsp;$uri;</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >proxy_cache_key&nbsp;$uri$is_args$args;</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >第一个配置只根据不带参的<font face="Times New Roman" >$uri</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >进行哈希，所以这时候加了参数和没加参数是一样的结果；</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >第二个配置就是把域名之后所有的内容<font face="Times New Roman" >(</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >也就是</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >$request_uri)</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >都进行哈希。</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >说明：</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >1)&nbsp;MD5</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >哈希过之后的路径是十六进制的，对于</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >nignx</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >来说查询速度更快；</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2)&nbsp;level=1:2</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >会比</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >level=1:1</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >建立更多的目录，适合缓存海量文件，因为单个目录下的文件太多会降低</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >IO</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >性能；</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >3)&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >缓存会先被写入写入临时文件，所以建议</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >proxy_cache_path</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >和</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >proxy_temp_path</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >放在同一个文件系统当中；</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >4)&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >虽然</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >有通过</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >HTTP</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >协议删除缓存的第三方插件，但是我考虑之后觉得还是不用的好。</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >的缓存本来就不是很成熟，外加一个第三方插件就更不让人放心了</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="424"  src="nginx.files/nginx19751.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.8.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >缓存命中率</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span><a href="http://lmdkfs.blog.163.com/blog/static/74611324201421283237778/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://lmdkfs.blog.163.com/blog/static/74611324201421283237778/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >查看命中的缓存</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >1</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; color:rgb(44,44,44); font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >、在<font face="Times New Roman" >http&nbsp;header</font></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; color:rgb(44,44,44); font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >上增加命中显示</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(44,44,44); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >提供了</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >$upstream_cache_status</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >这个变量来显示缓存的状态，我们可以在配置中添加一个</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >头来显示这一状态，达到类似</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >squid</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >的效果。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location&nbsp;&#160;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:21.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >#Nginx_Cache名称任意</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-style:italic; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >add_header&nbsp;&#160;&nbsp;&#160;&#160;Nginx-Cache&#160;&#160;&#160;&#8220;$upstream_cache_status&#8221;;</span><span class="36"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-style:italic; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(128,128,0); font-weight:bold; font-style:italic; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="462"  height="242"  src="nginx.files/nginx20104.png" ><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(128,128,0); font-weight:bold; font-style:italic; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(128,128,0); font-weight:bold; font-style:italic; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; font-weight:bold; font-style:italic; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:normal; " >日志</span><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; font-weight:normal; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >log_format&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;添加变量&nbsp;</span><span class="35"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >"$upstream_cache_status"</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; font-weight:bold; font-style:italic; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >统计方法：用HIT的数量除以日志总量得出缓存命中率</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >awk&#160;</span><span class="35"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >'{if($NF=="\"HIT\"")&#160;hit++}&#160;END&#160;{printf&#160;"%.2f%",hit/NR}'</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;access.log&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >$upstream_cache_status包含以下几种状态：&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;MISS&nbsp;未命中，请求被传送到后端&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;HIT&nbsp;缓存命中&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;EXPIRED&nbsp;缓存已经过期请求被传送到后端&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;UPDATING&nbsp;正在更新缓存，将使用旧的应答&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;STALE&nbsp;后端将得到过期的应答</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;统计日志脚本：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >1.&nbsp;每天0点切割nginx日志</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2.&nbsp;将每日的缓存统计存入日志以供参考</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >#&nbsp;crontab&nbsp;&#8211;l</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >1&nbsp;0&nbsp;*&nbsp;*&nbsp;*&nbsp;/opt/shell/nginx_cache_hit&nbsp;&#62;&#62;&nbsp;/usr/local/openresty/nginx/logs/hit</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >#&nbsp;cat&nbsp;/opt/shell/nginx_cache_hit</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >#!/bin/bash</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >LOG_FILE=&#8217;/usr/local/nginx/logs/access.log.1&#8242;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >LAST_DAY=$(date&nbsp;+%F&nbsp;-d&nbsp;&#8220;-1&nbsp;day&#8221;)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >awk&nbsp;&#8216;{if($NF==&#8221;\&#8221;HIT\&#8221;")&nbsp;hit++}&nbsp;END&nbsp;{printf&nbsp;&#8220;&#8216;$LAST_DAY&#8217;:&nbsp;%d&nbsp;%d&nbsp;%.2f%\n&#8221;,&nbsp;hit,NR,hit/NR}&#8217;&nbsp;$LOG_FILE</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.8.4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >使用内存作为文件系统</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx本身不提供缓存到内存的功能，不过可以通过使用技巧来做，就是</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过内存文件系统来实现。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/dev/shm</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >为默认</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >虚拟内存。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;，可以自定义一个虚拟文件系统。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >自定义一个虚拟文件系统</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >mkdir&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >p&nbsp;/data/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >mount&nbsp;nginx_fs&nbsp;/data/nginx&nbsp;-t&nbsp;tmpfs&nbsp;-o&nbsp;size=100m</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="146"  src="nginx.files/nginx20922.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >测试读写速度</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="64"  src="nginx.files/nginx20932.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注意：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >自定义的内存文件系统，重启丢失。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >开机自启动&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >编辑vi&nbsp;/etc/fstabl</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;&nbsp;/data/nginx&nbsp;&nbsp;tmpfs&nbsp;&nbsp;size=200m&nbsp;0&nbsp;0</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="138"  src="nginx.files/nginx21021.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >综合起来可以简单优化静态文件：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;~&nbsp;.*\.(js|css|gif|jpg|jpeg|png|bmp|swf|flv)$</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&nbsp;&#160;&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&nbsp;&#160;&nbsp;proxy_pass&nbsp;http://backend;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&nbsp;&#160;&nbsp;expires&nbsp;6h;&nbsp;#设置浏览器过期时间</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&nbsp;&#160;&nbsp;proxy_cache&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >allinpay</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;#使用</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >allinpay</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >这个keys_zone</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&nbsp;&#160;&nbsp;proxy_cache_valid&nbsp;200&nbsp;302&nbsp;1h;#200和302状态码保存1小时</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&nbsp;&#160;&nbsp;proxy_cache_valid&nbsp;301&nbsp;1d;#301状态码保存一天</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&nbsp;&#160;&nbsp;proxy_cache_valid&nbsp;any&nbsp;1m;#其它的保存一分钟</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;&nbsp;&#160;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span><a href="http://blog.csdn.net/han_dongwei/article/details/12709323" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://blog.csdn.net/han_dongwei/article/details/12709323</span></a></span><span class="29"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >&nbsp;</span><span class="29"  style="mso-spacerun:'yes'; font-family:宋体; " >&nbsp;</span><span><a href="http://blog.csdn.net/han_dongwei/article/details/12709323" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >nginx&nbsp;cache<font face="宋体" >静态化</font><font face="Times New Roman" >+tmpfs&nbsp;</font><font face="宋体" >高性能</font><font face="Times New Roman" >cdn</font><font face="宋体" >方案&nbsp;原创</font><font face="Times New Roman" >-</font><font face="宋体" >胡志广&nbsp;</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.8.5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >清空缓存&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >PROXY_CACHE更新缓存必须依赖于mod_purge或者删除相应的缓存目录,</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&nbsp;无需重启nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span><a href="https://192.168.1.75/purge/idemo/inc/images/reddot.gif" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >https://192.168.1.75/purge/idemo/inc/images/reddot.gif</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-left:18.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location&nbsp;~&nbsp;/purge(/.*)&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:18.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >{&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:18.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >#设置只允许指定的IP或IP段输入正确的密码才可以清除URL缓存。(Nginx&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:18.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >allow&nbsp;127.0.0.1;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:18.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >allow&nbsp;192.168.1.0/24;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:18.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >deny&nbsp;all;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:18.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >proxy_cache_purge&nbsp;cache_one&nbsp;$host$1$is_args$args;&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:18.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}&nbsp;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;#用于清除缓存,假设一个URL为http://192.168.4.178/test.gif,通过访问</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;#http://192.168.4.178/purge/test.gif可以清楚该url的缓存</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;location&#160;~&#160;/purge(/.*)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#设置值允许指定的ip或ip段才可以清除URL缓存</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;allow&#160;127.0.0.1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;allow&#160;192.168.0.0/16;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deny&#160;all;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;proxy_cache_purge&#160;cache_one&#160;$host$1$is_args$args</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;access_log&#160;off;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >需要编译</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >[root@ippdev5&nbsp;nginx]#&nbsp;vi&nbsp;/etc/nginx/conf.d/default.conf&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >[root@ippdev5&nbsp;nginx]#&nbsp;service&nbsp;nginx&nbsp;restart</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx:&nbsp;[emerg]&nbsp;unknown&nbsp;directive&nbsp;"proxy_cache_purge"&nbsp;in&nbsp;/etc/nginx/conf.d/default.conf:56</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx:&nbsp;configuration&nbsp;file&nbsp;/etc/nginx/nginx.conf&nbsp;test&nbsp;failed</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注意表达式顺序，要把purge放在&nbsp;&nbsp;缓存前面才能匹配</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="549"  height="122"  src="nginx.files/nginx22579.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="230"  src="nginx.files/nginx22584.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >再次访问，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="551"  height="231"  src="nginx.files/nginx22592.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.9<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >fast&nbsp;cgi<font face="宋体" >工作模式</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >以php为例，其他的perl、python类似</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >FastCGI&nbsp;访问php-cgi</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >为了解决cgi，每次访问都要创建一个进程的不足。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >引入来的fastcgi，充当一个线程池，每次访问都从线程池中取。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;location&nbsp;~&nbsp;\.php$&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#这个root需要设置对,绝对路径没有问题，但是虚拟目录有问题。不知道如何设置script</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d:/myweb;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fastcgi_pass&nbsp;&nbsp;&nbsp;127.0.0.1:9000;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fastcgi_index&nbsp;&nbsp;index.php;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fastcgi_param&nbsp;&nbsp;SCRIPT_FILENAME&nbsp;&nbsp;d:/myweb$fastcgi_script_name;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fastcgi_params;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >实际php的应用在d:/myweb/mywiki下。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >虚拟目录中配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >虚拟目录</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location&nbsp;/wiki&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias&nbsp;d:/myweb/mywiki;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;index&nbsp;&nbsp;index.php&nbsp;index.html&nbsp;index.htm&nbsp;;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >对应的脚本路径</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >location&nbsp;~&nbsp;^/wiki/.+\.php$&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >root&nbsp;d:/myweb/mywiki;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >rewrite&nbsp;/wiki/(.*\.php?)&nbsp;/$1&nbsp;break;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >#include&nbsp;fcgi.conf;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fastcgi_params;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >fastcgi_pass&nbsp;127.0.0.1:9000;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >fastcgi_index&nbsp;index.php;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >fastcgi_param&nbsp;SCRIPT_FILENAME&nbsp;d:/myweb/mywiki$fastcgi_script_name;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >常见配置错误</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >1.&nbsp;fast-cgi没有找到</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2.&nbsp;fast-cgi配置好了，但是脚本路径不对，提示如下错误。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >访问php文件，却报No&nbsp;input&nbsp;file&nbsp;specified.</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >3.&nbsp;504错误</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >F</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >astcgi_pass&nbsp;&nbsp;和php-cgi开启的端口不一致</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >PHP支持FastCGI方式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >在php.ini开启&nbsp;cgi.fix_pathinfo=1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >以cgi方式允许</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >D:\php-5.3.8-nts-Win32-VC9-x86&#62;php-cgi.exe&nbsp;-b&nbsp;127.0.0.1:9000&nbsp;-c&nbsp;D:\php-5.3.8-nts-Win32-VC9-x86\php.ini</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >这个比较变态&nbsp;php-cgi结束进程，端口也不释放，需要强制关闭才行（cport)</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >查看端口是否占用</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >The&nbsp;page&nbsp;you&nbsp;are&nbsp;looking&nbsp;for&nbsp;is&nbsp;temporarily&nbsp;unavailable.</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >Please&nbsp;try&nbsp;again&nbsp;later.&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >PHP虚拟目录的问题</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >虚拟目录php-fastcgi的支持</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >参考&nbsp;</span><span><a href="http://mengdejun.iteye.com/blog/98560" ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://mengdejun.iteye.com/blog/98560</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >解析脚本路径错误，问题原因nginx提供的脚本路径php&nbsp;fastcgi进程找不到对应的目录和文件。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >参考资料</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.10<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >Nginx<font face="宋体" >处理&nbsp;</font><font face="Cambria" >JAVA</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.10.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >代理方式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >访问动态页面的过程，通过代理模式访问后端。这种比较常见.</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="328"  src="nginx.files/nginx24183.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="358"  src="nginx.files/nginx24186.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.10.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >反向代理集群方式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考前面集群的方式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="293"  height="86"  src="nginx.files/nginx24207.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="472"  height="272"  src="nginx.files/nginx24209.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.10.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >nginx_upstream_jvm_route&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal  style="text-indent:24.0000pt; mso-char-indent-count:2.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >这个模块的功能是nginx把客户端请求发送同一个session服务器中，也就是说nginx具有粘性。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >ip_hash也有粘性，但是负责不能均衡，如果是同一地区访问，都是一个ip地址，会造成有的服务器压力大，有的服务器压力小。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注意的问题是，如果有多个nginx服务器，显然不可用的，还有一个就是这个是对nginx直接打补丁，新版本需要测试。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >打补丁</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="background:rgb(238,238,238); " ><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >cd&nbsp;nginx</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(102,102,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >-</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,102,102); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >0.7</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(102,102,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >.</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,102,102); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >59</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(136,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >#&nbsp;or&nbsp;whatever</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >patch&nbsp;</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(102,102,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >-</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >p0&nbsp;</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(102,102,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#60;</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,136,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >/path/</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >to</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(102,102,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >/</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,136); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >this</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(102,102,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >/</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >directory</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(102,102,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >/</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >jvm_route</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(102,102,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >.</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >patch</span><span style="mso-spacerun:'yes'; font-family:'Lucida Console'; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >编译</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#&nbsp;./configure&nbsp;--prefix=/usr/nginx-0.8.1&nbsp;--with-http_stub_status_module&nbsp;--add-module=/path/to/this/directory/</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#make</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#make&nbsp;install</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >以下配置：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >1.&nbsp;Resin:</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >upstream&nbsp;backend&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.0.100&nbsp;srun_id=a;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.0.101&nbsp;srun_id=b;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.0.102&nbsp;srun_id=c;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.0.103&nbsp;srun_id=d;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;jvm_route&nbsp;$cookie_JSESSIONID;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2.&nbsp;Tomcat:</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >upstream&nbsp;backend&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.0.100&nbsp;srun_id=a;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.0.101&nbsp;srun_id=b;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.0.102&nbsp;srun_id=c;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;server&nbsp;192.168.0.103&nbsp;srun_id=d;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;jvm_route&nbsp;$cookie_JSESSIONID&nbsp;reverse;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http://code.google.com/p/nginx-upstream-jvm-route/</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.11<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >日志</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >指令格式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><table class=MsoNormalTable  style="border-collapse:collapse; width:357.2000pt; margin-left:4.6500pt; mso-table-layout-alt:fixed; mso-padding-alt:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >语法:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=418  valign=center  style="width:313.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >access_log</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >path</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;[</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >format</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;[buffer=</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >size</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >]];</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >access_log</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;off;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >默认值:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=418  valign=center  style="width:313.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >access_log&nbsp;logs/access.log&nbsp;combined;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=58  valign=center  style="width:43.7000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal  style="text-align:center; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >上下文:&nbsp;</span><span style="font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=418  valign=center  style="width:313.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http,&nbsp;server,&nbsp;location,&nbsp;if&nbsp;in&nbsp;location,&nbsp;limit_except</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr></table><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http://nginx.org/en/docs/http/ngx_http_log_module.html</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://nginx.org/cn/docs/http/ngx_http_log_module.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/cn/docs/http/ngx_http_log_module.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.12<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >监控状态</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考&nbsp;</span><span><a href="http://wiki.nginx.org/HttpStubStatusModule" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://wiki.nginx.org/HttpStubStatusModule</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;/nginx_status&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;stub_status&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#开启状态监控</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;access_log&nbsp;&nbsp;&nbsp;off;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;#关闭访问日志</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;allow&nbsp;SOME.IP.ADD.RESS;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#白名单</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;deny&nbsp;all;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#黑名单</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >得到的页面如下：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >Active&nbsp;connections:&nbsp;291</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >server&nbsp;accepts&nbsp;handled&nbsp;requests</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;16630948&nbsp;16630948&nbsp;31070465</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >Reading:&nbsp;6&nbsp;Writing:&nbsp;179&nbsp;Waiting:&nbsp;106</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=pre ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Active&nbsp;connections&nbsp;&nbsp;&nbsp;&nbsp;//当前&nbsp;Nginx&nbsp;正处理的活动连接数。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >server&nbsp;accepts&nbsp;handled&nbsp;requests&nbsp;//总共处理了8&nbsp;个连接&nbsp;,&nbsp;成功创建&nbsp;8&nbsp;次握手,总共处理了500个请求。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Reading&nbsp;//nginx&nbsp;读取到客户端的&nbsp;Header&nbsp;信息数。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Writing&nbsp;//nginx&nbsp;返回给客户端的&nbsp;Header&nbsp;信息数。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Waiting&nbsp;//开启&nbsp;keep-alive&nbsp;的情况下，这个值等于&nbsp;active&nbsp;-&nbsp;(reading&nbsp;+&nbsp;writing)，意思就是&nbsp;Nginx&nbsp;已经处理完正在等候下一次请求指令的驻留连接</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.13<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >文件编码</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >指定服务器文件输出的编码格式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果使用请使用utf-8,source_charset不设置或者也使用utf-8</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><table class=MsoNormalTable  style="border-collapse:collapse; width:285.0000pt; margin-left:4.6500pt; mso-table-layout-alt:fixed; mso-padding-alt:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><tr><td width=74  valign=center  style="width:55.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >syntax:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=306  valign=center  style="width:229.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; font-weight:bold; " >charset</span><span class="20"  style="font-family:宋体; font-size:12.0000pt; " >&nbsp;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; " >charset</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >&nbsp;|&nbsp;off;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=74  valign=center  style="width:55.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >default:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=306  valign=center  style="width:229.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >charset&nbsp;off;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;#默认不转换</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=pre ><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p></td></tr><tr><td width=74  valign=center  style="width:55.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >C</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >context:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=306  valign=center  style="width:229.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >http</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >,&nbsp;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >server</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >,&nbsp;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >location</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >,&nbsp;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >if&nbsp;in&nbsp;location</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr></table><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Adds&nbsp;the&nbsp;specified&nbsp;charset&nbsp;to&nbsp;the&nbsp;&#8220;Content-Type&#8221;&nbsp;response&nbsp;header&nbsp;field.&nbsp;If&nbsp;this&nbsp;charset&nbsp;is&nbsp;different&nbsp;from&nbsp;the&nbsp;charset&nbsp;specified&nbsp;in&nbsp;the&nbsp;</span><span><a href="#source_charset" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >source_charset</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;directive,&nbsp;a&nbsp;conversion&nbsp;is&nbsp;performed.&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >请求返回的编码</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >The&nbsp;parameter&nbsp;</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; " >off</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;cancels&nbsp;the&nbsp;addition&nbsp;of&nbsp;charset&nbsp;to&nbsp;the&nbsp;&#8220;Content-Type&#8221;&nbsp;response&nbsp;header&nbsp;field.</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;nginx对编码转换支持的不好，所以不要使用这个转换。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="348"  height="174"  src="nginx.files/nginx26741.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="35"  src="nginx.files/nginx26744.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="#source_charset" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/en/docs/http/ngx_http_charset_module.html#source_charset</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.14<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >请求超时</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><table class=MsoNormalTable  style="border-collapse:collapse; width:207.8500pt; margin-left:4.6500pt; mso-table-layout-alt:fixed; mso-padding-alt:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><tr><td width=66  valign=center  style="width:49.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >syntax:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=211  valign=center  style="width:158.3500pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >keepalive_requests</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >number</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=66  valign=center  style="width:49.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >default:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=211  valign=center  style="width:158.3500pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >keepalive_requests&nbsp;100;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=66  valign=center  style="width:49.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >context:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=211  valign=center  style="width:158.3500pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http,&nbsp;server,&nbsp;location</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr></table><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >This&nbsp;directive&nbsp;appeared&nbsp;in&nbsp;version&nbsp;0.8.0.&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Sets&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;requests&nbsp;that&nbsp;can&nbsp;be&nbsp;served&nbsp;through&nbsp;one&nbsp;keep-alive&nbsp;connection.&nbsp;After&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;requests&nbsp;are&nbsp;made,&nbsp;the&nbsp;connection&nbsp;is&nbsp;closed.&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><table class=MsoNormalTable  style="border-collapse:collapse; width:309.8000pt; margin-left:4.6500pt; mso-table-layout-alt:fixed; mso-padding-alt:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><tr><td width=66  valign=center  style="width:49.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><a name="keepalive_timeout" ></a>syntax:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=347  valign=center  style="width:260.3000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >keepalive_timeout</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >timeout</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;[</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >header_timeout</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >];</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=66  valign=center  style="width:49.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >default:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=347  valign=center  style="width:260.3000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >keepalive_timeout&nbsp;75s;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr><tr><td width=66  valign=center  style="width:49.5000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >context:&nbsp;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td><td width=347  valign=center  style="width:260.3000pt; padding:0.7500pt 0.7500pt 0.7500pt 0.7500pt ; " ><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http,&nbsp;server,&nbsp;location</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr></table><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >The&nbsp;first&nbsp;parameter&nbsp;sets&nbsp;a&nbsp;timeout&nbsp;during&nbsp;which&nbsp;a&nbsp;keep-alive&nbsp;client&nbsp;connection&nbsp;will&nbsp;stay&nbsp;open&nbsp;on&nbsp;the&nbsp;server&nbsp;side.&nbsp;The&nbsp;zero&nbsp;value&nbsp;disables&nbsp;keep-alive&nbsp;client&nbsp;connections.&nbsp;The&nbsp;optional&nbsp;second&nbsp;parameter&nbsp;sets&nbsp;a&nbsp;value&nbsp;in&nbsp;the&nbsp;&#8220;Keep-Alive:&nbsp;timeout=</span><span style="mso-spacerun:'yes'; font-family:宋体; font-style:italic; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >time</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8221;&nbsp;response&nbsp;header&nbsp;field.&nbsp;Two&nbsp;parameters&nbsp;may&nbsp;differ.&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.15<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >客户端流量<font face="Cambria" >&#160;</font><font face="宋体" >限制</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;通过以下两条命令来完成。&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >指令名称：limit_rate</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:60.0000pt; text-indent:-60.0000pt; mso-char-indent-count:-5.0000; line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >功&nbsp;&nbsp;&nbsp;&nbsp;能：该指令用于指定向客户端传输数据的速度，速度的单位是每秒传输的字节数。需要明白的一点是该限制只是针对一个连接的设定，就是说如果同时有两个连接那么它的速度将会是该指令设置值的2倍，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果需要在server级别对某些客户端限制速度，对于这种情况&#8212;&#8212;这个指令可能并不适合，但是可设置$limit_rate变量，可以为该变量传递相应的值来实现，例如：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><table class=MsoNormalTable  style="border-collapse:collapse; width:378.3500pt; margin-left:23.4000pt; mso-table-layout-alt:fixed; mso-padding-alt:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; " ><tr style="height:7.4500pt; " ><td width=504  valign=top  style="width:378.3500pt; padding:0.0000pt 5.4000pt 0.0000pt 5.4000pt ; border-left:0.5000pt solid windowtext; mso-border-left-alt:0.5000pt solid windowtext; border-right:0.5000pt solid windowtext; mso-border-right-alt:0.5000pt solid windowtext; border-top:0.5000pt solid windowtext; mso-border-top-alt:0.5000pt solid windowtext; border-bottom:0.5000pt solid windowtext; mso-border-bottom-alt:0.5000pt solid windowtext; " ><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >server&nbsp;{</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;if&nbsp;($slow)&nbsp;{</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;set&nbsp;$limit_rate&nbsp;&nbsp;4k;</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;}</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="mso-line-height-alt:12pt; " ><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p></td></tr></table><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;当然也可以通过设置X-Accel-Limit-Rate头(来自于NginxXSendfile模块)来控制由proxy_pass(来自于HttpProxyModule模块)返回的响应数据的速率，而没有使用X-Accel-Redirect头。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >语&nbsp;&nbsp;&nbsp;&nbsp;法:&nbsp;limit_rate&nbsp;speed&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >默&nbsp;认&nbsp;值:&nbsp;no&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >使用环境:&nbsp;http,&nbsp;server,&nbsp;location,&nbsp;if&nbsp;in&nbsp;location&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >指&nbsp;&nbsp;&nbsp;&nbsp;令：limit_rate_after</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:60.0000pt; text-indent:-60.0000pt; mso-char-indent-count:-5.0000; line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >功</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >能：</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >limit_rate_after</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，这个命令中的&#8220;</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >after</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8221;提示了我们，可以这样理解&#8220;在</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8230;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >后再限制速率为</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8230;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8221;，没错，就是这个意思，它的语法为：</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >limit_rate_after&nbsp;time(</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >这是官方威客上</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http://wiki.nginx.org/HttpCoreModule#limit_rate</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >的语法</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >)</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，它的意思是以最大的速度下载</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >time</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >时长后，但是在实际的使用中发现命令</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >limit_rate_after</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >的参数是一个下载字节量的大小值，而不是时间值，因此上面的命令&#8220;</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >limit_rate_after&nbsp;3m</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8221;解释为：以最大的速度下载</span><span style="mso-spacerun:'yes'; font-family:'Times New Roman'; mso-fareast-font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >3M</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:'Times New Roman'; mso-hansi-font-family:'Times New Roman'; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >后。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >语&nbsp;&nbsp;&nbsp;&nbsp;法：limit_rate_after&nbsp;size&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >默&nbsp;认&nbsp;值：limit_rate_after&nbsp;1m&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:12pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >使用字段：http,&nbsp;server,&nbsp;location,&nbsp;location中的if字段&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.16<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >HTTPS</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.16.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >https设置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >主要增加了证书设置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l28 level1 lfo16; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >生成证书</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >yum&nbsp;install&nbsp;openssl&nbsp;openssl-devel</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >openssl&nbsp;genrsa&nbsp;-des3&nbsp;-out&nbsp;allinpay.key&nbsp;2048</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >opensll&nbsp;req&nbsp;-new&nbsp;-key&nbsp;allinpay.key&nbsp;-out&nbsp;allinpay.csr</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >openssl&nbsp;x509&nbsp;-req&nbsp;&nbsp;-days&nbsp;365&nbsp;-in&nbsp;allinpay.csr&nbsp;&nbsp;-signkey&nbsp;allinpay.key&nbsp;-out&nbsp;allinpay.crt</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l28 level1 lfo16; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >server&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;443&nbsp;ssl;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;localhost;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/etc/nginx/conf.d/allinpay.crt;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate_key&nbsp;&nbsp;/etc/nginx/conf.d/allinpay.key;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l28 level1 lfo16; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >更多设置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >#<font face="宋体" >为一个</font><font face="Consolas" >server</font><font face="宋体" >开启</font><font face="Consolas" >ssl</font><font face="宋体" >支持</font><font face="Consolas" >&#160;&#160;</font></span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;ssl&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;on;&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;#<font face="宋体" >为虚拟主机指定</font><font face="Consolas" >pem</font><font face="宋体" >格式的证书文件</font><font face="Consolas" >&#160;&#160;</font></span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;ssl_certificate&#160;&#160;&#160;&#160;&#160;&#160;/home/wangzhengyi/ssl/wangzhengyi.crt;&#160;&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;#<font face="宋体" >为虚拟主机指定私钥文件</font><font face="Consolas" >&#160;&#160;</font></span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >6.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;ssl_certificate_key&#160;&#160;/home/wangzhengyi/ssl/wangzhengyi_nopass.key;&#160;&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >7.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;#<font face="宋体" >客户端能够重复使用存储在缓存中的会话参数时间</font><font face="Consolas" >&#160;&#160;</font></span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >8.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;ssl_session_timeout&#160;&#160;5m;&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >9.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;#<font face="宋体" >指定使用的</font><font face="Consolas" >ssl</font><font face="宋体" >协议</font><font face="Consolas" >&#160;&#160;&#160;</font></span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >10.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;ssl_protocols&#160;&#160;SSLv3&#160;TLSv1;&#160;&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >11.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;#<font face="宋体" >指定许可的密码描述</font><font face="Consolas" >&#160;&#160;</font></span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >12.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;ssl_ciphers&#160;&#160;ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;&#160;&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >13.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;#SSLv3<font face="宋体" >和</font><font face="Consolas" >TLSv1</font><font face="宋体" >协议的服务器密码需求优先级高于客户端密码</font><font face="Consolas" >&#160;&#160;</font></span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:28.5000pt; text-indent:-18.0000pt; border-top:0.7500pt solid rgb(209,215,220); mso-border-top-alt:0.7500pt solid rgb(209,215,220); border-right:0.7500pt solid rgb(209,215,220); mso-border-right-alt:0.7500pt solid rgb(209,215,220); border-bottom:0.7500pt solid rgb(209,215,220); mso-border-bottom-alt:0.7500pt solid rgb(209,215,220); border-left:0.7500pt solid rgb(209,215,220); mso-border-left-alt:0.7500pt solid rgb(209,215,220); padding:2pt 0pt 2pt 8pt ; line-height:13.5000pt; background:rgb(250,250,250); mso-list:l24 level1 lfo17; " ><![if !supportLists]><span style="font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >14.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(0,0,0); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;&#160;&#160;&#160;ssl_prefer_server_ciphers&#160;&#160;&#160;on;&#160;&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:Consolas; mso-fareast-font-family:宋体; color:rgb(43,145,175); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.16.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >http和https合一配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http和https可以放在一起，监听的时候指定那个是ssl就可以了，配置如下。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="145"  src="nginx.files/nginx29568.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置效果</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="373"  height="91"  src="nginx.files/nginx29576.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://nginx.org/cn/docs/http/configuring_https_servers.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/cn/docs/http/configuring_https_servers.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span><a href="http://www.cnblogs.com/tintin1926/archive/2012/07/12/2587311.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://www.cnblogs.com/tintin1926/archive/2012/07/12/2587311.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h1 style="mso-list:l11 level1 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >高级篇</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h1><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >编译源代码</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.1.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >在windwos下的编译Nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=p  style="margin-top:0.0000pt; margin-bottom:0.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Verdana; mso-hansi-font-family:Verdana; color:rgb(85,85,85); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在windows下编译nginx可以利用VC编译来调试nginx，当我们很熟悉了操作系统上层的实现之后转向分析nginx代码也方便一些。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在windows下编译nginx跟在Linux下的步骤差不多。利用svn工具下载源码，第三方网站下载的tar文件中没有win32的配置文件；由于configure文件是sh脚本，所以只能用第三方仿真软件，我这里用的是MinGW&nbsp;Shell；配置完成后就是编译，只要调用VC的编译工具cl.exe编译就行了。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >下载工具</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >需要的工具有：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >1.TortoiseSVN:</span><span><a href="http://downloads.sourceforge.net/project/tortoisesvn/1.7.5/Application/TortoiseSVN-1.7.5.22551-win32-svn-1.7.3.msi" ><span class="41"  style="mso-spacerun:'yes'; font-family:Verdana; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:9.0000pt; " >http://downloads.sourceforge.net/project/tortoisesvn/1.7.5/Application/TortoiseSVN-1.7.5.22551-win32-svn-1.7.3.msi</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2.MinGW32:</span><span><a href="http://10.10.4.6/download/7377061/8602355/3/exe/230/40/1322227850470_40/mingw-get-inst-20111118.exe" ><span class="41"  style="mso-spacerun:'yes'; font-family:Verdana; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:9.0000pt; " >http://10.10.4.6/download/7377061/8602355/3/exe/230/40/1322227850470_40/mingw-get-inst-20111118.exe</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >3.VC2010&nbsp;express:</span><span><a href="http://download.microsoft.com/download/e/5/e/e5e362e1-6a2a-4ce3-bbac-659c9740ab04/vc_web.exe" ><span class="41"  style="mso-spacerun:'yes'; font-family:Verdana; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:9.0000pt; " >http://download.microsoft.com/download/e/5/e/e5e362e1-6a2a-4ce3-bbac-659c9740ab04/vc_web.exe</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >上面的工具下载安装完成即可。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >下载源码</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >源码地址在：svn://svn.nginx.org/nginx/trunk&nbsp;使用svn将源码检出到本地任意目录，比如f:\nginx\trunk</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >目录结构如下：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置代码环境</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >打开cmd命令行提示:</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >cmd</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2.设置VC的环境变量：在命令提示符中键入命令（根据VC的安装目录不同而不同,x86为参数）</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >"C:\Program&nbsp;Files\Microsoft&nbsp;Visual&nbsp;Studio&nbsp;10.0\VC\vcvarsall.bat"&nbsp;x86</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >设置MinGW：在命令提示符键入命令（根据MinGW32安装目录不同而不同）：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >C:\MinGW\msys\1.0\msys.bat</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >检查环境：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >弹出MinGW窗口，关闭其它的cmd窗口。在MinGW32的窗口输入:</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >cl.exe</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >cd&nbsp;/f/nginx/trunk</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置:</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >./auto/configure&nbsp;--prefix=.&nbsp;--with-cc-opt="-D&nbsp;FD_SETSIZE=4096"&nbsp;--without-http_rewrite_module&nbsp;--without-http_gzip_module&nbsp;--with-cc=cl</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注解：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;prefix=.&nbsp;表示安装目录在本目录下</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;with-cc-opt=&#8221;-D&nbsp;FD_SETSIZE=4096&#8243;&nbsp;预定义宏FD_SETSIZE大小4096</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;without-http_rewrite_module&nbsp;不加载rewite模块</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;without-http_gzip_module&nbsp;不加载gzip模块</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;with-cc=cl&nbsp;编译器为cl</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >编译:</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nmake</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在obj/目录下为生成的中间文件和nginx.exe文件。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:0.0000pt; " ><span style="mso-spacerun:'yes'; font-family:Calibri; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:Calibri; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >5.1.2<span>&nbsp;</span></span></span><![endif]><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >在linux下编译版本</span><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h3><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.1.2.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >下载</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >wget&nbsp;</span><span><a href="http://nginx.org/download/nginx-1.7.1.tar.gz" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/download/nginx-1.7.1.tar.gz</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >tar&nbsp;-xvzf&nbsp;&nbsp;nginx-1.7.1.tar.gz</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.1.2.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;配置编译选项</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >编译配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >./configure&nbsp;&nbsp;--sbin-path=/usr/sbin/nginx&nbsp;--conf-path=/etc/nginx/nginx.conf&nbsp;&nbsp;--with-pcre=/root/pcre-8.33&nbsp;--with-zlib=/root/zlib-1.2.8&nbsp;--with-http_stub_status_module&nbsp;&nbsp;--with-http_ssl_module&nbsp;--add-module=../ngx_cache_purge-2.1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >说明：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >--sbin-path&nbsp;执行文件nginx的路径</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >--conf-path&nbsp;&nbsp;配置文件的路径</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >--with-pcre&nbsp;编译依赖pcre正则表达式库</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >--</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >with</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >-zlib&nbsp;&nbsp;编译依赖zlib库</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >--with-xxxx&nbsp;&nbsp;是开启某个功能特性</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >--add-module&nbsp;是编译插件，插件下载源代码，然后指定目录就可以了。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >更多资料：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://nginx.org/en/docs/configure.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/en/docs/configure.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;编译选项</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.1.2.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >下载相关依赖包</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l29 level1 lfo18; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >PCRE&nbsp;-&nbsp;Perl&nbsp;Compatible&nbsp;Regular&nbsp;Expressions</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://www.pcre.org/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://www.pcre.org/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:6.0000pt; mso-para-margin-left:0.5000gd; text-indent:6.0000pt; mso-char-indent-count:0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >linux下安装安装pcre-8.32</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l29 level1 lfo18; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >zlib</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.1.2.4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >编译安装</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >make&nbsp;&&nbsp;make&nbsp;install</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.1.2.5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;插件安装</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><span><a href="http://labs.frickle.com/files/ngx_cache_purge-2.1.tar.gz" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://labs.frickle.com/files/ngx_cache_purge-2.1.tar.gz</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.1.2.6<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >编译常见错误</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal  style="margin-left:6.0000pt; text-indent:-6.0000pt; mso-char-indent-count:-0.5000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >configure:&nbsp;error:&nbsp;You&nbsp;need&nbsp;a&nbsp;C++&nbsp;compiler&nbsp;for&nbsp;C++&nbsp;support</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >说明已经安装&nbsp;gcc,需要安装&nbsp;gcc-c++,执行命令</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >yum&nbsp;install&nbsp;gcc-c++&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >Nginx&nbsp;Linux<font face="宋体" >服务</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.2.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >linux&nbsp;把nginx加入到系统服务，并开机自己启动的方法</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >yum&nbsp;install&nbsp;nginx有这个脚本，也是直接使用。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/etc/rc.d/init.d/nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="mso-line-height-alt:12pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >一。首先写一个shell脚本，脚本名称：nginx</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >参考&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/etc/rc.d/init.d/nginx</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; color:rgb(0,0,0); font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >二。将shell脚本放入到&nbsp;/etc/rc.d/init.d/</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;目录下</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，并执行下列命令</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >1：chmod&nbsp;+x&nbsp;/etc/rc.d/init.d/nginx&nbsp;（设置可执行权限）</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2：chkconfig&nbsp;--add&nbsp;nginx&nbsp;（添加系统服务）</span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,0); font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.2.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >Nginx&nbsp;Windows服务</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span class="36"  style="mso-spacerun:'yes'; font-family:Arial; color:rgb(102,102,102); font-weight:bold; font-size:9.0000pt; " >1.&nbsp;<font face="宋体" >下载微软的</font><font face="Arial" >2</font><font face="宋体" >个工具</font><font face="Arial" >:&nbsp;instsrv.exe</font><font face="宋体" >、</font><font face="Arial" >srvany.exe</font></span><span style="mso-spacerun:'yes'; font-family:Arial; mso-fareast-font-family:宋体; color:rgb(102,102,102); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:Arial; mso-fareast-font-family:宋体; color:rgb(102,102,102); font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:Arial; mso-fareast-font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >去微软网站下载安装<font face="Arial" >Windows&nbsp;Server&nbsp;2003&nbsp;Resource&nbsp;Kit&nbsp;Tools(rktools.exe)</font></span><span style="mso-spacerun:'yes'; font-family:Arial; mso-fareast-font-family:宋体; font-size:10.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:7.5000pt; background:rgb(255,255,255); " ><span class="36"  style="mso-spacerun:'yes'; font-family:Arial; color:rgb(102,102,102); font-weight:bold; font-size:9.0000pt; " >2.&nbsp;<font face="宋体" >运行命令</font></span><span style="mso-spacerun:'yes'; font-family:Arial; mso-fareast-font-family:宋体; color:rgb(102,102,102); font-size:9.0000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:Arial; mso-fareast-font-family:宋体; color:rgb(98,91,73); font-size:11.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:7.5000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >在rktools安装目录下(一般在C:\Program&nbsp;Files\Windows&nbsp;Resource&nbsp;Kits\Tools目录)可以发现这两个程序.在运行下面命令之前，确保将srvany.exe复制到nginx的安装(解压)目录下，然后运行:&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >Command代码</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >instsrv&#160;Nginx&#160;D:\nginx\srvany.exe</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >这样就安装了一个名为Nginx的服务。也就是将srvany.exe注册成一个服务Nginx。Net&nbsp;start&#160;Nginx时，肯定会运行srvany.exe。&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span class="36"  style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; color:rgb(98,91,73); font-weight:bold; font-size:10.5000pt; " >3.&nbsp;配置Nginx的运行参数：目的是运行srvany.exe时，附带运行D:\nginx\nginx.exe程序。</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; color:rgb(98,91,73); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; color:rgb(98,91,73); font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >可以直接将配置导入到注册表&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >Window&nbsp;register代码</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >Windows&nbsp;Registry&nbsp;Editor&nbsp;Version&#160;5.00&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:7.5000pt; word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >?[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NGINX\Parameters]&nbsp;&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:7.5000pt; word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >"Application"="e:\&#8230;&#8230;\nginx\nginx.exe"&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:7.5000pt; word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >"AppParameters"=""&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >"AppDirectory"="e:\&#8230;&#8230;\nginx\"&#160;&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >现在就可以通过控制面板-&#62;管理员工具-&#62;服务中找到该服务，并启动和停止了。&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >但是，当停止Nginix服务后，访问浏览器仍然能看到网站。查看进程，你会发现，Nginx启动了两个nginx进程(根据nginx.conf的配置worker_processes&nbsp;1;)，Fork出来的进程显然没有被停止，结果就是nginx永远关不掉。因此彻底关闭nginx请使用taskkill命令:&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >Command代码</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >taskkill&nbsp;/F&nbsp;/IM&#160;nginx.exe&nbsp;&#62;&nbsp;nul</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="line-height:15.0000pt; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >结果是写一个stop_nginx脚本来处理nginx停止的所有操作&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >Command代码</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >@echo&nbsp;off&#160;&#160;</span><span class="42"  style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >echo&nbsp;Stopping&nbsp;nginx&nbsp;service...</span><span class="42"  style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >net&nbsp;stop&nbsp;nginx&#160;&#160;</span><span class="42"  style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >echo&nbsp;Kill&nbsp;nginx&nbsp;process...&#160;&#160;</span><span class="42"  style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; " >&#160;</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >taskkill&nbsp;/F&nbsp;/IM&nbsp;nginx.ex</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >e</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="word-break:break-all; background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >参考</span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-weight:bold; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://blog.slogra.com/?post=2" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://blog.slogra.com/?post=2</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://bluexp29.blog.163.com/blog/static/33858148201152275447553/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://bluexp29.blog.163.com/blog/static/33858148201152275447553/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; mso-bidi-font-family:Arial; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >修改<font face="Cambria" >nginx</font><font face="宋体" >服务标识</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >首先修改源文件，然后重新编译一下。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >vi&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >src/core/</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx.h</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><img width="442"  height="274"  src="nginx.files/nginx34283.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >效果如下图</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="369"  height="129"  src="nginx.files/nginx34291.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >Nginx<font face="宋体" >优化</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx优化主要包括两个方面，一个是自身的优化，另一个是运行环境优化。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >自身的优化包括支持高并发，高可靠，高性能，一般从支持连接数，集群，更好的网络模型，缓存等着手考虑，nginx应用场景不同，所以还要更具具体的应用场景做配置上的调整。另一个是nginx运行环境的优化，包括nginx运行的软硬件环境，硬件环境取决于服务类型选择和投入情况，软件优化只是从操作系统级别进行调整。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;cpu调整</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx多进程多线程模式，每个worker占用一个进程。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx使用的时候要指定工作的进程数，默认为1.&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >这个数目一般和处理器的数据</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >官方给出的建议：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >一般一个进程足够了，你可以把连接数设得很大。如果有SSL、</span><span><a href="http://www.ha97.com/tag/gzip"  title="gzip" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >gzip</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >这些比较消耗CPU的工作，而且是多核CPU的话，可以设为和CPU的数量一样。或&nbsp;者要处理很多很多的小文件，而且文件总大小比内存大很多的时候，也可以把进程数增加，以充分利用IO带宽（主要似乎是IO操作有block）。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >我们知道不管是多进程还是单一进程主要的目的是尽可能的压榨cpu。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >一个进程的最大连接数是65535个，如果想突破这个连接数就必须增加进程数。高并发的情况下，需要提供进程数目。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >多核多进程要比多核多线程更稳定，所以多核环境下尽可能配置成多进程。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置成多进程唯一要考虑的是多进程切换问题所带来的开销。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >高并发的时候配置成：和cpu一样的数量。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.1.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >全局环境下配置工作线程</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过下面的命令查看cpu信息</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >cat&nbsp;/proc/cpuinfo&nbsp;|&nbsp;grep&nbsp;processor</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果cpu有四个核心</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >worker_processes&nbsp;4;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >worker_cpu_affinity&nbsp;0001&nbsp;0010&nbsp;0100&nbsp;1000;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果cpu有八个核心&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >worker_processes&nbsp;8;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >worker_cpu_affinity&nbsp;00000001&nbsp;00000010&nbsp;00000100&nbsp;00001000&nbsp;00010000&nbsp;00100000&nbsp;01000000&nbsp;10000000;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如果cpu有十六个核心&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >worker_processes&nbsp;16;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >worker_cpu_affinity&nbsp;0000000000000001&nbsp;0000000000000010&nbsp;0000000000000100&nbsp;0000000000001000&nbsp;0000000000010000&nbsp;0000000000100000&nbsp;0000000001000000&nbsp;0000000010000000&nbsp;0000000100000000&nbsp;0000001000000000&nbsp;0000010000000000&nbsp;0000100000000000&nbsp;0001000000000000&nbsp;0010000000000000&nbsp;0100000000000000&nbsp;1000000000000000;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.1.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >Windows<font face="宋体" >多核稳定性测试</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l4 level1 lfo19; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1．<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >测试环境</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="130"  src="nginx.files/nginx35564.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >W</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >i</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >ndow7&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="349"  height="98"  src="nginx.files/nginx35576.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="393"  height="112"  src="nginx.files/nginx35579.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l4 level1 lfo19; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2．<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >一个工作进程</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="228"  src="nginx.files/nginx35589.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >C</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >pu，windows系统自动分配。&nbsp;全部可以用</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="289"  src="nginx.files/nginx35616.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="500"  src="nginx.files/nginx35621.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >结论：相当快，比较稳定。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >四核</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="419"  height="106"  src="nginx.files/nginx35643.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="329"  src="nginx.files/nginx35645.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="240"  src="nginx.files/nginx35649.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >结论:直接不工作</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置&nbsp;8</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="285"  src="nginx.files/nginx35667.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >工作，但是很不稳定&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >结论：在其他配置，不可用。&nbsp;windows系统上非常不稳定。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;最大连接数</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >worker_connections是最大连接数，但是这个连接说是对一个worker进程来说的，所以</span><span style="mso-spacerun:'yes'; font-family:Tahoma; mso-fareast-font-family:宋体; color:rgb(69,69,69); font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&#160;</span><span class="36"  style="mso-spacerun:'yes'; font-family:Tahoma; color:rgb(69,69,69); font-weight:bold; font-size:10.5000pt; " >最大连接数&nbsp;<font face="Tahoma" >=&nbsp;worker_processes&nbsp;*&nbsp;worker_connections</font></span><span class="36"  style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Tahoma; mso-hansi-font-family:Tahoma; mso-bidi-font-family:Tahoma; color:rgb(69,69,69); font-weight:bold; font-size:10.5000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><img width="343"  height="169"  src="nginx.files/nginx35820.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注意worker_connection依赖worker_rlimit_nofile&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span class="36"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; font-weight:bold; " >worker_rlimit_nofile</span><span class="36"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; " >是<font face="Times New Roman" >worker</font><font face="宋体" >工作进程资源限制中文件的数目，代表了</font></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >worker进程的最大打开文件数限制</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，如果没有设置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >高并发的时候</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >会有&#8220;too&nbsp;many&nbsp;open&nbsp;files&#8221;问题了。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="99"  src="nginx.files/nginx35975.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >这个值</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >受</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >操作系统的限制</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，需要修改用户的打开文件限制</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >执行命令&nbsp;ulimit&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >SHn&nbsp;65535</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="346"  height="172"  src="nginx.files/nginx36029.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;网络工作模式</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx会自动选择，这个可以不用配置。</span><span class="20"  style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >events&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;use&nbsp;epoll;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8230;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; display:none; mso-hide:all; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >use</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >设置用于复用客户端线程的轮询方法。如果你使用Linux&nbsp;2.6+，你应该使用epoll。如果你使用*BSD，你应该使用kqueue。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >压力测试</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >2000个并发&nbsp;cpu使用率17%</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >3000个并发&nbsp;cpu使用率20%</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >所以nginx对cpu的占用率非常低，内存增加100MB,性能瓶颈主要在网络IO。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >下面是2000并发压力和3000并发压力的测试</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.4.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;2000<font face="宋体" >个压力</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="449"  height="266"  src="nginx.files/nginx36278.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="147"  src="nginx.files/nginx36281.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="177"  src="nginx.files/nginx36284.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="190"  src="nginx.files/nginx36287.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h4 style="mso-list:l11 level4 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.4.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;3000<font face="宋体" >个并发压力</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h4><p class=MsoNormal ><img width="395"  height="240"  src="nginx.files/nginx36301.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><img width="554"  height="165"  src="nginx.files/nginx36303.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="165"  src="nginx.files/nginx36306.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;运行状态查看</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=NewStyle76  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:18.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l0 level1 lfo20; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >通过</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http://localhost/status&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >进行监控</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:18.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l0 level1 lfo20; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >查看当前连接状态</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >执行命令：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >netstat&nbsp;-n&nbsp;|&nbsp;awk&nbsp;'/^tcp/&nbsp;{++S[$NF]}&nbsp;END&nbsp;{for(a&nbsp;in&nbsp;S)&nbsp;print&nbsp;a,&nbsp;S[a]}'</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >显示：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >TIME_WAIT&nbsp;17</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >ESTABLISHED&nbsp;3254</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >LAST_ACK&nbsp;236</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >FIN_WAIT_1&nbsp;648</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >FIN_WAIT_2&nbsp;581</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >CLOSING&nbsp;7</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >CLOSE_WAIT&nbsp;4916</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >状态说明：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >CLOSED&nbsp;&nbsp;//无连接是活动的或正在进行</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >LISTEN&nbsp;&nbsp;//服务器在等待进入呼叫</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >SYN_RECV&nbsp;&nbsp;//一个连接请求已经到达，等待确认</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >SYN_SENT&nbsp;&nbsp;//应用已经开始，打开一个连接</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >ESTABLISHED&nbsp;&nbsp;//正常数据传输状态/当前并发连接数</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >FIN_WAIT1&nbsp;&nbsp;//应用说它已经完成</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >FIN_WAIT2&nbsp;&nbsp;//另一边已同意释放</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >ITMED_WAIT&nbsp;&nbsp;//等待所有分组死掉</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >CLOSING&nbsp;&nbsp;//两边同时尝试关闭</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >TIME_WAIT&nbsp;&nbsp;//另一边已初始化一个释放</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " >LAST_ACK&nbsp;&nbsp;//等待所有分组死掉</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:9.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l0 level1 lfo20; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >tsar工具提供了对nginx监控</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >Tsar是淘宝开发的一个非常好用的系统监控工具，在淘宝内部大量使用</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，是对系统命令sar的增强</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >它不仅可以监控CPU、IO、内存、TCP等系统状态，也可以监控Apache，Nginx/Tengine，Squid等服务器状态</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >值得一提的是Tsar&nbsp;支持将数据存储到&nbsp;MySQL&nbsp;中，也可以将数据发送到&nbsp;Nagios&nbsp;报警服务器</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:30.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; text-align:justify; text-justify:inter-ideograph; mso-list:l10 level1 lfo21; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >获取编译</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >$wget&nbsp;-O&nbsp;tsar.zip&nbsp;</span><span><a href="https://github.com/alibaba/tsar/archive/master.zip" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&#160;https://github.com/alibaba/tsar/archive/master.zip</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >$unzip&nbsp;tsar.zip&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >$cd&nbsp;tsar</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >-master</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >$make&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >$make&nbsp;install&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:30.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; text-align:justify; text-justify:inter-ideograph; mso-list:l10 level1 lfo21; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >编辑配置文件</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >vi&nbsp;/etc/tsar/tsar.conf</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，开启mod_nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><img width="198"  height="147"  src="nginx.files/nginx37226.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; text-align:justify; text-justify:inter-ideograph; mso-list:l29 level1 lfo18; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >执行命令</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >tsar&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#8211;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >l&nbsp;&nbsp;&nbsp;&nbsp;#每隔5秒钟，显示统计数据</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><img width="554"  height="90"  src="nginx.files/nginx37266.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >发现所有的结果值都是横线</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >,是因为mod_nginx依赖&nbsp;nginx的状态模块</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >需要配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >location&nbsp;/nginx_status&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stub_status&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access_log&nbsp;&nbsp;&nbsp;off;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow&nbsp;127.0.0.1;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deny&nbsp;all;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >其获取状态页的url默认是</span><span><a href="http://127.0.0.1/nginx_status" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://127.0.0.1/nginx_status</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >tar_nginx使用的几个环境变量</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >export&nbsp;NGX_TSAR_HOST=</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >127.0.0.1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >export&nbsp;NGX_TSAR_PORT=80</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >export&nbsp;NGX_TSAR_SERVER_NAME=</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >localhost</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >export&nbsp;NGX_TSAR_URI=/nginx_status</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考资料：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span><a href="http://www.361way.com/tsar-nginx/2308.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://www.361way.com/tsar-nginx/2308.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span><a href="https://github.com/taobao/tsar-mod_nginx" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >https://github.com/taobao/tsar-mod_nginx</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; text-align:justify; text-justify:inter-ideograph; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >配置实用请参考&nbsp;</span><span><a href="http://code.taobao.org/p/tsar/wiki/guide/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://code.taobao.org/p/tsar/wiki/guide/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >教程&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >http://code.taobao.org/p/tsar/wiki/index/</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >官方网站：&nbsp;</span><span><a href="http://tsar.taobao.org/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://tsar.taobao.org/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-left:12.0000pt; mso-para-margin-left:1.0000gd; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:48.0000pt; mso-para-margin-left:4.0000gd; text-indent:0.0000pt; mso-char-indent-count:0.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l0 level1 lfo20; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >4.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >自定义脚本，添加到定时任务中</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-top:5.0000pt; margin-bottom:5.0000pt; margin-left:18.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; text-indent:0.0000pt; mso-char-indent-count:0.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >下面</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >脚本用于监控Nginx的连接数，Nginx所占用内存的总数，以及进程数。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#/bin/bash</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >host=`hostname`</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >ip=`ifconfig&nbsp;eth0&nbsp;|&nbsp;grep&nbsp;&#8216;inet&nbsp;addr&#8217;|sed&nbsp;&#8216;s/.*addr://g&#8217;|sed&nbsp;&#8216;s/B.*//g&#8217;`</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#监控nginx的连接数</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >http_req=`netstat&nbsp;-nat|grep&nbsp;-i&nbsp;&#8220;80&#8243;|wc&nbsp;-l&nbsp;`</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >time_stamp=`date&nbsp;&#8220;+%Y/%m/%d&nbsp;%T&#8221;`</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >if&nbsp;[&nbsp;${http_req}&nbsp;-ge&nbsp;300&nbsp;];</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >then</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >echo&nbsp;&#8220;alert&nbsp;==&#62;&nbsp;${host}@${ip}:&nbsp;http&nbsp;connection&nbsp;${http_req}&nbsp;&#62;=&nbsp;300&nbsp;@${time_stamp}&nbsp;&#8221;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >else</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >echo&nbsp;&#8220;${host}@${ip}:&nbsp;http&nbsp;connection&nbsp;${http_req}&nbsp;@&nbsp;${time_stamp}&#8221;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >fi</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >##监控nginx的进程</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >nginx_proc=`ps&nbsp;-C&nbsp;nginx&nbsp;&#8211;no-header&nbsp;|&nbsp;wc&nbsp;-l&nbsp;`</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >time_stamp=`date&nbsp;&#8220;+%Y/%m/%d&nbsp;%T&#8221;`</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >if&nbsp;[&nbsp;${nginx_proc}&nbsp;-ge&nbsp;100&nbsp;]</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >then</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >echo&nbsp;&#8220;alert&nbsp;==&#62;&nbsp;${host}@${ip}:&nbsp;nginx&nbsp;process&nbsp;${nginx_proc}&nbsp;&#62;=&nbsp;100&nbsp;@${time_stamp}&nbsp;&#8221;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >else</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >echo&nbsp;&#8220;${host}@${ip}:&nbsp;nginx&nbsp;process&nbsp;${nginx_proc}&nbsp;@&nbsp;${time_stamp}&#8221;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >fi</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#监控nginx所占用的内存总数</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >nginx_mem=`top&nbsp;-b&nbsp;-n1&nbsp;|&nbsp;grep&nbsp;nginx&nbsp;|gawk&nbsp;&#8216;{sum&nbsp;+=&nbsp;$6};&nbsp;END&nbsp;{print&nbsp;int(sum/1024)}&#8217;&nbsp;`</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >time_stamp=`date&nbsp;&#8220;+%Y/%m/%d&nbsp;%T&#8221;`</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >if&nbsp;[&nbsp;${nginx_mem}&nbsp;-ge&nbsp;500&nbsp;]</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >then</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >echo&nbsp;&#8220;alert&nbsp;==&#62;&nbsp;${host}@${ip}:&nbsp;nginx&nbsp;memory&nbsp;usage&nbsp;${nginx_mem}&nbsp;MB&nbsp;&#62;=&nbsp;500&nbsp;@${time_stamp}&nbsp;&#8221;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >else</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >echo&nbsp;&#8220;${host}@${ip}:&nbsp;nginx&nbsp;memory&nbsp;${nginx_mem}MB&nbsp;@&nbsp;${time_stamp}&#8221;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >fi</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:0.0000pt; mso-char-indent-count:0.0000; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.6<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >其他优化建议</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l32 level1 lfo22; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >哪些日志开启，日志开启的级别</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l32 level1 lfo22; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >2.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >如何缓存静态资源&nbsp;，缓存资源会减少大量的连接和带宽。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l32 level1 lfo22; " ><![if !supportLists]><span style="font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >3.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >web服务器的压力是比较小的，重点优化后端。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.4.7<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >使用google-perfools优化nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >TCMalloc</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; background:rgb(249,249,249); mso-shading:rgb(249,249,249); " >在内存的分配上效率和速度要比malloc高得多。但是，nginx的内存占用其实是很少的，一个进程占用的内存大概只有12M左右，所以google-perftools对nginx的优化效果可能不太明显。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; background:rgb(249,249,249); mso-shading:rgb(249,249,249); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >编译参数</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >--with-google_perftools_module</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参考：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >https://</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >google-perftools.googlecode.com</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://book.51cto.com/art/201202/314837.htm" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://book.51cto.com/art/201202/314837.htm</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >TEngine<font face="宋体" >特性</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;继承Nginx-1.4.7的所有特性，100%兼容Nginx的配置；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/dso_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >动态模块加载（<font face="Times New Roman" >DSO</font><font face="宋体" >）</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >支持。加入一个模块不再需要重新编译整个Tengine；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;支持</span><span><a href="http://tengine.taobao.org/document_cn/ngx_http_spdy_module_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >SPDY&nbsp;v3<font face="宋体" >协议</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，自动检测同一端口的SPDY请求和HTTP请求；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/http_core_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >流式上传</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >到HTTP后端服务器或FastCGI服务器，大量减少机器的I/O压力；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;更加强大的负载均衡能力，包括</span><span><a href="http://tengine.taobao.org/document_cn/http_upstream_consistent_hash_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >一致性<font face="Times New Roman" >hash</font><font face="宋体" >模块</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >、</span><span><a href="http://tengine.taobao.org/document_cn/http_upstream_session_sticky_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >会话保持模块</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，</span><span><a href="http://tengine.taobao.org/document_cn/http_upstream_check_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >还可以对后端的服务器进行主动健康检查</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >，根据服务器状态自动上线下线；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://blog.zhuzhaoyuan.com/2012/01/a-mechanism-to-help-write-web-application-firewalls-for-nginx/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >输入过滤器机制</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >支持。通过使用这种机制Web应用防火墙的编写更为方便；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;支持设置proxy、memcached、fastcgi、scgi、uwsgi</span><span><a href="http://tengine.taobao.org/document_cn/ngx_limit_upstream_tries_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >在后端失败时的重试次数</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://wiki.nginx.org/HttpLuaModule" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >动态脚本语言<font face="Times New Roman" >Lua</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >支持。扩展功能非常高效简单；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/http_log_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >支持管道（<font face="Times New Roman" >pipe</font><font face="宋体" >）和</font><font face="Times New Roman" >syslog</font><font face="宋体" >（本地和远端）形式的日志以及日志抽样</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;支持按指定关键字(域名，url等)</span><span><a href="http://tengine.taobao.org/document_cn/http_reqstat_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >收集<font face="Times New Roman" >Tengine</font><font face="宋体" >运行状态</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/http_concat_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >组合多个<font face="Times New Roman" >CSS</font><font face="宋体" >、</font><font face="Times New Roman" >JavaScript</font><font face="宋体" >文件的访问请求变成一个请求</font></span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/http_trim_filter_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >自动去除空白字符和注释</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >从而减小页面的体积&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;自动根据CPU数目设置进程个数和绑定CPU亲缘性；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/http_sysguard_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >监控系统的负载和资源占用从而对系统进行保护</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/http_footer_filter_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >显示对运维人员更友好的出错信息，便于定位出错机器；</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/http_limit_req_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >更强大的防攻击（访问速度限制）模块</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;</span><span><a href="http://tengine.taobao.org/document_cn/commandline_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >更方便的命令行参数，如列出编译的模块列表、支持的指令等</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >；&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; mso-hansi-font-family:Symbol; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&#183;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;可以根据访问文件类型设置过期时间；</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >功能特性很多，下面列出几个比较重要的特性进行说明</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.5.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >进程设置优化</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:0.0000pt; mso-char-indent-count:0.0000; " ><img width="545"  height="340"  src="nginx.files/nginx41585.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.5.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;动态加载</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><img width="536"  height="214"  src="nginx.files/nginx41593.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span><a href="http://tengine.taobao.org/document_cn/dso_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://tengine.taobao.org/document_cn/dso_cn.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.5.3<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >session&nbsp;stick负责均衡</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><img width="554"  height="215"  src="nginx.files/nginx41729.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span><a href="http://tengine.taobao.org/document_cn/http_upstream_session_sticky_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://tengine.taobao.org/document_cn/http_upstream_session_sticky_cn.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.5.4<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;同时请求多个文件</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >减少http请求</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >ngx_http_concat_module</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >该模块类似于apache中的mod_concat模块，用于合并多个文件在一个响应报文中。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >请求参数需要用两个问号（'??'）例如：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >http://example.com/??style1.css,style2.css,foo/style3.css</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-top:5.0000pt; margin-bottom:5.0000pt; mso-margin-top-alt:auto; mso-margin-bottom-alt:auto; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >参数中某位置只包含一个&#8216;?&#8217;，则'?'后表示文件的版本，例如：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >http://example.com/??style1.css,style2.css,foo/style3.css?v=102234</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="margin-bottom:12.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;/static/css/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;concat&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;concat_max_files&nbsp;20;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;/static/js/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;concat&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;concat_max_files&nbsp;30;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><h3 style="mso-list:l11 level3 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >5.5.5<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;系统过载保护</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h3><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >模块默认没有编译，需要在编译时打开该模块:&nbsp;./configure&nbsp;--with-http_sysguard_module</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="554"  height="320"  src="nginx.files/nginx42366.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span><a href="http://tengine.taobao.org/document_cn/http_sysguard_cn.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://tengine.taobao.org/document_cn/http_sysguard_cn.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h1 style="mso-list:l11 level1 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >6<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >案例</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h1><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >6.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >线上服务配置参考</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx做前端服务&nbsp;&nbsp;keepalived做双机热备</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >tomcat做应用服务器&nbsp;&nbsp;N+1热备，其中两台是老机器，四台新机器（其中运行了两个服务）</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >memcached做tomcatsession管理&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >allinpay.com&nbsp;&nbsp;http服务</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >tlb.com&nbsp;&nbsp;&nbsp;&nbsp;提供https服务</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:0.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:0.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >下面分三个文件进行配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:0.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >nginx.conf</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=p  style="margin-top:0.0000pt; margin-bottom:0.0000pt; " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >user&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >nginx</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#单独用户</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >worker_processes&nbsp;&nbsp;1;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#处理器内核数目</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >worker_rlimit_nofile&nbsp;&nbsp;65535;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#最大资源</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >error_log&nbsp;&nbsp;/var/log/nginx/error.log&nbsp;warn;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >pid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/var/run/nginx.pid;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >events&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;worker_connections&nbsp;&nbsp;65535;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;use&nbsp;epoll;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >http&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/etc/nginx/mime.types;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;default_type&nbsp;&nbsp;application/octet-stream;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;log_format&nbsp;&nbsp;main&nbsp;&nbsp;'$remote_addr&nbsp;-&nbsp;$remote_user&nbsp;[$time_local]&nbsp;"$request"&nbsp;'</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'$status&nbsp;$body_bytes_sent&nbsp;"$http_referer"&nbsp;'</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'"$http_user_agent"&nbsp;"$http_x_forwarded_for"';</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;access_log&nbsp;&nbsp;/var/log/nginx/access.log&nbsp;&nbsp;main;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#sendfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on;&nbsp;&nbsp;#一般不要打开</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#tcp_nopush&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;keepalive_timeout&nbsp;&nbsp;65;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;gzip&nbsp;&nbsp;on;&nbsp;&nbsp;#&nbsp;api服务不需要打开</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;/etc/nginx/conf.d/*.conf;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#包括指令,&nbsp;包括下面的两个文件&nbsp;allinpay.com.conf和tlb.com.conf</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " >allinpay.com.conf</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-weight:bold; font-size:14.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#新机器做主服务器，轮询方式，旧机器做备机</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >upstream&nbsp;backend</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >_allinpay</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;server&nbsp;&nbsp;192.168.1.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >2</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >:8080&nbsp;;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:3.7500pt; mso-char-indent-count:0.5000; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >server&nbsp;&nbsp;192.168.1.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >3</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >:8080&nbsp;;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;server&nbsp;&nbsp;192.168.1.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >1</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >:8080&nbsp;backup;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#定义缓存</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_cache_path&nbsp;&nbsp;/data/nginx/</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >allinpay&nbsp;l</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >evels=1:2&nbsp;keys_zone=&nbsp;allinpay:</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >200m</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;&nbsp;inactive=1</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >0</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >d</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >max_size=</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >1g</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_temp_path&nbsp;&nbsp;/data/nginx/temp;&nbsp;&nbsp;#只能定义一个</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >server&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >allinpay.com</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;charset&nbsp;utf-8;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;access_log&nbsp;&nbsp;/var/log/nginx/log/</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >$</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >host</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >/</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >access.log&nbsp;&nbsp;main;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://backend</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >_&nbsp;allinpay</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#客户端的地址</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;&nbsp;Host&nbsp;&nbsp;$host;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;&nbsp;X-Real-IP&nbsp;&nbsp;$remote_addr;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;X-Forward-For&nbsp;$proxy_add_x_forwarded_for</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#代理经过的地址</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;=&nbsp;/status&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stub_status&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access_log&nbsp;off;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow&nbsp;127.0.0.1;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deny&nbsp;all;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#静态资源从后端取，然后放在缓存中</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;~&nbsp;\.(htm|html|gif|jpg|jpeg|png|bmp|ico|css|js|txt)$&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#root&nbsp;&nbsp;&nbsp;/usr/share/nginx/html;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://backend</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >_&nbsp;allinpay</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#客户端的地址</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;&nbsp;Host&nbsp;&nbsp;$host;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;&nbsp;X-Real-IP&nbsp;&nbsp;$remote_addr;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;X-Forward-For&nbsp;$proxy_add_x_forwarded_for</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#代理经过的地址</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;add_header&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >AllInpay</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >-Cache&nbsp;"$upstream_cache_status";</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#缓存</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_cache&nbsp;allinpay;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#对不同的HTTP状态码设置不同的缓存时间</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_cache_valid&nbsp;200&nbsp;304&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >3</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >d;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#以域名、URI组合成Web缓存的Key值，Nginx根据Key值哈希，存储缓存内容到二级缓存目录内</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_cache_key&nbsp;$host$uri</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;客户端缓存</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;expires&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >2</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >d;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-weight:bold; font-size:15.0000pt; mso-font-kerning:0.0000pt; " >tlb.com.conf</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-weight:bold; font-size:15.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#新旧机器做主服务器，轮询方式，旧机器压力占系统的1/6</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >upstream&nbsp;backend</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >_tlb</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;server&nbsp;&nbsp;192.168.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >2</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >2</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >:8080&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;weight&nbsp;5</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:3.7500pt; mso-char-indent-count:0.5000; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >server&nbsp;&nbsp;192.168.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >2</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >3</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >:8080&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;weight&nbsp;5</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;server&nbsp;&nbsp;192.168.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >2</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >.</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >1</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >:8080&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;weight&nbsp;2</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_cache_path&nbsp;&nbsp;/data/nginx/</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >tlb_cache&nbsp;l</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >evels=1:2&nbsp;keys_zone=</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >tlb</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >:</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >100m</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;&nbsp;inactive=1</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >0</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >d</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >max_size=</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >200m</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >server&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;443&nbsp;ssl;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >tlb.com&nbsp;www.tlb.com</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/etc/nginx/conf.d/</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >tlb/tlb</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >.crt;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate_key&nbsp;&nbsp;/etc/nginx/conf.d/</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >tlb/tlb</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >.key;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;charset&nbsp;utf-8;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;source_charset&nbsp;utf-8;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;access_log&nbsp;&nbsp;/var/log/nginx/log/</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >$</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >host</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >/</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >access.log&nbsp;&nbsp;main;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;location&nbsp;/&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://backend</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >_tlb</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#客户端的地址</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header&nbsp;&nbsp;X-Real-IP&nbsp;&nbsp;$remote_addr;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;=&nbsp;/status&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stub_status&nbsp;on;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access_log&nbsp;off;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;allow&nbsp;127.0.0.1;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;deny&nbsp;all;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >#静态资源从后端取，然后放在缓存中</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >location&nbsp;~&nbsp;\.(htm|html|gif|jpg|jpeg|png|bmp|ico|css|js|txt)$&nbsp;{</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://backend</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >_tlb</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#客户端的地址</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;&nbsp;Host&nbsp;&nbsp;$host;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;&nbsp;X-Real-IP&nbsp;&nbsp;$remote_addr;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >proxy_set_header&nbsp;X-Forward-For&nbsp;$proxy_add_x_forwarded_for</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;#代理经过的地址</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="text-indent:15.0000pt; " ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;add_header&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >TLB</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >-Cache&nbsp;"$upstream_cache_status";</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#缓存</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_cache&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >tlb_cache</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#对不同的HTTP状态码设置不同的缓存时间</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_cache_valid&nbsp;200&nbsp;304&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >5</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >d;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#以域名、URI组合成Web缓存的Key值，Nginx根据Key值哈希，存储缓存内容到二级缓存目录内</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;proxy_cache_key&nbsp;$host$uri</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;客户端缓存</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;&nbsp;&nbsp;expires&nbsp;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >1</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >d;</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >&nbsp;&nbsp;}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >}</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >内核优化</span><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal  style="background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >vi&nbsp;/etc/sysctl.conf</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >在末尾增加以下内容：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >引用</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >net.ipv4.tcp_fin_timeout&nbsp;=&nbsp;30</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >net.ipv4.tcp_keepalive_time&nbsp;=&nbsp;300</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >net.ipv4.tcp_syncookies&nbsp;=&nbsp;1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >net.ipv4.tcp_tw_reuse&nbsp;=&nbsp;1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >net.ipv4.tcp_tw_recycle&nbsp;=&nbsp;1</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><br></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " >net.ipv4.ip_local_port_range&nbsp;=&nbsp;5000&#160;&#160;&#160;&#160;65000</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >使配置立即生效：</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal  style="background:rgb(255,255,255); " ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >/sbin/sysctl&nbsp;-p</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:微软雅黑; mso-bidi-font-family:宋体; font-size:7.5000pt; mso-font-kerning:0.0000pt; background:rgb(127,127,127); mso-shading:rgb(127,127,127); " ><o:p>&nbsp;</o:p></span></p><h1 style="mso-list:l11 level1 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >7<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >常见问题</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h1><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >7.1<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >启动错误</span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=NewStyle76  style="margin-left:18.0000pt; text-indent:-18.0000pt; mso-char-indent-count:0.0000; mso-list:l27 level1 lfo23; " ><![if !supportLists]><span style="font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >1.<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >&nbsp;漏了;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >nginx:&nbsp;[emerg]&nbsp;directive&nbsp;"server_name"&nbsp;is&nbsp;not&nbsp;terminated&nbsp;by&nbsp;";"&nbsp;in&nbsp;D:\nginx-1.1.</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2/conf/nginx.conf:149</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >2.参数错误，请检测拼写</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >nginx:&nbsp;[emerg]&nbsp;invalid&nbsp;parameter&nbsp;"eight=10"&nbsp;in&nbsp;D:\nginx-1.1.2/conf/nginx.conf:37</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >解决思路：注意查看日志，打开调试开关</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >invalid&nbsp;number&nbsp;of&nbsp;arguments&nbsp;in&nbsp;"root"&nbsp;directive</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="350"  height="67"  src="nginx.files/nginx46730.png" ><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >修改为</span><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><img width="380"  height="77"  src="nginx.files/nginx46736.png" ><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >查看日志</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="100"  src="nginx.files/nginx46744.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="149"  src="nginx.files/nginx46747.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><h2 style="mso-list:l11 level2 lfo1; " ><![if !supportLists]><span style="font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><span style='mso-list:Ignore; ' >7.2<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; mso-ascii-font-family:Cambria; mso-hansi-font-family:Cambria; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " >nginx<font face="宋体" >无法访问</font></span><span style="mso-spacerun:'yes'; font-family:Cambria; mso-fareast-font-family:宋体; mso-bidi-font-family:宋体; font-weight:bold; font-size:16.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></h2><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >启动正常，本机可以访问。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >远程无法访问。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><img width="554"  height="123"  src="nginx.files/nginx46783.png" ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >一般是防火墙问题。</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >service</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;iptables&nbsp;stop</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=pre ><span class="48"  style="mso-spacerun:'yes'; font-family:宋体; " >vi</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >&nbsp;</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >/</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >etc</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >/</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >sysconfig</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >/</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >iptables</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >添加</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=pre ><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >-</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >A&nbsp;</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >-</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >INPUT&nbsp;</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >-</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >m&nbsp;state&nbsp;</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >--</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >state&nbsp;NEW&nbsp;</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >-</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >m&nbsp;tcp&nbsp;</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >-</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >p&nbsp;tcp&nbsp;</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >--</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >dport&nbsp;</span><span class="56"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >80</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >&nbsp;</span><span class="33"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >-</span><span class="48"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; " >j&nbsp;ACCEPT</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >然后执行</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >service&nbsp;iptables&nbsp;restart</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >注意：相关端口还有443等。&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><h1 style="mso-list:l11 level1 lfo1; " ><![if !supportLists]><span style="font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><span style='mso-list:Ignore; ' >8<span>&nbsp;</span></span></span><![endif]><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " >参考资料</span><span style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></h1><p class=MsoNormal ><span><a href="http://www.ibm.com/developerworks/cn/web/wa-lo-nginx/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://www.ibm.com/developerworks/cn/web/wa-lo-nginx/</span></a></span><span class="41"  style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >&nbsp;&nbsp;入门</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://nginx.org/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;官网</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://nginx.org/en/docs/index.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/en/docs/index.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;配置</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://nginx.org/cn/docs/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://nginx.org/cn/docs/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;&nbsp;中文文档</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://tengine.taobao.org/" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://tengine.taobao.org/</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;淘宝修改的nginx</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://tengine.taobao.org/book/index.html" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://tengine.taobao.org/book/index.html</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;tengine开发文档</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://wiki.nginx.org/Modules" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://wiki.nginx.org/Modules</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;</span><span class="19"  style="mso-spacerun:'yes'; font-family:宋体; font-weight:bold; font-size:22.0000pt; mso-font-kerning:22.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://wiki.nginx.org/NginxChs" ><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " >http://wiki.nginx.org/NginxChs</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; color:rgb(0,0,255); text-decoration:underline; text-underline:single; font-size:10.5000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span><a href="http://os.51cto.com/art/201111/304611.htm" ><span class="41"  style="mso-spacerun:'yes'; font-family:'Times New Roman'; color:rgb(0,0,255); text-decoration:underline; text-underline:single; " >http://os.51cto.com/art/201111/304611.htm</span></a></span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " >&nbsp;&nbsp;&nbsp;nginx专题</span><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p></o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p><p class=MsoNormal ><span style="mso-spacerun:'yes'; font-family:宋体; font-size:12.0000pt; mso-font-kerning:0.0000pt; " ><o:p>&nbsp;</o:p></span></p></div><!--EndFragment--></body></html>